"use strict";function doClear(e){e.value==e.defaultValue&&(e.value="")}function check_all(e){for(var a=!allchkd,t=0;t<e.length;t++)"checkbox"==e[t].type&&(e[t].checked=a);allchkd=a}var allchkd=!1;$(function(){function e(){return new Promise(function(e){return setTimeout(e,1e3)})}function a(){var e=0;d.each(function(){var a=$(this),i=a.attr("data-apply-additional-q"),n=a.find(":input"),r=n.is("[required]");if("file"===i){var o=n[0];o.files&&o.files[0]&&o.files[0].size>2e7?(t(a,!0,"File size cannot exceed 20mb"),e++):o.files&&!o.files[0]&&r?(t(a,!0,"Please upload a file"),e++):t(a,!1)}else if("range"===i){var d=n.val(),l=Number(d),s=n.attr("min"),c=n.attr("max"),u=c&&""!==c&&l>Number(c),v=s&&""!==s&&l<Number(s),p=u||v;""===d?r&&(t(a,!0,"Please answer the above question"),e++):Number.isInteger(l)?p?(t(a,!0,"Value must be between "+s+" - "+c),e++):t(a,!1):(t(a,!0,"Value must be a whole number"),e++)}else if("number"===i){var f=n.val(),h=Number(f);""===f?r&&(t(a,!0,"Please answer the above question"),e++):Number.isInteger(h)?t(a,!1):(t(a,!0,"Value must be a whole number"),e++)}else if("date"===i){var m=n.val();""===m?r&&(t(a,!0,"Please answer the above question"),e++):t(a,!1)}else"multiselect"===i?0!==a.find(":input").val().length?t(a,!1):r&&(t(a,!0),e++):""!==a.find(":input").val()?t(a,!1):r&&(t(a,!0),e++)});var a=$("#answerSelectCoverLetter"),i=a.is("[required]");return""!==a.find(":input").val()?t(a,!1):i&&(t(a,!0),e++),0!==e||(l.attr("hidden",""),o.removeAttr("aria-describedby"),!1)}function t(e,a,t){var i=e.find("[data-apply-additional-error]");e.find(":input").attr({"aria-invalid":a,"aria-describedby":a?i.attr("id"):""}).toggleClass("error",a),i.prop("hidden",!a),t&&i.text(t)}$("#show-cover-tips").on("click",function(){$("#cover-tips-wrap").slideDown(),$("#show-cover-tips").hide(),$("#hide-cover-tips").show()}),$("#hide-cover-tips").on("click",function(){$("#cover-tips-wrap").slideUp(),$("#show-cover-tips").show(),$("#hide-cover-tips").hide()}),"undefined"!=typeof remove_temp_cv&&$('[data-action="remove-temp-cv"]').on("click",function(){remove_temp_cv()}),$('[data-action="toggle-cv-upload"]').on("click",function(){var e=$(this);e.attr("aria-expanded","true"!==e.attr("aria-expanded")),$("#choose-cv").slideToggle(200)});var i=$(".quick-apply-no-cv"),n=$("#doc, #cv-box, #cv-dropbox, #cv-googledrive, #cv-onedrive");i.length&&n.on("change",function(){var e=n.toArray().some(function(e){return!!e.value});i.toggle(!e)});var r=$("[data-validate-additional-questions]"),o=$("[data-send-application]"),d=r.find("[data-apply-additional-q]"),l=$("[data-apply-validate-status]"),s=!1,c=r[0]&&r[0].hasAttribute("data-ats-loading-screen");d.length&&r.attr("novalidate","novalidate"),r.on("submit",function(t){var i=!1;d.length&&(i=a())&&(t.preventDefault(),s||(r.on("change",a),s=!0),l.attr("hidden",!1),o.attr("aria-describedby","applyFormStatus")),c&&!i&&($("#ats-apply-loader").removeClass("is-hidden"),$(".page-main").hide());var u=!1;$(this).data("cand-has-cv")||(u=n.toArray().some(function(e){return!!e.value}));var v=$(this).find('input[name="save_to_profile"]');if(($(this).data("cand-has-old-cv")||v.is(":checked"))&&(u=!0),u){var p=$(this).data("cand-uuid"),f={candidate_uuid:p,availability:!1,county_location:!1,current_job_title:!1,cv_upload:!0,desired_job_title:!1,driving_licence:!1,email_address:!1,first_name:!1,fluent_languages:!1,industry:!1,job_type_contract:!1,job_type_part_time:!1,job_type_permanent:!1,job_type_temporary:!1,last_name:!1,optional_phone_number:!1,phone_number:!1,postcode:!1,salary_range:!1,skills:!1,town_city:!1,willing_to_relocate:!1,willing_to_travel:!1};"undefined"!=typeof ClickstreamAnalytics&&"undefined"!=typeof ClickstreamAnalytics.record&&(ClickstreamAnalytics.record({name:"ux_candidate_profile_modify_requested",isImmediate:!0,attributes:f}),e()),new Date($(this).data("cand-last-activity"))<(new Date).setMonth((new Date).getMonth()-6)&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({cv_upload:f.cv_upload,event:"inactive-candidate-modify"}))}})});