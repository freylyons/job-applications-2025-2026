define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-refer-friend-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoReferFriend:"referFriend",ddoGetCategories:"getMasterCategories",keyUploadUrl:"/uploadFileReturnURL"}}}),define("v1/ph-refer-friend-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-refer-friend-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.ReferFriendService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-refer-friend",["require","exports","aurelia-framework","ph-common","./ph-refer-friend-config","./ph-refer-friend-service","aurelia-fetch-client","aurelia-event-aggregator"],function(e,t,i,o,n,a,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l="ph-refer-friend-v1",c="popup",p=function(e){function t(t,i,n,a){var r=e.call(this,t,i,l)||this;return r.commonService=i,r.eventAggregator=n,r.referFriendService=a,r.eventTag="",r.mode=c,r.profile={},r.categoryList=[{name:"Select",value:""}],r.showErrorMsg=!1,r.errorMessages={},r.saveSuccess=!1,r.saveFail=!1,r.duplicate=!1,r.referredByOther=!1,r.subscribers=[],r.showPopup=!1,r.validationController=new o.ValidationController,r.handleKeyPress=function(e){return 27==e.keyCode&&r.closePopup(),!0},r}return __extends(t,e),Object.defineProperty(t.prototype,"fields",{get:function(){return Object.keys(this.profile)},enumerable:!0,configurable:!0}),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),this.uploadUrl=this.commonService.getBaseDomain()+n.WidgetConfig.v1.keyUploadUrl,this.fetchCategories(),this.validationController.validationErrors={},this.commonService.setValidationRules(phApp.validationRules||{}),this.commonService.setLangBundle(phApp.messages||{}),this.validationController.addValidationCtx(this.profile,this.commonService.getValidationRules("profile")),this.eventTag||(this.eventTag=""),this.mode==c&&(this.showPopup=!1,this.subscribers.push(this.eventAggregator.subscribe(this.eventTag+"prefillData",function(e){Object.keys(e).forEach(function(i){t.profile[i]=e[i]}),t.showPopup=!0,document.getElementsByTagName("body")[0].style.overflow="hidden",document.addEventListener("keydown",t.handleKeyPress)})),this.subscribers.push(this.eventAggregator.subscribe(this.eventTag+"referPopupClose",function(){t.closePopup()}))),"flat"==this.mode&&(this.showPopup=!0),"hidePopup"==this.mode&&(this.showPopup=!1,document.addEventListener("keydown",this.handleKeyPress))},t.prototype.detached=function(){this.subscribers.forEach(function(e){e.dispose()})},t.prototype.fetchCategories=function(){var e=this,t=n.WidgetConfig.v1.ddoGetCategories;this.referFriendService.makeDDORequest(l,t).then(function(t){t.data?t.data.forEach(function(t){t.device==window.phApp.deviceType&&e.categoryList.push({value:t.display_name,name:t.display_name})}):console.info("Error fetching category data")},function(e){new Error(e)})},t.prototype.uploadFile=function(){var e=this;this.profile.resumeUrl="",this.profile.resumeName=this.files[0].name,this.validateResume();var t=this.validationController.validationErrors.resumeName;if(!(void 0!=t&&Array.isArray(t)&&t.length>0)){var i=new FormData;i.append("file",this.files[0]);var o=new r.HttpClient;o.configure(function(e){e.useStandardConfiguration().withBaseUrl("api/upload")}),o.fetch(this.uploadUrl,{method:"POST",body:i,headers:new Headers}).then(function(e){return e.json()},function(e){console.log(e)}).then(function(t){t.status&&"SUCCESS"==t.status.toUpperCase()?(e.profile.resumeUrl=t.fileUrl||"",e.profile.resumeName=t.fileName||""):console.info("Resume upload failed"),e.validateResume()},function(t){e.validateResume(),console.log(t.message)})}},t.prototype.submitForm=function(e){var t=this;if(this.showErrorMsg=!1,this.filterFieldsBeforeSubmit(),this.profile.resume=this.profile.resumeUrl||this.profile.linkedinUrl,this.validationController.validate(),!0===this.validationController.hasErrors())return this.generateErrorMessages(),void this.showError("E200",!0);var i={mobile:this.profile.mobile||"",resumeUrl:this.profile.resumeUrl||"",resumeName:this.profile.resumeName||"",linkedinUrl:this.profile.linkedinUrl||"",firstName:this.profile.firstName||"",lastName:this.profile.lastName||"",email:this.profile.email||"",category:this.profile.category||"",designation:this.profile.designation||"",userId:this.profile.userId||"",jobSeqNo:this.profile.jobSeqNo||"",jobId:this.profile.jobId||"",resendFlag:1==e};this.saveFail=!1,this.saveSuccess=!1,this.duplicate=!1,this.referredByOther=!1;var o=n.WidgetConfig.v1.ddoReferFriend;this.referFriendService.makeDDORequest(l,o,i).then(function(e){e.status&&"SUCCESS"==e.status.toUpperCase()&&e.data&&e.data.referralStatus?("SUCCESS"==e.data.referralStatus.toUpperCase()?t.saveSuccess=!0:"ALREADYREFERRED"==e.data.referralStatus.toUpperCase()?t.duplicate=!0:"REFERREDBYOTHER"==e.data.referralStatus.toUpperCase()?t.referredByOther=!0:(console.log("Error in referral"),t.saveFail=!0),t.scrollToTop()):(console.log("Error in referral"),t.saveFail=!0,t.scrollToTop())},function(e){console.log(e),t.saveFail=!0,t.scrollToTop()})},t.prototype.closeSaveMessage=function(){this.saveFail?this.saveFail=!1:this.closePopup()},t.prototype.closePopup=function(){var e=this;this.duplicate||this.referredByOther?(this.duplicate=!1,this.referredByOther=!1):(this.saveFail=!1,this.saveSuccess=!1,this.removeResumeFile(),this.validationController.validationErrors={},this.errorMessages={},this.showErrorMsg=!1,"showPopup"==this.mode?this.closeFunction():this.mode==c&&(Object.keys(this.profile).forEach(function(t){e.profile[t]=""}),this.showPopup=!1,document.getElementsByTagName("body")[0].style.overflow="auto",document.removeEventListener("keydown",this.handleKeyPress)))},t.prototype.scrollToTop=function(){var e=document.querySelector('[id="'+this.eventTag+'top"]');e&&(e.scrollIntoView(),e.focus())},t.prototype.generateErrorMessages=function(){var e=this;Object.keys(this.profile).forEach(function(t){var i=e.validationController.validationErrors[t];if(e.errorMessages[t]=[],void 0!=i&&Array.isArray(i)&&i.length>0)if("string"==typeof i[0])for(var o=0;o<i.length;o++)e.errorMessages[t].push(i[o]);else for(var o=0;o<i.length;o++){var n={};n=i[o];for(var a in n)if(n.hasOwnProperty(a)){var r=[];if(r=n[a],r.length>0)for(var s=0;s<r.length;s++)r[s]&&"string"==typeof r[s]&&e.errorMessages[t].push(r[s])}}})},t.prototype.validateResume=function(){this.profile.resume=this.profile.linkedinUrl||this.profile.resumeUrl||this.profile.resumeName,this.validationController.validate("linkedinUrl"),this.validationController.validate("resumeUrl"),this.validationController.validate("resumeName"),this.validationController.validate("resume")},t.prototype.removeResumeFile=function(){this.profile.resumeName="",this.profile.resumeUrl="",this.files=null,this.fileValue=null,this.validateResume()},t.prototype.filterFieldsBeforeSubmit=function(){var e=this;-1==this.categoryList.findIndex(function(t){return t.value==e.profile.category})&&(this.profile.category="")},t.prototype.showError=function(t,i){var o=this,n="profile_"+t;this.errorMessages.errors=[n];var a=setInterval(function(){var e=document.querySelector('[class^="alert-form-message"]');if(o.showErrorMsg=!0,null!=e&&(e.scrollIntoView(),e.focus(),clearInterval(a),i)){var t=document.querySelector(".error-block"),n=function(){t.removeEventListener("blur",n,!1)};t.addEventListener("blur",n,!1)}},100);e.prototype.hideLoader.call(this)},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"eventTag",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"mode",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"profile",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"closeFunction",void 0),t=__decorate([i.customElement(l),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(p=void 0!==o.CommonService&&o.CommonService)&&p||Object,s.EventAggregator,a.ReferFriendService])],t);var p}(o.PhenomWidget);t.ReferFriend=p}),define("text!v1/ph-refer-friend.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-refer-friend-v1/default/view.html",["module"],function(e){e.exports='<template>\n\t<div class="quick-refer-area" click.delegate="hidePopups()">\n\t\t<div class="heading-box">\n\t\t\t<h2 class="heading">QUICK REFER A FRIEND</h2>\n\t\t</div>  \n\t\t<div class="refer-block">\n\t\t\t<form submit.delegate="submitForm()">\n\t\t\t\t<div class="form-field" style="width: 120px;">\n\t\t\t\t\t<label for="title">TITLE<span class="required-field" if.bind="mandatoryFields.title">*</span>\n\t\t\t\t\t\t<span class="validation-box active" show.bind="showMandatory.title">Title is required</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<select placeholder="Select" id="title" value.bind="profile.title">\n\t\t\t\t\t\t<option repeat.for="title of titleList" value.bind="title">${title}</option>\n\t\t\t\t\t</select>\n\t\t\t\t\t<i class="fa fa-chevron-down select-chevron" aria-hidden="true"></i>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-field">\n\t\t\t\t\t<label for="name">FULL NAME<span class="required-field" if.bind="mandatoryFields.name">*</span>\n\t\t\t\t\t\t<span class="validation-box" show.bind="showMandatory.name">Full name is required</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<input type="" placeholder="Type here" id="name" value.bind="profile.name">\n\t\t\t\t</div>\n\t\t\t\t<div class="form-field">\n\t\t\t\t\t<label for="email">EMAIL<span class="required-field" if.bind="mandatoryFields.email">*</span>\n\t\t\t\t\t\t<span class="validation-box" show.bind="showMandatory.email">Email is required</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<input type="" placeholder="Type here" id="email" value.bind="profile.email">\n\t\t\t\t</div>\n\t\t\t\t<div class="form-field">\n\t\t\t\t\t<label for="number">CONTACT NUMBER<span class="required-field" if.bind="mandatoryFields.contact">*</span>\n\t\t\t\t\t\t<span class="validation-box" show.bind="showMandatory.contact">Contact number is required</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<input type="" placeholder="Type here" id="number" value.bind="profile.contact">\n\t\t\t\t</div>\n\t\t\t\t<div class="form-field">\n\t\t\t\t\t<label for="category">CATEGORY<span class="required-field" if.bind="mandatoryFields.category">*</span>\n\t\t\t\t\t\t<span class="validation-box" show.bind="showMandatory.category">Job category is required</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<select type="" placeholder="Type here" id="category" value.bind="profile.category">\n\t\t\t\t\t\t<option repeat.for="category of categoryList" value.bind="category">${category}</option>\n\t\t\t\t\t</select>\n\t\t\t\t\t<i class="fa fa-chevron-down select-chevron" aria-hidden="true"></i>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-field">\n\t\t\t\t\t<label for="designation">DESIGNATION<span class="required-field" if.bind="mandatoryFields.designation">*</span>\n\t\t\t\t\t\t<span class="validation-box" show.bind="showMandatory.designation">Designation is required</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<input type="" placeholder="Type here" id="designation" value.bind="profile.designation">\n\t\t\t\t</div>\n\t\t\t\t<div class="form-field">\n\t\t\t\t\t<label for="resume">RESUME<span class="required-field" if.bind="mandatoryFields.resume">*</span>\n\t\t\t\t\t\t<span class="validation-box" show.bind="showMandatoryResume">Please select a Resume</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<div class="resume-links">\n\t\t\t\t\t\t<input type="file" class="upload-Resume-Button" files.bind="files" change.delegate="uploadFile()">\n\t\t\t\t\t\t<i class="fa fa-upload" aria-hidden="true"></i> Upload Resume\n\t\t\t\t\t</div>\n\t\t\t\t\t<a href="javascript:void(0)" class="resume-links"><i class="fa fa-link" aria-hidden="true"></i> LinkedIn Profile Link</a>\n\t\t\t\t\t<input type="" placeholder="Add link here" id="resume" style="padding: 10px 15px;" value.bind="profile.linkedinLink">\n\t\t\t\t</div>         \n\t\t\t\t<div class="message-field">\n\t\t\t\t\t<label for="message">MESSAGE<span class="required-field" if.bind="mandatoryFields.message">*</span>\n\t\t\t\t\t\t<span class="validation-box" show.bind="showMandatory.message">Message is required</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<textarea type="" placeholder="My friend (friends name) is looking for a job change and is intrested to work with our company. He has prior experience" id="message" value.bind="profile.message"></textarea>\n\t\t\t\t</div>  \n\t\t\t\t<div class="submit-block">     \n\t\t\t\t\t<button type="submit">\n\t\t\t\t\t\tSUBMIT DETAILS TO REFER\n\t\t\t\t\t</button>\n\t\t\t\t</div>                                                                 \n\t\t\t</form>\n\t\t</div>\n\t</div>\n</template>\n'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v2/ph-similar-jobs-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v2:{ddoKey:"similarJobs",imSimilarJobs:"imSimilarJobs",jobDetailDDOKey:"jobDetail"}}}),define("v2/ph-similar-jobs-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.similarJobsReqObj={refNum:"",jobSourceRefNum:[""],size:"10",requestID:"",parentRefNum:"",locale:"",jobSeqNo:""}}return e}();t.SimilarJobsModel=i});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-similar-jobs-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.getSimilarJobs=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.SimilarJobsService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-similar-jobs",["require","exports","aurelia-framework","ph-common","./ph-similar-jobs-config","aurelia-event-aggregator","./ph-similar-jobs-service","./ph-similar-jobs-model"],function(e,t,i,o,n,a,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l="v2",c="ddoKey",p="imSimilarJobs",d="jobDetailDDOKey",f="ph-similar-jobs-"+l,h="similar_job_click",u=function(e){function t(t,i,o,a,r,s){var u=e.call(this,t,i,f)||this;return u.commonService=i,u.similarJobsService=o,u.eventAggregator=a,u.similarJobsModel=r,u.localStorage=s,u.jobResults=[],u.fetchJobSeqNo=function(){var t=u.similarJobsModel.similarJobsReqObj;if(u.currentJobSeqNo&&null!=u.currentJobSeqNo&&u.currentJobSeqNo.length>0)t.jobSeqNo=u.currentJobSeqNo,u.getSimilarJobs(t);else{var i=u.commonService.getCachedDDO(n.WidgetConfig[l][d],f);i&&i.data&&i.data.job&&i.data.job.jobSeqNo?(u.currentJobSeqNo=i.data.job.jobSeqNo,t.jobSeqNo=u.currentJobSeqNo,u.getSimilarJobs(t)):e.prototype.handleError.call(u,"")}},u.getSimilarJobs=function(t){e.prototype.unhideLoader.call(u);var i=c;i="internal"==u.commonService.getSiteType()?p:c,u.similarJobsService.getSimilarJobs(f,n.WidgetConfig[l][i],t).then(function(t){e.prototype.hideLoader.call(u),t=t&&t.data,t&&t.similarJobs&&t.similarJobs.length?(u.jobResults=t.similarJobs||[],u.jobWidgetSettingsPromise.then(function(e){u.onDataChange(h)})):e.prototype.handleError.call(u,"")},function(t){e.prototype.handleError.call(u,"")})},u}return __extends(t,e),t.prototype.created=function(){var t=this;this.eventAggregator.subscribe("updateJob",function(i){!i.jobSeqNo||t.currentJobSeqNo&&t.currentJobSeqNo==i.jobSeqNo||(e.prototype.showContainer.call(t),t.getSimilarJobs({jobSeqNo:i.jobSeqNo}),t.currentJobSeqNo=i.jobSeqNo)})},t.prototype.attached=function(){e.prototype.attached.call(this),this.currentJobSeqNo=e.prototype.getQueryParam.call(this,"jobSeqNo")||this.currentJobSeqNo,this.fetchJobSeqNo()},t.prototype.onDataChange=function(t){e.prototype.onDataChange.call(this,t)},t.prototype.stringify=function(e){return JSON.stringify(e)},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable(),__metadata("design:type",String)],t.prototype,"currentJobSeqNo",void 0),t=__decorate([i.customElement(f),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(u=void 0!==o.CommonService&&o.CommonService)&&u||Object,r.SimilarJobsService,a.EventAggregator,s.SimilarJobsModel,"function"==typeof(g=void 0!==o.LocalStorageAPI&&o.LocalStorageAPI)&&g||Object])],t);var u,g}(o.PhenomJobWidget);t.SimilarJobs=u}),define("text!v2/ph-similar-jobs.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v3/ph-social-share-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v3:{ddoKey:"jobDetails",ddoKey2:"googleShortUrl",ddoKeyShareDetails:"getSocialSharingDetails",ddoShareOption:"jobsharewidgetsettings",ddoBaseUrls:"baseUrls"}}});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-social-share-service",["require","exports","aurelia-framework","ph-common","./ph-social-share-config"],function(e,t,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t,i){this.commonService=e,this.WidgetConfig=t,this.serviceRequest=i,this.hashtagsText=""}return e.prototype.getShortUrl=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e.googleShortUrl&&e.googleShortUrl.status&&"failed"==e.googleShortUrl.status?"#":encodeURIComponent(e.googleShortUrl.shortUrl)})},e.prototype.getSocialUrls=function(e,t,i,o){var a=this;if(this.jobDetails=t,"internal"!=this.commonService.getSiteType()){var r=this.commonService.getUrl("job",t);return r=this.removeLastCharIfExists(r,"/"),r+="/?",this.getShareUrl(e,"googleShortUrl",r,i).then(function(e){return e})}var s={jobSeqNo:t.jobSeqNo,jobId:t.jobId,medium:"social-share",campaign:"social",source:i.name};o&&(s.siteType=o);var l=n.WidgetConfig.v3.ddoKeyShareDetails;return this.commonService.getDDO(e,l,s).then(function(t){if(t&&t[l]&&t[l].status&&"SUCCESS"==t[l].status.toUpperCase()&&t[l].data&&t[l].data.jdUrl){var o=t[l].data.jdUrl;return o=a.removeLastCharIfExists(o,"/"),o+="/?",t[l].data.referrerToken&&(o+="referrerToken="+t[l].data.referrerToken+"&"),a.getShareUrl(e,"googleShortUrl",o,i).then(function(e){return e})}return console.info("Error getting url"),"#"})},e.prototype.getShareUrl=function(e,t,i,o){var n=this;i+="utm_source="+o.name+"&utm_campaign=job-share&utm_medium=social-share";var a={url:i};return"whatsapp"!=o.name?this.getShortUrl(e,t,a).then(function(e){return n.updateReqParamsToUrl(o,e)}):new Promise(function(e,t){e(n.updateReqParamsToUrl(o,n.shareInfoText+" "+i))})},e.prototype.updateReqParamsToUrl=function(e,t){var i=""+e.baseUrl+t;if(e.settings.params){var o=e.settings.params;o.hasOwnProperty("media")&&(this.tagValue=this.getTagValue());for(var n in o)o.hasOwnProperty(n)&&this[o[n]]&&(i+="&"+n+"="+this[o[n]]);return i}return i},e.prototype.removeLastCharIfExists=function(e,t){return e.length&&e[e.length-1]==t&&(e=e.substring(0,e.length-1)),e},e.prototype.makeDDORequest=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e?e[t]:{}})},e.prototype.getTagValue=function(){return document.querySelector("meta[property='og:image']").content},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object,Object,"function"==typeof(a=void 0!==o.ServiceRequest&&o.ServiceRequest)&&a||Object])],e);var t,a}();t.SocialShareService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-social-share",["require","exports","aurelia-framework","ph-common","./ph-social-share-config","./ph-social-share-service","aurelia-event-aggregator"],function(e,t,i,o,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="ph-social-share-v3",l=function(e){function t(t,i,o,n){var a=e.call(this,t,i,s)||this;return a.element=t,a.commonService=i,a.socialShareService=o,a.eventAggregator=n,a.currentJobObj={},a.showMailTo=!1,a.isErrorMsgReqd=!1,a.isShareIcon=!0,a.isPopup=!1,a.showTitle=!0,a.detailObj={},a.loadingText="Loading ...",a.replaceJobSeqNo=!1,a.showCopySuccessMessage=!1,a.shareObj={},a.showErrorMsg=!1,a.sociaurl=[],a.showEmailView=!1,a.shareInfoText="Interesting Job Posting at {{category}}, {{location}}, {{title}}",a.isPopupOpened=!1,a.jobLink="",a.selectedPopup="",a.showCopySuccess=!1,a.isEmailClientEnabled=!1,a}return __extends(t,e),t.prototype.attached=function(){if(e.prototype.hideLoader.call(this),e.prototype.attached.call(this),this.fetchJobObj(),"e"==e.prototype.getQueryParam.call(this,"vt")&&(this.siteType="external"),this.isEmailClientEnabled=this.commonService.getSiteSettings("isNativeEmailClient"),this.configureShare(),this.showMailTo){var t=encodeURIComponent(window.location.href);this.strMailtoProto="mailto:?subject=Check out this job!&body=Hi,%0A%0AI noticed a Job Opportunity at "+t+"%0A%0A"}},t.prototype.created=function(){var t=this;this.eventAggregator.subscribe("updateJob",function(i){(!t.jobSeqNo||i.jobSeqNo&&t.jobSeqNo!=i.jobSeqNo)&&(e.prototype.showContainer.call(t),t.replaceJobSeqNo&&(i.jobSeqNo=i.jobId),t.currentJobObj=i,t.jobSeqNo=t.currentJobObj.jobSeqNo,t.category=t.currentJobObj.category)})},t.prototype.fetchJobObj=function(){Object.keys(this.detailObj)&&Object.keys(this.detailObj).length?this.currentJobObj=this.detailObj:this.currentJobObj=this.commonService.getCachedDDO("jobDetail"),this.currentJobObj&&this.currentJobObj.data&&(this.currentJobObj=this.currentJobObj.data.job,this.currentJobObj&&(this.jobSeqNo=this.currentJobObj.jobSeqNo,this.category=this.currentJobObj.category))},t.prototype.configureShare=function(){var t=this;try{this.shareOption=this.shareOption?JSON.parse(this.shareOption):{};var i=!0;this.shareOption&&this.shareOption.options&&this.shareOption.options.length||(i=!1,this.socialShareService.makeDDORequest(s,n.WidgetConfig.v3.ddoShareOption,{}).then(function(i){e.prototype.hideLoader.call(t),i&&i.data?(t.shareOption=i.data||{},t.shareOption.options=t.shareOption.options||[]):t.shareOption.options=[],t.checkEmailExists()},function(i){new Error(i),e.prototype.hideLoader.call(t),t.handleError("")})),i&&this.checkEmailExists()}catch(e){}},t.prototype.checkEmailExists=function(){this.isShareEmailFound=this.shareOption.options.findIndex(function(e){return"email"==e.name}),this.isShareEmailFound=-1!=this.isShareEmailFound},t.prototype.closeShareJob=function(e,t){var i=this;t||this.isPopupOpened?(this.shareTimer&&clearTimeout(this.shareTimer),this.isShareIcon=!0,this.currentJobObj&&(this.currentJobObj.toggleOpen=!0)):(this.shareTimer&&clearTimeout(this.shareTimer),this.shareTimer=setTimeout(function(){i.isShareIcon=!1,i.currentJobObj&&(i.currentJobObj.toggleOpen=!1)},300))},t.prototype.handlePopup=function(t){var i=this;this.widgetBundle.shareInfoText&&(this.shareInfoText=this.widgetBundle.shareInfoText),this.shareInfoText=this.shareInfoText.replace("{{categoryName}}","{{category}}"),this.socialShareService.shareInfoText=this.commonService.getTranslation(this.shareInfoText,this.currentJobObj,!0),this.socialShareService.shareInfoText=this.socialShareService.shareInfoText.replace(/%250A/g,"%0A"),this.socialShareService.hashtagsText=this.widgetBundle.hashtagsText,e.prototype.unhideLoader.call(this);var o={},n={};if(o.trait5=this.jobSeqNo,o.trait14=this.category,t.eventName&&this.commonService.processTrackingEvent(t.eventName,void 0,o),"email"==t.name)if(this.isEmailClientEnabled)this.handleEmailClientOrJob();else{this.showEmailView=!this.showEmailView,o.params={toggle:this.showEmailView};var a=document.querySelector('[as-element^="ph-email-job"]');if(a){if(this.commonService.smoothScroll&&"internal"==this.commonService.getSiteType()){var r=window.pageYOffset,l=this.commonService.getNearestSectionElemOffsetTop(a);r<l?this.commonService.smoothScroll(r,l,!0,30):this.commonService.smoothScroll(r,l,!1,30)}else a.scrollIntoView(!1);if(a.au&&a.au.controller&&a.au.controller.viewModel&&!a.au.controller.viewModel.isPopupReqd){var c=a.au.controller.viewModel,p=c.element.querySelector(".ph-a11y-email-job-heading");p&&p.focus()}}this.showEmailView&&e.prototype.raiseEvent.call(this,"show-email-job",{})}else"copylink"==t.name?this.handelCopyJobLink():(n=window.open("","",t.settings.popUpParams),this.isPopupOpened=!0,setTimeout(function(){i.isPopupOpened=!1},100));"email"!=t.name&&"copylink"!=t.name&&(n.document.body.innerHTML=this.loadingText,this.socialShareService.getSocialUrls(s,this.currentJobObj,t,this.siteType).then(function(t){e.prototype.hideLoader.call(i),n.location.href=t},function(t){new Error(t),e.prototype.hideLoader.call(i),i.handleError("")}))},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},t.prototype.getLocalWidgetBundle=function(){return{"google-plus":"google-plus",facebook:"facebook",linkedin:"linkedin",twitter:"twitter",email:"share via mail",xing:"xing",pinterest:"pinterest",vk:"vk",whatsapp:"whatsapp",weibo:"weibo"}},t.prototype.handleEmailClientOrJob=function(){var t=this.widgetBundle.emailClientBody||"Check out this job:";try{t=decodeURIComponent(t)}catch(e){o.logger.error(e)}var i=this.widgetBundle.emailClientSubject||"{{title}} at {{companyName}}",n=this.commonService.getTranslation(i,this.currentJobObj),a=this.commonService.getTranslation(t,this.currentJobObj),r=e.prototype.getUrl.call(this,"","job",this.currentJobObj);r&&r.length&&(r=r.replace("/i/","/")),window.location.href="mailto:?subject="+encodeURIComponent(n)+"&body="+encodeURIComponent(a)+r},t.prototype.handelCopyJobLink=function(){this.jobLink=this.commonService.getUrl("job",this.currentJobObj),this.selectedPopup="copyLinkPopup";var t=this.element.querySelector(".ph-a11y-popup-selector"),i=this.element.querySelector(".ph-a11y-popup-selector"),o=this.element.querySelector("ph-a11y-copyLinkClose-popup");e.prototype.openDialogPopup.call(this,t,o,i),this.element.querySelector(".input-copy-link").value=this.jobLink},t.prototype.copyLink=function(){var e=this;this.element.querySelector(".input-copy-link").select(),document.execCommand("copy"),this.showCopySuccessMessage&&(this.showCopySuccess=!0,setTimeout(function(){e.showCopySuccess=!1},5e3))},t.prototype.copyLinkCancelAction=function(){this.showCopySuccess=!1,e.prototype.closeDialogPopup.call(this)},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],t.prototype,"currentJobObj",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],t.prototype,"showMailTo",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"hideTitle",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"hideSubTitle",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"shareOption",void 0),
__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"isShareIcon",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"isPopup",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"showTitle",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],t.prototype,"detailObj",void 0),__decorate([i.bindable(),__metadata("design:type",String)],t.prototype,"loadingText",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"replaceJobSeqNo",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"showCopySuccessMessage",void 0),t=__decorate([i.customElement(s),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(l=void 0!==o.CommonService&&o.CommonService)&&l||Object,a.SocialShareService,r.EventAggregator])],t);var l}(o.PhenomWidget);t.SocialShare=l}),define("text!v3/ph-social-share.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v3/views/ph-social-share-v3/default/view.html",["module"],function(e){e.exports='<template>\n<div class="phs-share-job-area ph-widget-box" role="region" key-role="regionRole" aria-label="Social share" key-aria-label="socialShare">\n    <div class="show-loader" ph-loading-img="show-loader.bind: showLoader" show.bind="showLoader"></div>\n    <div class="widget-container">\n        <div class="phs-widget-heading">\n            <h2>\n                <ppc-content key="socialShareHeading" data-ph-at-id="heading-text">Share this Opportunity</ppc-content>\n            </h2>\n        </div>\n        <div class="content-block">\n            <ul data-ph-at-id="share-options-list">\n               \n                <li repeat.for="eachIndicator of shareOption">\n                    <a class="${eachIndicator}" click.trigger="handlePopup(eachIndicator)" aria-label="Share via ${eachIndicator}" key-aria-label="share${eachIndicator}"\n                        href="javascript:void(0)" data-ph-at-id="share-${eachIndicator}-link" title="Share via ${eachIndicator}"  \n                        key-title="share${eachIndicator}Title" target="_blank" blur.trigger="closeShareJob($event, true)">\n                        <i class="icon icon-${eachIndicator}"></i> ${widgetBundle[eachIndicator] | pht}\n                        <span class="sr-only">\n                            <ppc-content key="share${eachIndicator}Text" data-ph-at-id="share-${eachIndicator}s-text">  ${widgetBundle[eachIndicator] | pht}</ppc-content>\n                        </span>\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v2/ph-cookie-popup-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v2:{ddoKey:"cookiePopup",storeOneTrustCookieSession:"storeOneTrustCookieSession"}}});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-cookie-popup-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.CookiePopupService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-cookie-popup",["require","exports","aurelia-framework","ph-common","aurelia-event-aggregator","./ph-cookie-popup-service"],function(e,t,i,o,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="ph-cookie-popup-v2",s=window,l="top",c='[as-element^="ph-cookie-popup"] .ph-sticky-header',p="ph:gdpr:OptanonWrapperUpdated",d='[as-element*="header"] .ph-sticky-header, .header-layout .pcs-sticky-header ,.header-layout .ph-sticky-block-fixed',f={top:"cookie-popup-top",bottom:"cookie-popup-bottom"},h={C0001:"essential",1:"essential",C0002:"performance",2:"performance",C0003:"functional",3:"functional",C0004:"analytics",4:"analytics",C0005:"social",5:"social"},u={1:"essential",2:"functional",3:"analytics",4:"social",TA001:"essential",TA002:"functional",TA003:"analytics",TA004:"social"},g=function(e){function t(t,i,o,n,a,c){var d=e.call(this,t,i,r)||this;return d.element=t,d.commonService=i,d.cookiePopupService=o,d.cookieManager=n,d.eventAggregator=a,d.localStorageContext=c,d.doNotHide=!1,d.showDeclineButton=!0,d.showCookieSettingsButton=!1,d.showCookiePopup=!0,d.cookieValue="",d.position=l,d.isAccepted=!0,d.cookieType="",d.cookieWindowType="default",d.subscriptions=[],d.cookieCategoryConfig=h,d.trustArcCookieCategoryConfig=u,d.handleExternalCookie=function(e,t){t=t||{};var i=[],o=e.availOnAllowedCookies||[],n=t.groups||s.OnetrustActiveGroups,a=!0;if(n){n=n.split(",");for(var r=0;r<o.length;r++)if(o[r]&&-1===n.indexOf(o[r])){a=!1;break}d.cookieValue="d",a&&(d.cookieValue="a"),d.setCookie();var l={};if(e.trackCookieMap&&e.trackCookieMap.cookieMap){var c=d.getEnabledCookies(n);i=d.getDisabledCookies(e.trackCookieMap.cookieMap,c),l.disabledCookies=i,l.cookieMap=e.trackCookieMap.cookieMap,d.addCareerSiteCookies(e,c),d.deleteCareerSiteCookies(e,i),d.addOneTrustSessionData(e,i)}d.raiseActionEvent(p,l)}},d.handleTrustArcCookie=function(e,t){var i=t.data;if("string"==typeof i&&(i=JSON.parse(i)),"submit_preferences"==i.message||"remove_iframe"==i.message){var o=s.phApp.baseDomain||e.currentDomain;o=o.replace(/https?:\/\//g,"");var n=s.truste.cma.callApi("getGDPRConsentDecision",o),a=d.trustArcMappedGroups(n.consentDecision);d.handlingTrustArcUserConsent(e,a)}},d.handlingTrustArcUserConsent=function(e,t){for(var i=[],o=e.availOnAllowedCookies||[],n=!0,a=0;a<o.length;a++)if(o[a]&&-1===t.indexOf(o[a])){n=!1;break}d.cookieValue="d",n&&(d.cookieValue="a"),d.setCookie();var r={};if(e.trackCookieMap&&e.trackCookieMap.cookieMap){var s=d.getTrustArcEnabledCookies(t);i=d.getDisabledCookies(e.trackCookieMap.cookieMap,s),r.disabledCookies=i,r.cookieMap=e.trackCookieMap.cookieMap,d.addCareerSiteCookies(e,s),d.deleteCareerSiteCookies(e,i),d.addOneTrustSessionData(e,i)}d.raiseActionEvent(p,r)},d.trustArcMappedGroups=function(e){var t=[];return e.forEach(function(e){e&&t.push(e.toString())}),t},d}return __extends(t,e),t.prototype.created=function(){var e=this,t=this.commonService.getSiteSettings("externalCookieConfig"),i=this.commonService.getSiteSettings("externalCookieTrustArcConfig"),o=this.commonService.getSiteSettings("ignoreCookiePages")||[],n=this.commonService.getPageName();if(-1===o.indexOf(n))return t?void this.initiateExternalCookie(t):i?void this.initiateExternalCookieTrustArc(i):void this.subscriptions.push(this.eventAggregator.subscribe("close_cvd_popup",function(){e.setCookieBodyHeight()}))},t.prototype.attached=function(){var t=this;if(!this.isExternalCookieEnabled||this.doNotHide){e.prototype.attached.call(this);var i=this.commonService.getSiteSettings("gdpr")||{};this.cookieType=i&&i.hasOwnProperty("cookieTypeV1")?i.cookieTypeV1:i.cookieType,this.cookieWindowType=i&&i.cookieWindowType||"default",this.position=i&&i.position||l,this.cookieValue=this.cookieManager.get("PHPPPE_GCC"),i&&i.hasOwnProperty("showDecline")&&(this.showDeclineButton=i.showDecline),i&&i.hasOwnProperty("showCookieSettings")&&(this.showCookieSettingsButton=i.showCookieSettings),this.showCookiePopup="s"==this.cookieValue||!1,this.piiConsentEnabled=i.piiConsent,this.cookieValue?(("tentative"==this.cookieType&&"u"==this.cookieValue||"sticky"==this.cookieType&&"s"==this.cookieValue)&&(this.doNotHide&&(this.cookieValue="d","tentative"==this.cookieType?this.setGdprCookie(!0):this.setGdprCookie(!1),this.setCookie(),this.commonService.removeRecomContentFromLocalStorage()),this.handleCookieArea()),this.isAccepted="a"==this.cookieValue,this.commonService.setIsGdprConsentClosed&&this.commonService.setIsGdprConsentClosed(!0)):setTimeout(function(){t.showCookiePopup=!0,t.handleCookieArea()},10),this.subscriptions.push(this.eventAggregator.subscribe("close_cookie_popup",function(e){t.doNotHide||(t.showCookiePopup=!1,t.setCookieAction(!1)),t.isAccepted=!(!e||!e.cookieValue||"a"!=e.cookieValue)}));var o=this.cookieManager.get("PHPPPE_PC");this.piiConsentEnabled&&!o&&this.triggerPiiConsentPopup()}},t.prototype.initiateExternalCookie=function(e){var t=this;this.isExternalCookieEnabled=!0,e.scriptUrl&&!e.scriptUrl.startsWith("http")&&(e.scriptUrl=this.commonService.getCdnUrl()+"/"+e.scriptUrl),this.cookieCategoryConfig=e.cookieCategoryConfig||h,this.loadDependentStyle(e);var i=document.createElement("script");i.src=e.scriptUrl,i.setAttribute("data-document-language","true"),i.type="text/javascript",i.setAttribute("async",""),i.setAttribute("data-domain-script",e.domainKey),i.setAttribute("charset","UTF-8"),e.dataLanguage&&i.setAttribute("data-language",e.dataLanguage),e.ignoreOverrideOptanon?e.ignoreOverrideOptanon&&(s.phApp.OptanonWrapper=this.handleExternalCookie.bind(this,e)):s.OptanonWrapper=this.handleExternalCookie.bind(this,e),i.onload=function(){t.loadDependentScript(e,i)};var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(i,o)},t.prototype.loadDependentScript=function(t,i){t.dependentScriptUrl&&(t.dependentScriptUrl=t.dependentScriptUrl.startsWith("http")?t.dependentScriptUrl:this.commonService.getCdnUrl()+"/"+t.dependentScriptUrl,e.prototype.loadScript.call(this,t.dependentScriptUrl,function(){},[],!0))},t.prototype.loadDependentStyle=function(e){if(e.styleUrl){e.styleUrl=e.styleUrl.startsWith("http")?e.styleUrl:this.commonService.getCdnUrl()+"/"+e.styleUrl;var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e.styleUrl),document.head.appendChild(t)}},t.prototype.initiateExternalCookieTrustArc=function(e){var t=this;if(this.isExternalCookieEnabled=!0,!document.getElementById("consent_blackbar")){var i=document.createElement("div");i.setAttribute("id","consent_blackbar"),document.body.appendChild(i)}e.scriptUrl&&!e.scriptUrl.startsWith("http")&&(e.scriptUrl=this.commonService.getCdnUrl()+"/"+e.scriptUrl),this.trustArcCookieCategoryConfig=e.cookieCategoryConfig||u,this.loadDependentStyle(e);var o=document.createElement("script");o.src=e.scriptUrl,o.setAttribute("data-document-language","true"),o.type="text/javascript",o.setAttribute("async",""),o.setAttribute("charset","UTF-8");var n=s.phApp.baseDomain||e.currentDomain;n=n.replace(/https?:\/\//g,"");var a={PrivacyManagerAPI:{action:"getConsent",timestamp:(new Date).getTime(),self:n}},r=JSON.stringify(a);window.top.postMessage(r,"*"),o.onload=function(){window.addEventListener("message",t.handleTrustArcCookie.bind(t,e)),setTimeout(function(){var i=t.cookieManager.get("notice_gdpr_prefs");if(i){i=i.slice(0,-1),i=i.split(",");for(var o=0;o<i.length;o++)i[o]=Number(i[o])+1}var n=t.trustArcMappedGroups(i||[]);t.handlingTrustArcUserConsent(e,n)},150)};var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(o,l)},t.prototype.getTrustArcEnabledCookies=function(e){for(var t=[],i=0;i<e.length;i++)""!=e[i]&&t.push(this.getTrustArcCookieName(e[i]));return t},t.prototype.addOneTrustSessionData=function(e,t){var i={},o=[];e.trackCookieMap&&e.trackCookieMap.csCookies&&t&&(t.forEach(function(t){(e.trackCookieMap.csCookies[t]||[]).forEach(function(e){o.includes(e)||o.push(e)})}),i.onetrustDisabledCookies=o,this.cookiePopupService.makeDDORequest(r,"storeOneTrustCookieSession",i))},t.prototype.deleteCareerSiteCookies=function(e,t){var i=this;e.trackCookieMap&&e.trackCookieMap.csCookies&&t&&t.forEach(function(t){(e.trackCookieMap.csCookies[t]||[]).forEach(function(e){i.cookieManager.delete(e)})})},t.prototype.addCareerSiteCookies=function(e,t){var i=this,o=new Date;o.setTime(o.getTime()+7776e6);var n={expires:o,path:"/"};e.trackCookieMap&&e.trackCookieMap.csCookies&&t&&t.forEach(function(t){var o=e.trackCookieMap.csCookies[t];o&&o.forEach(function(e){"VISITED_VARIANT"!=e&&"external"!=i.getCareerSiteCookieValue(e)&&i.cookieManager.set(e,i.getCareerSiteCookieValue(e),n)})})},t.prototype.getCareerSiteCookieValue=function(e){var t=s.phApp.locale;switch(t=t.split("_"),e){case"VISITED_COUNTRY":return t[1];case"VISITED_LANG":return t[0];case"VISITED_VARIANT":return this.getSiteVariant(window.phApp.siteType)}},t.prototype.getSiteVariant=function(e){return e&&"internal"==e?"i":e||void 0},t.prototype.getEnabledCookies=function(e){for(var t=[],i=0;i<e.length;i++)if(""!=e[i]){var o=this.getCookieName(e[i]);o&&t.push(this.getCookieName(e[i]))}return t},t.prototype.getDisabledCookies=function(e,t){var i=[];for(var o in e)t.includes(o)||i.push(o);return i},t.prototype.getCookieName=function(e){if(e)return this.cookieCategoryConfig[e]},t.prototype.getTrustArcCookieName=function(e){if(e)return this.trustArcCookieCategoryConfig[e]},t.prototype.handleCookieArea=function(){var e=this,t=this.commonService.getSiteSettings("gdpr");this.doNotHide||this.toggleBodyClass(),t&&!this.cookieValue&&this.setGdprCookie(!0),setTimeout(function(){e.setCookieBodyHeight()},0),window.addEventListener("resize",function(){e.setCookieBodyHeight()}),this.addModalPopup()},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.setCookieBodyHeight=function(e){var t=this;if(this.showCookiePopup){var i=document.querySelector(".ph-header"),o=document.querySelector("body"),n=document.querySelector(c),a=document.querySelector('[as-element^="ph-cvd"][placement="header"] .ph-sticky-header'),r=document.querySelector(d);for(this.element.contains(r)&&(r=void 0);i&&n;)if(i&&i.firstElementChild&&window.getComputedStyle(i).position,!(i=i.firstElementChild)){var s=a&&a.offsetHeight||0,l=n&&n.offsetHeight;"bottom"==this.position?(o.style.paddingBottom=l+"px",n&&(n.style.bottom=0),n&&(n.style.top="auto")):(o.style.paddingTop=s+l+"px",n&&(n.style.top=s+"px"),r&&(r.style.top=s+l+"px",r.style.marginTop="0px")),r&&!e&&setTimeout(function(){t.setCookieBodyHeight(!0)},5e3)}}else window.removeEventListener("resize",function(){t.setCookieBodyHeight()})},t.prototype.addModalPopup=function(){var t=this;this.element.querySelector(".ph-a11y-modal-area")&&setTimeout(function(){var i=t.element.querySelector(".ph-a11y-popup-start-focus");t.closePopupCallback(i,"ph-a11y-modal-area"),e.prototype.openDialogPopup.call(t,"ph-a11y-modal-area",document.body,i)},0)},t.prototype.closePopupCallback=function(t,i){var o=this;document.addEventListener("keyup",function(t){"Escape"!=t.key&&27!==t.keyCode&&27!==t.which||e.prototype.closeDialogPopup.call(o)})},t.prototype.removeCookieBodyHeight=function(){var e=document.querySelector("body"),t=document.querySelector(c),i=document.querySelector('[as-element^="ph-cvd"][placement="header"] .ph-sticky-header'),o=document.querySelector(d),n=document.querySelector(".header-layout .pcs-sticky-header");if(i||t.offsetHeight)if("bottom"==this.position)e.style.paddingBottom=t.offsetHeight+"px";else{var a=e.style.paddingTop;a=parseInt(a)-t.offsetHeight+"px",e.style.paddingTop=a,i&&(i.style.top="0px"),o&&(o.style.top=e.style.paddingTop)}else e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),o&&(o.style.top="0px",n&&(n.style.top="0px"),o.style.marginTop=null)},t.prototype.setCookie=function(e,t){var i=new Date;i.setTime(i.getTime()+7776e6);var o={expires:i,path:"/",secure:!0},n=this.commonService.getSiteSettings("gdpr");n&&n.parentDomainCookie&&(n.parentDomain?o.domain=n.parentDomain:o.domain=this.getParentDomain(".com")),this.cookieManager.set(e||"PHPPPE_GCC",t||this.cookieValue,o)},t.prototype.getParentDomain=function(e){var t=window.location.hostname.indexOf(".");return t<window.location.hostname.indexOf(".com")?window.location.hostname.substring(-1==t?0:t+1):window.location.hostname},t.prototype.setGdprCookie=function(e){var t=this,i=!!this.cookieValue;e?"tentative"==this.cookieType?this.cookieValue?this.cookieValue="a":this.doNotHide?(this.cookieValue="d",this.isAccepted=!1,this.commonService.removeRecomContentFromLocalStorage()):this.cookieValue="u":"sticky"!=this.cookieType||i?this.cookieValue="a":(this.doNotHide&&(this.isAccepted=!1),this.cookieValue="s"):this.cookieValue="d",this.setCookie(),(!e||i&&"u"!=this.cookieValue)&&setTimeout(function(){t.eventAggregator.publish("close_cookie_popup",{cookieValue:t.cookieValue})},1e3),e&&"s"!=this.cookieValue||this.commonService.removeRecomContentFromLocalStorage();var o={},n=e?"cookies_allow_click":"cookies_decline_click";this.commonService.processTrackingEvent(n,void 0,o),this.raiseGdprActionEvent()},t.prototype.acceptAndClose=function(){this.setGdprCookie(!0),this.showCookiePopup=!1,this.setCookieAction(!0),this.raiseActionEvent("ph:gdpr:consent:closed"),this.commonService.setIsGdprConsentClosed&&this.commonService.setIsGdprConsentClosed(!0)},t.prototype.declineAndClose=function(){this.setGdprCookie(!1),this.showCookiePopup=!1,this.setCookieAction(!0),this.raiseActionEvent("ph:gdpr:consent:closed"),this.commonService.setIsGdprConsentClosed&&this.commonService.setIsGdprConsentClosed(!0)},t.prototype.raiseGdprActionEvent=function(){"d"==this.cookieValue?this.raiseActionEvent("ph:gdpr:cookie:declined"):"a"==this.cookieValue&&this.raiseActionEvent("ph:gdpr:cookie:accepted")},t.prototype.raiseActionEvent=function(e,t){var i=new CustomEvent(e,{bubbles:!0,detail:t||{}});document.dispatchEvent(i)},t.prototype.setCookieAction=function(t){this.toggleBodyClass(),this.removeCookieBodyHeight(),e.prototype.hideContainer.call(this)},t.prototype.toggleBodyClass=function(){var e=this.showCookiePopup,t=document.querySelector("body");t&&(e?t.classList.contains(f[this.position])||(t.className=t.className+" "+f[this.position]):t.className=t.className.replace(f[this.position],""))},t.prototype.triggerPiiConsentPopup=function(){var t=this;this.piiCosentPopup=!0,setTimeout(function(){var i=t.element.querySelector(".ph-a11y-allow-consent");e.prototype.openDialogPopup.call(t,"ph-a11y-modal-dialog-area",document.body,i,void 0,!0)},100)},t.prototype.acceptConsent=function(){this.piiCosentPopup=!1,e.prototype.closeDialogPopup.call(this),this.setCookie("PHPPPE_PC","a")},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"doNotHide",void 0),t=__decorate([i.customElement(r),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(g=void 0!==o.CommonService&&o.CommonService)&&g||Object,a.CookiePopupService,"function"==typeof(m=void 0!==o.CookieManager&&o.CookieManager)&&m||Object,n.EventAggregator,"function"==typeof(y=void 0!==o.LocalStorageContext&&o.LocalStorageContext)&&y||Object])],t);var g,m,y}(o.PhenomWidget);t.CookiePopup=g}),define("text!v2/ph-cookie-popup.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-job-details-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"jobDetail",ddoKeyJobVisibility:"jobVisibility",ddoKeyRegisteredEmail:"registeredEmail",ddoKeyValidateToken:"validateToken",ddoKeyCategoryContent:"categoryContentV2",ddoKeyAdd:"addToCartV2",ddoKeyDelete:"deleteFromCartV2",ddoKeyStatus:"getJobStatus",ddoKeyStatusList:"getJobStatusListV2",ddoKeyMasterDatav2:"categoryMasterDataV2",ddoKeyGetJobViewCount:"getJobViewCount",ddoKeyJobWidgets:"jobwidgetsettings",ddoKeyDynamicJDContent:"dynamicJDContent",ddoKeyATSProfileUrl:"atsProfileURL",ddoKeyIsUserApplied:"isUserApplied",ddoKeygetArchivedData:"getJobsData",imCofigurationsddokey:"getIMConfigurations",ddoKeySmartJobTags:"smartJobTags",ddoKeyFetchFitScore:"fetchFitScore",ddoKeyJobTagsSettings:"jobTagSettings",ddoKeyFitScoreSettings:"fitScoreSettings",ddoKeyJobCartCount:"jobCartCountV2",jobImageBasedOnTags:"jobImageBasedOnTags",ddoKeyHvhishvhjob:"hvhishvhjob",getAppliedJobs:"getAppliedJobs",ddoKeyUploadCvMergeFlow:"uploadCvMergeFlow",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeyMergedProfileV2:"mergedProfileV2"}}});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-job-details-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.jobDetails=function(e,t,i){var o=this.commonService.getSiteType();return this.commonService.getDDO(e,t,i).then(function(e){return"internal"==o&&e&&e.validateJwtToken&&e.validateJwtToken.data&&"ALUMNI"==e.validateJwtToken.data.userProfileType&&e.jobDetail.data&&e.jobDetail.data.job&&(e.jobDetail.data.job.userProfileType="ALUMNI"),e.jobDetail.data&&e.jobDetail.data.job})},e.prototype.jobVisibility=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return{_totalHits:e.jobVisibility.totalHits}})},e.prototype.isRegisteredEmail=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e.prototype.validateToken=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e.prototype.getCategoryContent=function(e,t){return this.commonService.getDDO(e,t,{}).then(function(e){return e.categoryContentV2.data})},e.prototype.makeDDORequest=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e?e[t]:{}})},e.prototype.getCategoryMasterData=function(e,t){return this.commonService.getDDO(e,t,{}).then(function(e){return e[t].data})},e.prototype.isUserApplied=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e.prototype.archivedData=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e.prototype.getImconfigurations=function(e,t,i){return this.commonService.getDDO(e,t,{}).then(function(e){return e[t]&&e[t].data&&e[t].data.imTenant?e[t].data:e[t]})},e.prototype.jobCartCount=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.JobDetailsService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(n,a){function r(e){try{l(o.next(e))}catch(e){a(e)}}function s(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(r,s)}l((o=o.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return o([e,t])}}function o(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(r=a[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,a,r,s,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};define("v1/ph-job-details",["require","exports","aurelia-framework","ph-common","./ph-job-details-config","./ph-job-details-service","aurelia-event-aggregator"],function(e,t,i,o,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="ph-job-details-v1",l="none",c=function(e){function t(t,i,o,n,a,r,c,p){var d=e.call(this,t,i,s)||this;return d.element=t,d.commonService=i,d.jobDetailsService=o,d.eventAggregator=n,d.localStorage=a,d.cookieManager=r,d.geoLocationService=c,d.phenomAppManager=p,d.bulkcart=!1,d.isPopupRequired=!1,d.isRecommendHeroImg=!1,d.videoKey="youtube_url",d.showTitle=!1,d.jobDetail={jobSeqNo:""},d.jobNotFound=!1,d.isNewJob=!0,d.isMultiLocation=!1,d.showBackToSearchResults=!1,d.showAlertPopup=!1,d.isUndoDone=!1,d.mapUtilityObject={},d.showReferrals=!1,d.isAtsProfileClient=!1,d.showEmailPopup=!1,d.errors={},d.externalApplyUtmTrackerHasErrors=!1,d.externalApplyUtmTrackerErrors={},d.applyJobModel={},d.btsUrl="",d.showCategoryImg=!1,d.subscribers=[],d.eventTag="",d.enableTeamDetails=!1,d.isMasterData=!1,d.showMultiLocation=!1,d.showMultiCategory=!1,d.questionnaireMode=l,d.referralId="",d.showReferView=!1,d.showQuestionnaireView=!1,d.jobSeqNo="",d.videoData={},d.addSummaryBorderClass=!1,d.jobFields=[],d.jobActions=[],d.jobTags=[],d.deviceType=d.commonService.getDeviceType(),d.jobFitsSettConfig={},d.jobTagsConfig={},d.jobFits={},d.enabledFields={},d.enabledActions={},d.enabledTags={},d.enabledFits={},d.jobTagsData={},d.jobViewCount=0,d.siteViewType="",d.recommendDynamicImage=!1,d.wait="visible-hidden",d.subscriptions=[],d.jobAdded=!1,d.jobRemoved=!1,d.userAppliedState=null,d.mode="",d.imagePopUp=!1,d.isPopUpUrlAvailable=!1,d.displayVideo=!0,d.jobFitPromise=!1,d.applyParams=[],d.linkCopied=!1,d.jobCartCount=0,d.isMobileDevice=!1,d.externalApplyUtmTrackerEnabled=!1,d.emailQueryParam="email",d.applyOnNewTab=!1,d.utmCookiesAvailable=!1,d.userEmail=null,d.disableFilters=!1,d.isServicesDown=!1,d.recomImageConfig={},d.contentRecomImgUrls=[],d.isRefferEnable=!1,d.isAlumniUser=!1,d.isImFitScore=!1,d.openApplyPageInNewTab={externalApply:"_blank",internalApply:"_self"},d.appliedJobs=[],d.getNextAndPrevJobDetails=function(){d.nextAndPrevJobDetails=d.commonService.getNextAndPrevJobData(d.jobDetail.jobSeqNo)||{}},d.setReferralId=function(e){d.referralId=e},d.handleEscapeForExternalApply=function(e){"Escape"!=e.key&&27!==e.keyCode&&27!==e.which||(d.jobDetail.toggleEmailOpen&&d.closeContinueToApplyPopup(void 0),d.jobDetail.toggleBottomOpen&&d.closeContinueToApplyPopup("bottom"))},d.handleMouseClickForExternalApply=function(e){d.jobDetail.toggleEmailOpen&&d.closeContinueToApplyPopup(void 0),d.jobDetail.toggleBottomOpen&&d.closeContinueToApplyPopup("bottom")},d}return __extends(t,e),t.prototype.getModulerConfig=function(){var t=this;this.stickHeaderFunForIM();try{var i=this.commonService.getSiteSettings("imApplyParams");i&&i.length&&(this.applyParams=i),this.applyParams=JSON.parse(this.element.getAttribute("apply-params"))||this.applyParams}catch(e){o.logger.error(e)}this.jobDetailsService.getImconfigurations(s,n.WidgetConfig.v1.imCofigurationsddokey,"moduleConfig").then(function(i){var o=i.moduleConfig,n=i.moduleSpecificSettings,a=[];o&&o.modules&&(a=o.modules.filter(function(e){return e.value}));var r=a.findIndex(function(e){return"referrals"==e.key});if(t.isRefferEnable=-1!=r,n&&n.referrals&&("boolean"!=typeof n.referrals.allowCreateReferral||n.referrals.allowCreateReferral||(t.isRefferEnable=!1)),n&&n.jobs){if(n.jobs.hidePostingDate?t.toggleJobPostingDate(["#stickyHeaderBlock .duration-block","#jobInfoWrapper .duration-block"],"hide"):t.toggleJobPostingDate(["#stickyHeaderBlock .duration-block","#jobInfoWrapper .duration-block"],"show"),n.jobs.openApplyPageInNewTab){var s=n.jobs.openApplyPageInNewTab;t.openApplyPageInNewTab.externalApply=s.externalApply?"_blank":"_self",t.openApplyPageInNewTab.internalApply=s.internalApply?"_blank":"_self"}}else t.toggleJobPostingDate(["#stickyHeaderBlock .duration-block","#jobInfoWrapper .duration-block"],"show");e.prototype.hideLoader.call(t)},function(e){console.info(e),new Error(e)})},t.prototype.toggleJobPostingDate=function(e,t){var i=this;e.forEach(function(e){var o=i.element.querySelector(e);o&&("hide"===t?o.classList.add("hide"):o.classList.contains("hide")&&o.classList.remove("hide"))})},t.prototype.stickHeaderFunForIM=function(){window.onscroll=function(){var e=document.querySelector(".sticky-block"),t=document.getElementById("jobHeaderActionsDesktop");if(document.querySelectorAll(".ph-sticky-header"),t&&e){var i=t.getBoundingClientRect().bottom-60,o=document.querySelector(".showing-following-widget");if(i<=0&&o){e.classList.add("sticky-block-fixed");var n=document.querySelectorAll(".ph-sticky-header"),a=0;n&&n.length&&(n&&n.forEach(function(e){a+=e&&e.offsetHeight}),e.style.top=a+"px");var r=document.querySelector(".sticky-block").offsetHeight;o.style.paddingTop=r+"px"}else if(o){e.classList.remove("sticky-block-fixed");var s=window.getComputedStyle(document.querySelector(".showing-following-widget")).getPropertyValue("padding-bottom");o.style.paddingTop=s}}var l=document.getElementById("mobileFixedBottomHeader"),c=document.getElementById("stickyHeaderBlock")
;return c&&l&&(c.getBoundingClientRect().bottom<=0?l.classList.add("mobile-fixed-bottom-header"):l.classList.remove("mobile-fixed-bottom-header")),!0}},t.prototype.checkAlumniUser=function(){var e=this;this.jobDetailsService.validateToken(s,n.WidgetConfig.v1.ddoKeyValidateToken).then(function(t){t&&"ALUMNI"==t.userProfileType&&(e.isAlumniUser=!0)})},t.prototype.isVisibleAction=function(e,t){return this.jobDetail&&"ALUMNI"==this.jobDetail.userProfileType?(["External","Internal/External"].findIndex(function(e){return e===t}),!0):-1!==e.findIndex(function(e){return e===t})},t.prototype.checkSbts=function(){var e=(this.commonService.getSessionParam("selected_fields"),this.commonService.getSessionParam("pageName")),t=this.commonService.getSessionParam("pageType"),i=this.commonService.getSessionParam("referer"),o=this.commonService.getSessionParam("keywords"),n=this.commonService.getSessionParam("from"),a="",r=["/search-results","/c/"],s=!1,l=this.commonService.getSiteSettings("eagerLoadSearch"),c=this.commonService.getSessionParam("jdsource"),p=this.commonService.getSessionParam("triggerSpellCheck");if(l){i&&-1!=i.indexOf("?")&&(i=i.substring(0,i.indexOf("?")));for(var d=0;d<r.length;d++)if(i&&-1!=i.indexOf(r[d])){s=!0;break}i&&i.length>0&&s&&(void 0!=o&&(a+="keywords="+o+"&",void 0!=p&&(a+="triggerSpellCheck="+p+"&")),n&&n.length?(n=parseInt(n),a+=n<=0?"s=1":"from="+n+"&s=1"):a="s=1",a.length&&(this.btsUrl=i+"?"+a),this.showBackToSearchResults=!0)}else"search-results"!=e&&"category"!=t&&"featuredOpportunities"!=t&&"businessUnit"!=t&&"landingPage"!=t||(this.showBackToSearchResults=!0,this.btsUrl=i,void 0!=i&&i.length>0&&-1==i.indexOf("?s=")&&-1==i.indexOf("&s=")&&(this.btsUrl+=-1!=i.indexOf("?")?"&s=1":"?s=1"));if(void 0!=c&&"facets"==c){if(this.showBackToSearchResults=!0,this.btsUrl=i,i&&i.length>0){var f="";void 0!=o&&(f+="keywords="+o,void 0!=p&&(f+="&triggerSpellCheck="+p)),a.length&&(this.btsUrl=i+"?"+f)}void 0!=i&&i.length>0&&-1==i.indexOf("?s=")&&-1==i.indexOf("&s=")&&(this.btsUrl+=-1!=this.btsUrl.indexOf("?")?"&s=1":"?s=1")}else this.showBackToSearchResults=!1;if(n&&(n.length||n>0)&&this.btsUrl&&(n=parseInt(n))>0)try{var h=new URL(this.btsUrl),u=h.searchParams;u.get("from")?(u.set("from",n),this.btsUrl=h.href):this.btsUrl+=-1!=this.btsUrl.indexOf("?")?"&from="+n:"?from="+n}catch(e){}},t.prototype.created=function(){var t=this;e.prototype.unhideLoader.call(this),this.checkSbts(),this.getGeoLocationData(),this.siteViewType=this.commonService.getSiteType(),"internal"==this.siteViewType&&this.checkAlumniUser();var i={},o=this.getJobSeqNo();if(i.pageName="job",i.jobSeqNo=o,i.isEagerLoad=!0,this.jobSeqNo=o,"e"==e.prototype.getQueryParam.call(this,"vt")&&(i.siteType="external"),i.siteType=this.siteViewType,this.commonService.getSiteSettings("disableJobFilters")){i.disableFilters=!0;var a;this.jobDetailsService.jobVisibility(s,n.WidgetConfig.v1.ddoKeyJobVisibility,i).then(function(e){a=e._totalHits||0,i.disableFilters=!1,t.getJobDetails(i,a)})}else this.getJobDetails(i);document.addEventListener("ph:ex:recruiterApplyBotLoaded",function(e){t.isRecruiterApplyBotLoaded=!0,t.jobDetail.isRecruiterApplyBotLoaded=!0})},t.prototype.fetchSmartHighlights=function(){if(this.enabledFields.hasOwnProperty("pjfSmartHighlights")&&this.jobDetail&&null!=this.jobDetail.ml_job_parser&&null!=this.jobDetail.ml_job_parser.ml_job_cards){var e=this.jobDetail.ml_job_parser.ml_job_cards,t=[];for(var i in e)t.push(i);this.jobDetail.smartHighlightsKeys=t,this.jobDetail.smartHighlights=e}},t.prototype.fetchJobImages=function(){var e=this;if(this.enabledFields.hasOwnProperty("pjfJobImages")){var t,i=this.enabledFields.pjfJobImages,o=i.settings&&i.settings.jobTagValue||"category",n={jobField:o,tags:[],jobWidget:s,imageType:"jobImage"};return this.jobDetail.hasOwnProperty(o)&&!n.tags.includes("jobImage#"+this.jobDetail[o])&&n.tags.push("jobImage#"+this.jobDetail[o]),this.commonService.getDDO(s,"jobImageBasedOnTags",n).then(function(i){if(t=i&&i.jobImageBasedOnTags&&i.jobImageBasedOnTags.data||{},t.hasOwnProperty("jobImage#"+e.jobDetail[o])){var n=t["jobImage#"+e.jobDetail[o]];e.jobDetail.image=n&&n.length>0&&n[0]&&n[0]}})}},t.prototype.fetchJobBadges=function(){var e=this;if(this.enabledFields.hasOwnProperty("pjfJobBadges")){var t,i=this.enabledFields.pjfJobBadges,o=i.settings&&i.settings.jobTagValue||"company",n=this.getJobFieldMapper(o)||o,a={jobField:n,tags:[],jobWidget:s,imageType:"jobBadge"};return this.jobDetail.hasOwnProperty(n)&&!a.tags.includes("jobBadge#"+this.jobDetail[n])&&a.tags.push("jobBadge#"+this.jobDetail[n]),this.commonService.getDDO(s,"jobImageBasedOnTags",a).then(function(i){if(t=i&&i.jobImageBasedOnTags&&i.jobImageBasedOnTags.data||{},t.hasOwnProperty("jobBadge#"+e.jobDetail[n])){var o=t["jobBadge#"+e.jobDetail[n]];e.jobDetail.badgeImage=o&&o.length>0&&o[0]&&o[0]}})}},t.prototype.getJobFieldMapper=function(e){switch(e){case"companyLogo":return"companyName";case"countryFlag":return"country";case"categoryIcon":return"category";case"default":return e}},t.prototype.getGeoLocationData=function(){var e=this,t=this.commonService.getLocalStorageContext("userLocation")||"";t?(t=JSON.parse(t),this.geoLongitude=t.longitude,this.geoLatitude=t.latitude):this.subscriptions.push(this.eventAggregator.subscribe("GeoLocationDetails",function(t){o.logger.debug("payload location ::"+t),e.geoLongitude=t.coords.longitude,e.geoLatitude=t.coords.latitude}))},t.prototype.constructMapUtilityData=function(){this.mapUtilityObject.multi_location=this.jobDetail.multi_location||[],this.jobDetail&&(!this.jobDetail.multi_location||this.jobDetail.multi_location.length<=1)&&(this.mapUtilityObject.multi_location=[this.jobDetail])},t.prototype.getArchivedData=function(t,i){var o=this;t.jobId=t.jobSeqNo,t.siteType=window.phApp.siteType,e.prototype.unhideLoader.call(this),this.jobDetailsService.archivedData(s,n.WidgetConfig.v1.ddoKeygetArchivedData,t).then(function(t){if(200==t.status){var i=t.data;if("none"===i.siteType){var n=o.commonService.getBaseUrl();i.jobStatus,i.reqType,i.jobId,window.location.assign(n)}else e.prototype.hideLoader.call(o),o.jobDetail=i}else{var n=o.commonService.getBaseUrl();"internal"!==o.commonService.getSiteType()&&(n+="404"),window.location.assign(n)}})},t.prototype.getJobDetails=function(t,i){var o=this;this.jobDetailsService.jobDetails(s,n.WidgetConfig.v1.ddoKey,t).then(function(a){if(e.prototype.hideLoader.call(o),a&&a.jobSeqNo){var r=o.commonService.getCachedDDO(n.WidgetConfig.v1.ddoKey),l=o.commonService.getParam("isJobPageViewRaised");if(o.commonService.setPageState("exists"),o.eventAggregator.publish("updateJob",JSON.parse(JSON.stringify(a))),!l&&!r)try{var c=o.commonService.getQueryParam("referrerToken"),p={trait5:a.jobSeqNo,trait14:a.category,trait282:a.jobId};c&&(p.trait281=c),o.commonService.processTrackingEvent("job_details_view",void 0,p),o.commonService.setParam("isJobPageViewRaised",!0)}catch(e){console.log(e.message)}if(o.bulkcart&&!o.commonService.isCrawlerUserAgent()){var d=[];a.isJobSaved=null,a.saveJobInterState=null,a.inProgress=!1,d.push(a.jobSeqNo);var f={jobSeqNos:d};o.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyStatusList,f).then(function(t){if(e.prototype.hideLoader.call(o),t&&t.data){var i=t.data;a.isJobSaved=i[a.jobSeqNo]||!1,a.saveJobInterState=i[a.jobSeqNo]||!1}})}a.teamName=o.jobDetail.teamName;var h=new Date(a.postedDate),u=new Date,g=u-h;g=Math.round(g/864e5),a.durationDays=g,o.jobDetail=a,"internal"==o.commonService.getSiteType()&&(o.appliedOnDetails=o.appliedJobs.find(function(e){return e.jobId===o.jobDetail.jobId})),o.phenomAppManager.setDDOToCache(n.WidgetConfig.v1.ddoKey,{data:{job:a}}),o.fetchVideoId(),o.constructMapUtilityData(),i&&(o.jobDetail._totalHits=i),e.prototype.raiseEvent.call(o,"JOB_DETAIL_OBJECT",o.jobDetail),o.getNextAndPrevJobDetails();var m=o.commonService.getSiteSettings("referer");m&&(o.jobDetail.referer=m),"true"==o.addSummaryBorderClass&&o.addSummaryBorderClassAction(),o.fetchJobBannerUrl(),o.fetchRecommendedImageUrl(a),o.enableJobViewCount&&o.fetchJobViewCount(),o.fetchRecommendedImages(),o.jobDetail.isRecruiterApplyBotLoaded&&(o.isRecruiterApplyBotLoaded=!0)}else"archive"===o.mode?o.getArchivedData(t,i):(o.jobNotFound=!0,o.commonService.setPageState("expired"));o.commonService.isCrawlerUserAgent()||(o.fetchJobWidgetSettings(),o.jobFitSettingsPromise=o.fetchFitScoreConfig(),o.jobTagSettingsPromise=o.fetchJobTagsConfig(),o.fetchJobFitWeightage())})},t.prototype.fetchVideoId=function(){var e=this.jobDetail[this.videoKey];if(e){var t="";e=e.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/watch\/)/)||e.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/),void 0!==e[2]?(t=e[2].split(/[^0-9a-z_\-]/i),t=t[0]):t=e,this.jobDetail.youtubeVideoId=t,this.jobDetail.videoId=t}},t.prototype.fetchJobBannerUrl=function(){var t=this;this.showCategoryImg&&!this.isMasterData?(e.prototype.unhideLoader.call(this),this.jobDetailsService.getCategoryContent(s,n.WidgetConfig.v1.ddoKeyCategoryContent).then(function(i){var o=t.jobDetail.internalCategoryId;o&&i&&i[o]&&i[o].images&&i[o].images.bannerImage&&(t.bannerImageUrl=i[o].images.bannerImage||""),e.prototype.hideLoader.call(t)})):this.isMasterData&&(e.prototype.unhideLoader.call(this),this.jobDetailsService.getCategoryMasterData(s,n.WidgetConfig.v1.ddoKeyMasterDatav2).then(function(i){var o=t.jobDetail.internalCategoryId;if(o&&i&&i.categories&&i.categories.length){var n=i.categories,a=n.find(function(e){return e.categoryInternalId==o});a&&(t.bannerImageUrl=a.banner_image,t.videoData=a.video||{},t.videoData.coverImage?t.videoCoverImage=t.videoData.coverImage:t.videoCoverImage=t.bannerImageUrl)}e.prototype.hideLoader.call(t)}))},t.prototype.fetchRecommendedImageUrl=function(e){var t=this;this.commonService.isCrawlerUserAgent()||!this.isRecommendation()?(this.recommendDynamicImage=!1,this.removeVisibleHidden()):this.isRecommendHeroImg&&setTimeout(function(){var i=t.element.querySelector("#defaultHeroImage");i?i.complete?t.getRecommendedBannerImage(i,e):i.addEventListener("load",function(o){t.getRecommendedBannerImage(i,e)}):t.removeVisibleHidden()},100)},t.prototype.getRecommendedBannerImage=function(e,t){var i=this,o=e.width,a=e.height,r=o/a,l=this.getBannerFontColor(),c={jobSeqNo:t.jobSeqNo,minWidth:o,aspectRatio:r,count:1,fontColor:l,type:"banner_img"};this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyDynamicJDContent,c).then(function(e){if(i.removeVisibleHidden(),"object"==typeof e&&e.status&&"success"==e.status&&e.data){var t=e.data[0];t&&t.url&&t.url.length&&i.checkAspectRatio(t,r)}})},t.prototype.checkAspectRatio=function(e,t){var i=e.url;if(e.width&&e.height){var o=e.width/e.height;Math.abs(t-o)<2&&(this.dynamicHeroImageUrl=i,this.recommendDynamicImage=!0)}else this.dynamicHeroImageUrl=i,this.recommendDynamicImage=!0},t.prototype.removeVisibleHidden=function(){var e=this;setTimeout(function(){var t=e.element.querySelector("#defaultHeroImage");t&&t.classList.remove("visible-hidden")},100)},t.prototype.getBannerFontColor=function(){var e="",t=document.querySelector(".job-title");return t&&(e=window.getComputedStyle(t).color),e},t.prototype.attached=function(){var t=this;e.prototype.attached.call(this);var i=this.element.getAttribute("show-title");if(this.showTitle="true"==i,"internal"==this.commonService.getSiteType()){setTimeout(function(){t.toggleJobPostingDate(["#stickyHeaderBlock .duration-block","#jobInfoWrapper .duration-block"],"hide")},100),this.isImFitScore=this.commonService.getSiteSettings("isImFitScore"),this.isMobileDevice=window.innerWidth<768;try{this.getModulerConfig()}catch(e){console.log(e.message)}this.getIMAppliedJobs()}this.enableTeamDetails&&this.subscribers.push(this.eventAggregator.subscribe("teamName",function(e){t.jobDetail.teamName=e})),"archive"===this.mode&&this.isJobApplied(),document.addEventListener("keyup",function(e){"Escape"!=e.key&&27!==e.keyCode&&27!==e.which||t.imagePopUp&&t.closePopUp()}),this.isAtsProfileClient?this.getATSProfile():this.showReferrals=!0,this.isExternalApplyUtmTrackerEnabled()},t.prototype.detached=function(){this.subscribers.forEach(function(e){e.dispose()})},t.prototype.fetchJobWidgetSettings=function(){var e=this,t={},i=void 0,o=void 0;this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyJobWidgets,{}).then(function(n){n=n||{},n&&n.data&&(n=n.data,n.widgets&&n.widgets[s]&&(t=n.widgets[s],i=t.fields,o=t.actions),e.jobFields=i||n.fields||[],e.jobActions=o||n.actions||[]),e.getJobFields(),e.getJobActions()})},t.prototype.fetchFitScoreConfig=function(){var e=this,t=this.commonService.getSiteSettings("navItems");if(t&&t.fitScore){var i={},o={},a=void 0,r={feature:"fitScore",fieldMap:{fieldName:"jobFits",finalFieldName:"jobWidgetFits"},avoidWidgetHideOnFail:!0};return this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyFitScoreSettings,r).then(function(t){i=t&&t.data&&t.data.jobWidgetFits,i&&(e.jobFitsSettConfig=i.settings||{},i.widgets&&i.widgets[s]&&(o=i.widgets[s],a=o.jobFits),e.jobFits=a||i.jobFits||{}),e.getJobFits()})}return new Promise(function(e,t){e({enabled:!1})})},t.prototype.fetchJobTagsConfig=function(){var e=this,t=this.commonService.getSiteSettings("navItems");if(t&&t.jobTags){var i={},o={},a=void 0,r={feature:"jobTags",fieldMap:{fieldName:"jobTags",finalFieldName:"jobWidgetTags"},avoidWidgetHideOnFail:!0};return this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyJobTagsSettings,r).then(function(t){i=t&&t.data&&t.data.jobWidgetTags,i&&(i.widgets&&i.widgets[s]&&(o=i.widgets[s],a=o.jobTags),e.jobTagsConfig=a||i.jobTags||{}),e.getJobTags()})}return new Promise(function(e,t){e({enabled:!1})})},t.prototype.getJobFields=function(){var e=this;try{this.jobFields=JSON.parse(this.element.getAttribute("job-fields"))||this.jobFields}catch(e){o.logger.error(e)}if(this.jobFields.forEach(function(t){e.enabledFields[t.name]=t}),this.jobFields.length&&this.enabledFields.hasOwnProperty("drivingTime"))if(this.geoLongitude&&this.geoLatitude)this.getJobFieldDrivingTime(this.geoLongitude,this.geoLatitude);else{var t=function(t){e.geoLongitude=t&&t.coords&&t.coords.longitude,e.geoLatitude=t&&t.coords&&t.coords.latitude,e.geoLongitude&&e.geoLatitude&&e.getJobFieldDrivingTime(e.geoLongitude,e.geoLatitude)},i=this.geoLocationService.askForLocation();i?t(i):this.geoLocationService.getGeoLocation().then(function(e){t(e)})}this.fetchSmartHighlights(),this.fetchJobBadges(),this.fetchJobImages()},t.prototype.getJobFieldDrivingTime=function(t,i){var o=this,n=this.commonService.getSiteSettings("maps"),a=n?n.mapbox||{}:{},r=a&&a.apiKey;if(r&&!window.mapboxSdk){var s=this.commonService.getPlatformAssetsBaseUrl(),l=s+"mapbox-sdk.js";e.prototype.loadScript.call(this,l,function(){o.mapboxClient=window.mapboxSdk({accessToken:r}),o.mapboxClient&&o.checkForDuplicateCoordinates(t,i)},["mapboxSdk"])}else r&&(this.mapboxClient=window.mapboxSdk({accessToken:r}),this.mapboxClient&&this.checkForDuplicateCoordinates(t,i))},t.prototype.checkForDuplicateCoordinates=function(e,t){if(this.jobDetail.multi_location_array&&this.jobDetail.multi_location_array.length>1)for(var i=this.jobDetail.multi_location_array,o=0;o<i.length;o++){var n=i[o].latlong;n&&n.lat&&n.lon&&this.makeReqForDrivingTimeToMapBox(e,t,n.lon,n.lat,o)}else{var n=this.jobDetail.latlong||this.jobDetail.multi_location_array&&this.jobDetail.multi_location_array[0]&&this.jobDetail.multi_location_array[0].latlong;this.makeReqForDrivingTimeToMapBox(e,t,n.lon,n.lat)}},t.prototype.makeReqForDrivingTimeToMapBox=function(e,t,i,n,a){var r=this;return new Promise(function(s,l){r.mapboxClient.directions.getDirections({profile:"driving-traffic",waypoints:[{coordinates:[e,t],approach:"unrestricted"},{coordinates:[i,n]}]}).send().then(function(e){s(e);var t=e.body&&e.body.routes&&e.body.routes[0]&&e.body.routes[0].duration;if(t){t=Number(t);var i={};i.inHours=Math.floor(t/3600),i.inMinutes=Math.floor(t%3600/60),i.inHours||i.inMinutes||(i.inMinutes=5),a||0==a?r.jobDetail.multi_location_array[a].drivingTime=i||{}:r.jobDetail.drivingTime=i||{}}else if(0==t){var i={};i.inMinutes=5,a||0==a?r.jobDetail.multi_location_array[a].drivingTime=i:r.jobDetail.drivingTime=i}else a||0==a?r.jobDetail.multi_location_array[a].drivingTime={}:r.jobDetail.drivingTime={}},function(e){a||0==a?r.jobDetail.multi_location_array[a].drivingTime={}:r.jobDetail.drivingTime={},o.logger.debug(e),l()})})},t.prototype.getJobActions=function(){var e=this;try{this.jobActions=JSON.parse(this.element.getAttribute("job-actions"))||this.jobActions}catch(e){o.logger.error(e)}this.jobActions.forEach(function(t){e.enabledActions[t.name]=t})},t.prototype.getJobTags=function(){var e=this;try{this.jobTagsConfig=JSON.parse(this.element.getAttribute("job-tags"))||this.jobTagsConfig||{}}catch(e){o.logger.error(e)}this.jobTagsConfig.tags=this.jobTagsConfig.tags||[],this.jobTags=this.jobTagsConfig.tags,this.jobTags.forEach(function(t){e.enabledTags[t.name]=t})},t.prototype.getJobFits=function(){var e=this;try{this.jobFits=JSON.parse(this.element.getAttribute("job-fits"))||this.jobFits||{}}catch(e){o.logger.error(e)}this.jobFits.fits=this.jobFits.fits||[],this.jobFits.fits.forEach(function(t){e.enabledFits[t.name]=t})},t.prototype.fetchJobFitWeightage=function(){var e=this,t=this.jobDetail.jobSeqNo,i={jobSeqNo:[t],requiredTags:[],size:1,avoidWidgetHideOnFail:!0,isEagerLoad:!0},o={jobIdentifierList:[t],outputFields:[],size:1,avoidWidgetHideOnFail:!0,isEagerLoad:!0};this.jobTagSettingsPromise.then(function(t){t&&!t.enabled||(i.tagLimit=e.jobTagsConfig.layout&&e.jobTagsConfig.layout.maxDisplayCount||1,e.fetchJobTags(i))}),this.jobFitSettingsPromise.then(function(t){t&&!t.enabled||e.fetchFitScore(o)})},t.prototype.fetchJobTags=function(e){var t=this;this.jobTags&&this.jobTags.length&&(this.jobTags.forEach(function(t){e.requiredTags.push(t.name)}),this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeySmartJobTags,e).then(function(e){if(e&&e.data&&e.data.jobTags){var i=e.data.jobTags;for(var o in i)!function(e){i[e].length&&i[e].forEach(function(i){t.jobTagsData[e]=t.jobTagsData[e]||{},t.jobTagsData[e][i.tag]=i})}(o)}}))},t.prototype.fetchFitScore=function(e){var t=this,i=this.jobDetail.jobSeqNo;this.jobFits&&this.jobFits.fits&&this.jobFits.fits.length&&this.jobFitsSettConfig.allowedWidgets&&-1!=this.jobFitsSettConfig.allowedWidgets.indexOf(s)?(this.jobFits&&this.jobFits.requiredFields&&this.jobFits.requiredFields.length&&this.jobFits.requiredFields.forEach(function(t){e.outputFields.push(t)}),this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyFetchFitScore,e).then(function(e){e&&e.data&&e.data.jobFitScores&&(e=e.data.jobFitScores,t.jobDetail.fitLevel=e[i].data.fitLevel,e[i].data.skillGap&&(t.jobDetail.matchingSkills=e[i].data.skillGap),t.jobFitPromise=!0)})):this.jobFitPromise=!0},t.prototype.handleSaveJob=function(e){var t=document.querySelector('[id="jobCountSrOnly"]');if(t&&t.removeAttribute("aria-hidden"),this.bulkcart)if(e.inProgress=!0,e.saveJobInterState){if(this.deleteJobFromCart(e),this.isPopupRequired){this.showAlertPopup=!0,this.isUndoDone=!0;var i=this;setTimeout(function(){i.showAlertPopup=!1},3e3)}}else{if(this.isPopupRequired){this.showAlertPopup=!0,this.isUndoDone=!1;var i=this;setTimeout(function(){i.showAlertPopup=!1},4e3)}this.addToJobCart(e)}},t.prototype.addToJobCart=function(t){var i=this,o={jobSeqNo:t.jobSeqNo};this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyAdd,o).then(function(o){if(t.inProgress=!1,"602"==o.status){var a={jobSeqNo:t.jobSeqNo,category:t.category};t.saveJobInterState=!0,i.eventAggregator.publish("jobCartCount","+1"),i.eventAggregator.publish("jobCartUpdatedCount",""),i.commonService.raiseCustomEvent&&i.commonService.raiseCustomEvent("ph:ex:jobCartUpdatedCount",""),e.prototype.trackWidgetClick.call(i,"job_added_to_jobcart",a),i.jobDetailsService.jobCartCount(s,n.WidgetConfig.v1.ddoKeyJobCartCount,{}).then(function(e){i.jobCartCount=e.result,i.jobAdded=!0,i.jobRemoved=!1}),setTimeout(function(){i.jobAdded=!1,i.jobRemoved=!1},0),setTimeout(function(){var e=document.querySelector('[id="jobCountSrOnly"]');e&&e.setAttribute("aria-hidden","true")},1e3)}else t.isJobSaved=!1,t.saveJobInterState=!1})},t.prototype.deleteJobFromCart=function(t){var i=this,o={jobSeqNo:t.jobSeqNo};this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyDelete,o).then(function(o){if(t.inProgress=!1,"605"==o.status){t.saveJobInterState=!1,i.eventAggregator.publish("jobCartCount","-1"),i.eventAggregator.publish("jobCartUpdatedCount",""),i.commonService.raiseCustomEvent&&i.commonService.raiseCustomEvent("ph:ex:jobCartUpdatedCount","");var a={jobSeqNo:t.jobSeqNo,category:t.category};e.prototype.trackWidgetClick.call(i,"job_unfavorited",a),document.querySelector('[id="jobCountSrOnly"]').removeAttribute("aria-hidden"),i.jobDetailsService.jobCartCount(s,n.WidgetConfig.v1.ddoKeyJobCartCount,{}).then(function(e){i.jobCartCount=e.result,i.jobRemoved=!0,i.jobAdded=!1}),setTimeout(function(){i.jobRemoved=!1,i.jobAdded=!1},0),setTimeout(function(){document.querySelector('[id="jobCountSrOnly"]').setAttribute("aria-hidden","true")},1e3)}else t.isJobSaved=!0,t.saveJobInterState=!0})},t.prototype.openEmailPopup=function(){var t=this;if("internal"==this.siteViewType){var i={};i.trait5=this.jobDetail.jobSeqNo,i.trait14=this.jobDetail.category,this.commonService.processTrackingEvent("apply_click",void 0,i),window.location=this.commonService.getBaseUrl()+"apply?jobSeqNo="+this.jobDetail.jobSeqNo+"&applyType=internalApply"}else this.jobDetailsService.validateToken(s,n.WidgetConfig.v1.ddoKeyValidateToken).then(function(i){i&&i.access_token&&(t.isUserLoggedIn=!0,t.email=i.user_name||"");var o={};if(o.trait5=t.jobDetail.jobSeqNo,o.trait14=t.jobDetail.category,t.commonService.processTrackingEvent("apply_click",void 0,o),t.isUserLoggedIn){var n=e.prototype.getQueryParam.call(t,"referrerToken");window.location=t.commonService.getBaseUrl()+"apply?jobSeqNo="+t.jobDetail.jobSeqNo+"&loginType=apply"+(n?"&referrerToken="+n:"")}else{t.showEmailPopup=!t.showEmailPopup,""!=t.applyJobModel.email||t.showEmailPopup||(t.errors.email.error=!1);var a=t.element.querySelector("#applyalertcontent"),r=t.element.querySelector("#apply-email1"),s=t.element.querySelector(".quick-apply-btn");a&&e.prototype.openDialogPopup.call(t,a,s,r)}})},t.prototype.closePopup=function(){e.prototype.closeDialogPopup.call(this)},t.prototype.redirectToApplyPage=function(e,t){var i=window.phApp.recommendedTrackingConfig.job;if(i)try{var o=i.ddoKeysToStore[0]||"jobSeqNo",n=i.maxKeysToStore||4,a=this.commonService.getLocale(),r=a.split("_"),s=r[1],l=s+"_"+a+"_"+i.storageKey,c=this.localStorage.getItem(l);c&&(c=c.filter(function(e){if(e)return e[o]!=t})),c||(this.localStorage.setItem(l,[]),c=this.localStorage.getItem(l));var p={};i.ddoKeysToStore.forEach(function(e){p[e]=t,p.timeStamp=(new Date).toUTCString()}),c.unshift(p),c.length>n&&(c.length=n),this.localStorage.setItem(l,c)}catch(e){console.log(e.message)}var d=this.commonService.getBaseUrl()+e+"?jobSeqNo="+t;window.location.assign(d)},t.prototype.isRegisteredEmail=function(){var t=this,i=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(this.errors.email={},this.applyJobModel.email?i.test(this.applyJobModel.email)?(this.hasErrors=!1,this.errors.email.error=!1,e.prototype.unhideLoader.call(this)):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E102"):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E101"),!this.hasErrors||this.isUserLoggedIn){this.applyJobModel.jobSeqNo=this.jobDetail.jobSeqNo,this.applyJobModel.userName=this.applyJobModel.email;var o=e.prototype.getQueryParams.call(this),a=[];a=o.split("&");for(var r in a)if(a.hasOwnProperty(r)){var l=r.split("=")[0],c=r.split("=")[1];this.applyJobModel[l]=c}this.jobDetailsService.isRegisteredEmail(s,n.WidgetConfig.v1.ddoKeyRegisteredEmail,this.applyJobModel).then(function(i){var o={};o.trait27=t.applyJobModel.userName,o.trait5=t.jobDetail.jobSeqNo,o.trait14=t.jobDetail.category,t.commonService.processTrackingEvent("apply_email_submit_click",void 0,o);var n=i.redirectURL;"/"==n.charAt(0)&&(n=n.substring(1));var a=e.prototype.getQueryParam.call(t,"referrerToken");a&&(n=-1==n.indexOf("?")?n+"?referrerToken="+a:n+="&referrerToken="+a),window.location=t.commonService.getBaseUrl()+n})}else{var p=this.element.querySelector("#apply-email1");p&&this.errors.email.error&&p.focus()}},t.prototype.btsClick=function(){return this.localStorage.setItem("btsClick","true"),!0},t.prototype.isExternalApplyUtmTrackerEnabled=function(){try{var e=this.commonService.getSiteSettings("externalApplyUtmTracker");e&&(e.externalApplyUtmTracker&&(this.externalApplyUtmTrackerEnabled=e.externalApplyUtmTracker),e.applyOnNewTab&&(this.applyOnNewTab=e.applyOnNewTab),e.emailQueryParam&&(this.emailQueryParam=e.emailQueryParam)),this.applyOnNewTab||(this.applyOnNewTab=this.commonService.getSiteSettings("applyOnNewTab")),this.externalApplyUtmTrackerEnabled&&this.getLoginUserEmail()}catch(e){o.logger.error(e),this.externalApplyUtmTrackerEnabled=!1}},t.prototype.getLoginUserEmail=function(){var e=this,t={};this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyValidateJwtToken,t).then(function(i){i&&i.data&&i.data.userId&&e.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyMergedProfileV2,t).then(function(t){t&&t.email&&(e.userEmail=t.email)})})},t.prototype.externalApplyUtmTracker=function(e){var t=this;if(this.externalApplyUtmTrackerEnabled){if(this.isValidEmailForUtmTrack(this.userEmail,void 0)){var i={flowType:"find_your_fit",invoker:"externalApplyUtmTracker",externalApplyUtmTracker:!0,jobId:this.jobDetail.jobId,jobSeqNo:this.jobDetail.jobSeqNo,jobData:{jobId:this.jobDetail.jobId,jobSeqNo:this.jobDetail.jobSeqNo,jobLocation:this.jobDetail.location,jobCategory:this.jobDetail.category,jobTitle:this.jobDetail.title},profile:{email:this.userEmail}};this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyUploadCvMergeFlow,i).then(function(i){var o=e;t.jobDetail.externalApply&&t.jobDetail.applyUrl&&(o=t.jobDetail.applyUrl),t.navigateToApplyPage(t.applyUrl(o))})}}else this.navigateToApplyPage(this.applyUrl(e))},t.prototype.navigateToApplyPage=function(e){this.applyOnNewTab?window.open(e,"_target"):window.location.href=e},t.prototype.externalApplyUtmTrackerOnEnter=function(e,t){e&&13==e.keyCode&&this.externalApplyUtmTracker(t)},t.prototype.isUtmInformationPresentInUrl=function(){var e=!1,t=window.location.href;if(t&&-1!=t.indexOf("?")){var i=t.split("?")[1];if(i)for(var o=i.split("&"),n=0;n<o.length;n++){var a=o[n];if(-1!=a.indexOf("utm_")){e=!0;break}}}return e},t.prototype.isUtmInformationPresentInCookies=function(){var e=!1,t=document.cookie;if(t)for(var i=t.split(";"),o=0;o<i.length;o++){for(var n=i[o];n.startsWith(" ");)n=n.substring(1);if(n.startsWith("utm_")){e=!0;break}}return e},t.prototype.isValidEmailForUtmTrack=function(e,t){if(t&&9==t.keyCode&&!this.userEmail)return!0;var i=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(e?i.test(e)?this.externalApplyUtmTrackerHasErrors=!1:(this.externalApplyUtmTrackerHasErrors=!0,this.externalApplyUtmTrackerErrors.email="E102",this.externalApplyUtmTrackerErrors.consent=""):(this.externalApplyUtmTrackerHasErrors=!0,this.externalApplyUtmTrackerErrors.email="E101",this.externalApplyUtmTrackerErrors.consent=""),this.externalApplyUtmTrackerHasErrors){var o=this.element.querySelector(".ph-a11y-apply-box");o&&o.focus()}return!this.externalApplyUtmTrackerHasErrors},t.prototype.applyUrl=function(t){if(this.jobDetail.isChatBotApply)return this.commonService.raiseCustomEvent("ph:ex:recruiterApplyBot",{}),e.prototype.trackWidgetClick.call(this,"chat_Bot_Apply",{jobSeqNo:this.jobDetail.jobSeqNo}),!1;if(t){var i=t,o=e.prototype.getQueryParams.call(this);o&&o.length&&(i+=-1!=i.indexOf("?")?"&":"?",i+=o),i=-1==t.indexOf("http")?this.commonService.getBaseUrl()+i:i;var n=this.cookieManager.get("ext_trk");if(this.jobDetail.hasOwnProperty("externalTracking")&&("true"==this.jobDetail.externalTracking||1==this.jobDetail.externalTracking)&&n&&(i+=-1!=i.indexOf("?")?"&":"?",i+=n),this.externalApplyUtmTrackerEnabled&&this.userEmail&&(i+=-1!=i.indexOf("?")?"&":"?",i+=this.emailQueryParam+"="+this.userEmail),this.commonService.getSiteSettings("isHvhishvhjobApply")){var a=this.commonService.getRawUrl("forwardApply");a&&(i=i.replace("apply?",a+"?"))}return i}},t.prototype.imScreeningApply=function(){return!this.jobDetail.isChatBotApply||(this.commonService.raiseCustomEvent("ph:ex:recruiterApplyBot",{}),e.prototype.trackWidgetClick.call(this,"chat_Bot_Apply",{jobSeqNo:this.jobDetail.jobSeqNo}),!1)},t.prototype.imApplyUrl=function(){var t=this;if(this.jobDetail.isChatBotApply)return this.commonService.raiseCustomEvent("ph:ex:recruiterApplyBot",{}),e.prototype.trackWidgetClick.call(this,"chat_Bot_Apply",{jobSeqNo:this.jobDetail.jobSeqNo}),"javascript:void(0)";if("internal"==this.siteViewType){var i=this.commonService.getBaseUrl()+"apply?jobSeqNo="+this.jobDetail.jobSeqNo,o="",n=!1;if(this.applyParams&&this.applyParams.length){var a=i;this.jobDetail.hasOwnProperty("imExternalApply")&&(a=this.jobDetail.imExternalApply?this.jobDetail.imApplyUrl:i),this.applyParams.forEach(function(e){-1==a.indexOf(e.key)&&e.isFromJob&&e.value&&e.value.length&&t.jobDetail[e.value]?o+=o&&o.length?"&"+e.key+"="+t.jobDetail[e.value]:e.key+"="+t.jobDetail[e.value]:-1==a.indexOf(e.key)&&!e.isFromJob&&e.value&&e.value.length&&(o+=o&&o.length?"&"+e.key+"="+e.value:e.key+"="+e.value),e.isEncode&&(n=e.isEncode)})}return this.jobDetail.hasOwnProperty("imExternalApply")&&this.jobDetail.imExternalApply?(o&&o.length&&(o=-1==this.jobDetail.imApplyUrl.indexOf("?")?"?"+o:"&"+o,this.jobDetail.imApplyUrl=n?this.jobDetail.imApplyUrl+encodeURIComponent(o):this.jobDetail.imApplyUrl+o),this.jobDetail.imApplyUrl):(o&&o.length&&(o=-1==i.indexOf("?")?"?"+o:"&"+o,i+=o),i)}},t.prototype.openReferPopup=function(){var e={};e.jobSeqNo=this.jobDetail.jobSeqNo,e.category=this.jobDetail.category,e.jobId=this.jobDetail.jobId,this.eventAggregator.publish(this.eventTag+"prefillData",e)},t.prototype.getJobSeqNo=function(){var e=this.commonService.getBaseUrl().length,t=window.location.href.slice(e),i=t.split("/"),o=this.commonService.getRawUrl("job"),n=o.split("/"),a=n.findIndex(function(e){return":jobSeqNo"===e||":jobId"===e});if(-1!==a){1==i.length&&(a=0);var r=-1!=i[a].indexOf("?")?i[a].split("?")[0]:i[a];return decodeURIComponent(r)}},t.prototype.handleReferJob=function(e){this.referJob=JSON.parse(JSON.stringify(this.jobDetail)),this.questionnaireMode==l?(document.body.classList.add("modal-open"),this.showReferView=!this.showReferView,this.showReferView||this.closeRefer()):"first"==this.questionnaireMode?e?"ph-questionnaire"==e?(this.showReferView=!0,this.showQuestionnaireView=!1):this.closeRefer():(document.body.classList.add("modal-open"),this.showReferView=!1,this.showQuestionnaireView=!0):"last"==this.questionnaireMode&&(e?"ph-refer-friend"==e?(this.showReferView=!1,this.showQuestionnaireView=!0):this.closeRefer():(document.body.classList.add("modal-open"),this.showReferView=!0,this.showQuestionnaireView=!1))},t.prototype.closeRefer=function(){this.showReferView=!1,this.showQuestionnaireView=!1,document.body.classList.remove("modal-open"),this.referralId=""},t.prototype.addSummaryBorderClassAction=function(){var e=this;setTimeout(function(){var t=e.element.querySelector(".summary-col");if(t&&t.childElementCount){var i=t.offsetWidth,o=t.children[0].offsetWidth,n=Math.round(i/o),a=t.childElementCount,r=a-1;do{t.children[r].classList.add("no-border"),r--}while((r+1)%n!=0)}},250)},t.prototype.fetchJobViewCount=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,o;return __generator(this,function(a){switch(a.label){
case 0:return e=n.WidgetConfig.v1.ddoKeyGetJobViewCount,t=new Date,t.setDate(t.getDate()-7),i={jobId:this.jobDetail.jobId,from:t.getTime()},[4,this.jobDetailsService.makeDDORequest(s,e,i)];case 1:return o=a.sent(),o&&"success"==o.status&&o.data&&o.data.viewCount?(this.jobViewCount=o.data.viewCount,this.jobViewCount>100&&(this.jobViewCount-=this.jobViewCount%10)):this.jobViewCount=0,[2]}})})},t.prototype.openMultiLocationModal=function(){var t=this;this.showMultiLocation=!0,setTimeout(function(){var i=t.element.querySelector(".multi-location-popup"),o=t.element.querySelector(".ph-a11y-multi-location"),n=t.element.querySelector(".ph-a11y-close-multi-location");i&&o&&n&&e.prototype.openDialogPopup.call(t,"multi-location-popup",o,n)},50);var i={jobSeqNo:this.jobDetail.jobSeqNo,category:this.jobDetail.category};e.prototype.trackWidgetClick.call(this,"multi_location_click",i)},t.prototype.closeMultiLocationModal=function(){this.showMultiLocation=!1,e.prototype.closeDialogPopup.call(this);var t={jobSeqNo:this.jobDetail.jobSeqNo};e.prototype.trackWidgetClick.call(this,"popup_close_click",t)},t.prototype.openMultiCategoryModal=function(){var t=this;this.showMultiCategory=!0,setTimeout(function(){var i=t.element.querySelector(".multi-category-popup"),o=t.element.querySelector(".ph-a11y-multi-category"),n=t.element.querySelector(".ph-a11y-close-multi-category");i&&o&&n&&e.prototype.openDialogPopup.call(t,"multi-category-popup",o,n)},50);var i={jobSeqNo:this.jobDetail.jobSeqNo,category:this.jobDetail.category};e.prototype.trackWidgetClick.call(this,"multi_category_click",i)},t.prototype.closeMultiCategoryModal=function(){this.showMultiCategory=!1,e.prototype.closeDialogPopup.call(this);var t={jobSeqNo:this.jobDetail.jobSeqNo};e.prototype.trackWidgetClick.call(this,"popup_close_click",t)},t.prototype.fetchRecommendedImages=function(){var e=this;this.commonService.isCrawlerUserAgent()||!this.isRecommendation()||this.jobDetail.franchiseeId?this.removeVisibleHidden():this.recomImageConfig&&this.recomImageConfig.isRecommendedImagesReq&&setTimeout(function(){var t={};if(e.recomImageConfig)if("banner_img"==e.recomImageConfig.type){var i=e.element.querySelector("#defaultHeroImage");i&&(i.onload=function(){e.updateBannerImageDimensions(i),t=e.getRecomImgsPayload(),e.setContentImageUrls(t)},i.complete&&i.onload())}else t=e.getRecomImgsPayload(),e.setContentImageUrls(t)},100)},t.prototype.updateBannerImageDimensions=function(e){this.recomImageConfig&&(this.recomImageConfig.minWidth=e.width,this.recomImageConfig.height=e.height,this.recomImageConfig.aspectRatio=this.recomImageConfig.minWidth/this.recomImageConfig.height,this.recomImageConfig.fontColor=this.getBannerFontColor())},t.prototype.setContentImageUrls=function(e){var t=this;e.strictFilters.mappingId||"award_img"==this.recomImageConfig.type||"logo_img"==this.recomImageConfig.type?this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyDynamicJDContent,e).then(function(i){i&&"success"==i.status&&i.data?"workplace_img"==t.recomImageConfig.type?t.getWorkPlaceImages(e,i.data):t.contentRecomImgUrls=i.data:t.removeVisibleHidden()}):"banner_img"==this.recomImageConfig.type&&this.removeVisibleHidden()},t.prototype.getRecomImgsPayload=function(){this.jobDetail&&this.jobDetail.jobSeqNo&&(this.recomImageConfig.jobSeqNo=this.jobDetail.jobSeqNo);var e=this.recomImageConfig,t={},i=[];if("award_img"==this.recomImageConfig.type)i.push(this.jobDetail.country),t.location=i;else if("logo_img"==this.recomImageConfig.type){var o=[];o.push(this.jobDetail.brand),t.brand=o}else if(this.jobDetail.locabbrev){var n=[];n.push(this.jobDetail.locabbrev),t.mappingId=n}return t&&(e.strictFilters=t),e.imagesOnly=!0,e},t.prototype.openPopUp=function(t,i){this.activeSlide=i,this.imagePopUp=!0;var o=i+1,n=this.element.querySelector(".container .workplaceImages:nth-child("+o+") a"),a=this.element.querySelector(".modal");e.prototype.openDialogPopup.call(this,"modal",n,a)},t.prototype.openContinueToApplyPopup=function(t){if(this.externalApplyUtmTrackerEnabled)if(t?this.jobDetail.toggleBottomOpen=!this.jobDetail.toggleBottomOpen:this.jobDetail.toggleEmailOpen=!this.jobDetail.toggleEmailOpen,"mobile"==this.deviceType){var i=this.element.querySelector(".ph-a11y-apply"),o=this.element.querySelector(".ph-a11y-continue-apply"),n="ph-apply-email-validator";t&&(n+="-bottom"),e.prototype.openDialogPopup.call(this,n,i,o,void 0,!1,!0),setTimeout(function(){i&&i.removeAttribute("aria-expanded")},1e3)}else{if(this.addEventListenersForContinueToApply(),t){var a=this.element.querySelector(".ph-apply-email-validator-bottom");a&&a.focus()}else if(this.jobDetail.toggleEmailOpen){var a=this.element.querySelector(".ph-apply-email-validator");a&&a.focus()}this.jobDetail.toggleEmailOpen||this.jobDetail.toggleBottomOpen||this.removeEventListenersForContinueToApply()}else this.jobDetail.externalApply?this.navigateToApplyPage(this.applyUrl(this.jobDetail.applyUrl)):this.navigateToApplyPage(this.applyUrl("apply?jobSeqNo="+this.jobDetail.jobSeqNo))},t.prototype.addEventListenersForContinueToApply=function(){"desktop"==this.deviceType&&document.addEventListener("keyup",this.handleEscapeForExternalApply)},t.prototype.removeEventListenersForContinueToApply=function(){"desktop"==this.deviceType&&document.removeEventListener("keyup",this.handleEscapeForExternalApply)},t.prototype.openContinueToApplyOnEnter=function(e,t){e&&13==e.keyCode&&this.openContinueToApplyPopup(t)},t.prototype.closeContinueToApplyPopup=function(t){t?this.jobDetail.toggleBottomOpen=!1:this.jobDetail.toggleEmailOpen=!1,this.removeEventListenersForContinueToApply(),e.prototype.closeDialogPopup.call(this)},t.prototype.closeContinueToApplyPopupOnEsc=function(e,t){e&&27==e.keyCode&&this.closeContinueToApplyPopup(t)},t.prototype.closePopUp=function(){this.imagePopUp=!1,this.activeSlide=void 0,e.prototype.closeDialogPopup.call(this)},t.prototype.getWorkPlaceImages=function(e,t){var i,o=[],n=e.minWidth,a=e.aspectRatio;i=1==a?n:n/a;for(var r=e.popUpWidth,s=e.popUpHeight,l=!1,c=0;c<t.length;c++){var p={};if(p.croppedImageUrl=t[c].croppedImageUrl,p.sourceImageUrl=t[c].sourceImageUrl,p.alt_text=t[c].alt_text,p.url=this.getRequiredImageDimension(n,i,t[c].url),p.popUpImageUrl=this.getRequiredImageDimension(r,s,t[c].url),!p.popUpImageUrl){var d=this.getSortedUrls(t[c].url);p.popUpImageUrl=this.getNearSizeImage(r,d)}p.url?o.push(p):l=!0}l||(this.contentRecomImgUrls=o)},t.prototype.getRequiredImageDimension=function(e,t,i){var o=void 0,n=(i||[]).filter(function(i){return i.width==e&&i.height==t});return n&&n[0]&&(o=n[0].url),o},t.prototype.getSortedUrls=function(e){return e.sort(function(e,t){return e.width-t.width})},t.prototype.getNearSizeImage=function(e,t){for(var i=void 0,o=1;o<t.length;o++)if(e<=t[o].width&&e>=t[o-1].width){i=t[o-1].url;break}return i||(i=t[t.length-1].url),i},t.prototype.getATSProfile=function(){var e=this;this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.ddoKeyATSProfileUrl,{}).then(function(t){t&&t.division&&"External"!=t.division&&(e.showReferrals=!0)})},t.prototype.isJobApplied=function(){var e=this;this.jobDetailsService.isUserApplied(s,n.WidgetConfig.v1.ddoKeyIsUserApplied,{jobId:1!=this.jobSeqNo.indexOf("?")?this.jobSeqNo.split("?")[0]:this.jobSeqNo}).then(function(t){e.userAppliedState=t.status||200})},t.prototype.isRecommendation=function(){return!!(this.recomImageConfig&&this.recomImageConfig.isRecommendedImagesReq||this.isRecommendHeroImg)},t.prototype.copyLink=function(){var t=this,i=document.createElement("input"),o=window.location.href;document.body.appendChild(i),i.value=o,i.select(),document.execCommand("copy"),document.body.removeChild(i),this.linkCopied=!0,setTimeout(function(){t.linkCopied=!1,e.prototype.focusElement.call(t,".job-share-copylink",50)},2e3)},t.prototype.handleBlur=function(e){if(e&&e.target){var t=this.element.querySelector(".share-options");t&&(t.contains(e.relatedTarget)?this.jobDetail.toggleOpen=!0:this.jobDetail.toggleOpen=!1)}},t.prototype.getIMAppliedJobs=function(){var e=this;this.jobDetailsService.makeDDORequest(s,n.WidgetConfig.v1.getAppliedJobs,{}).then(function(t){t&&t.data&&t.data.jobDetails&&(e.appliedJobs=t.data.jobDetails||[],e.appliedOnDetails=e.appliedJobs.find(function(t){return t.jobId===e.jobDetail.jobId}))})},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"bulkcart",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"isPopupRequired",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"isRecommendHeroImg",void 0),__decorate([i.bindable(),__metadata("design:type",String)],t.prototype,"recommendedImgDimension",void 0),__decorate([i.bindable(),__metadata("design:type",String)],t.prototype,"defaultRecommendedImg",void 0),__decorate([i.bindable(),__metadata("design:type",String)],t.prototype,"videoKey",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"isAtsProfileClient",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"showCategoryImg",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"eventTag",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"enableTeamDetails",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"isMasterData",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"questionnaireMode",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"addSummaryBorderClass",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"enableJobViewCount",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"userAppliedState",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"mode",void 0),__decorate([i.bindable,__metadata("design:type",Number)],t.prototype,"activeSlide",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"isPopUpUrlAvailable",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"disableFilters",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],t.prototype,"recomImageConfig",void 0),t=__decorate([i.customElement(s),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(c=void 0!==o.CommonService&&o.CommonService)&&c||Object,a.JobDetailsService,r.EventAggregator,"function"==typeof(p=void 0!==o.LocalStorageAPI&&o.LocalStorageAPI)&&p||Object,"function"==typeof(d=void 0!==o.CookieManager&&o.CookieManager)&&d||Object,"function"==typeof(f=void 0!==o.GeoLocationService&&o.GeoLocationService)&&f||Object,"function"==typeof(h=void 0!==o.PhenomAppManager&&o.PhenomAppManager)&&h||Object])],t);var c,p,d,f,h}(o.PhenomWidget);t.JobDetails=c}),define("text!v1/ph-job-details.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/email-job-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.email="",this.name="",this.jobSeqNo="",this.siteType="external",this.referrerToken="",this.templateSiteType=""}return e}();t.EmailJobModel=i}),define("v1/ph-email-job-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"emailjob",jobDetailDDOKey:"jobDetail",ddoKeyShareDetails:"getSocialSharingDetails"}}});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-email-job-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.emailThisJob=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e})},e.prototype.getSocialUrls=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.EmailJobService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-email-job",["require","exports","aurelia-framework","ph-common","./ph-email-job-config","./ph-email-job-service","./email-job-model"],function(e,t,i,o,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="ph-email-job-v1",l=function(e){function t(t,i,o,n){var a=e.call(this,t,i,s)||this;return a.element=t,a.commonService=i,a.emailJobService=o,a.emailJobModel=n,a.isPopupReqd=!1,a.isErrorMsgReqd=!1,a.replaceJobSeqNo=!1,a.disableName=!1,a.siteTypeExternal=!1,a.showSubTitle=!1,a.isDialog=!1,a.showDialogPopup=!1,a.showErrorMsg=!1,a.errors={},a.emailDomains=[],a.bodyclass="",a.isEmailClientEnabled=!1,a.piiConsentError=!1,a}return __extends(t,e),t.prototype.attached=function(){var t=this;this.isEmailClientEnabled=this.commonService.getSiteSettings("isNativeEmailClient"),this.isEmailClientEnabled||(e.prototype.attached.call(this),e.prototype.hideLoader.call(this),this.getPiiConsentData(),e.prototype.subscribeToEvent.call(this,"show-email-job",function(e){!t.jobSeqNo&&e.jobSeqNo&&(t.jobSeqNo=e.jobSeqNo),t.openEmailDialog()}),e.prototype.subscribeToEvent.call(this,"JOB_DETAIL_OBJECT",function(e){e.visibilityType&&"Internal/External"==e.visibilityType?t.jobSeqNo=e.jobId:e.jobSeqNo&&(t.jobSeqNo=e.jobSeqNo),t.jobId=e.jobId}),e.prototype.subscribeToEvent.call(this,"updateJob",function(i){i.jobSeqNo&&(e.prototype.showContainer.call(t),t.replaceJobSeqNo?t.jobSeqNo=i.jobId:i.jobSeqNo&&(t.jobSeqNo=i.jobSeqNo),t.jobSiteType=i.siteType,t.jobLocation=i.location)}),this.fetchJobSeqNo())},t.prototype.getPiiConsentData=function(){this.piiConsentData=this.commonService.getSiteSettings("piiConsentConfig")},t.prototype.getBodyClass=function(){this.bodyclass=document.body.className},t.prototype.fetchJobSeqNo=function(){if(this.jobSeqNo&&null!=this.jobSeqNo&&this.jobSeqNo.length>0);else{var t=this.commonService.getCachedDDO(n.WidgetConfig.v1.jobDetailDDOKey,s);t&&t.data&&t.data.job&&t.data.job.jobSeqNo?(this.replaceJobSeqNo&&t?this.jobSeqNo=t.data.job.jobId:this.jobSeqNo=t.data.job.jobSeqNo,this.category=t.data.job.category):(e.prototype.hideLoader.call(this),this.handleError(""))}},t.prototype.emailThisJob=function(){var t=this;if("internal"==this.commonService.getSiteType()){var i={jobSeqNo:this.jobSeqNo,jobId:this.jobId,medium:"email-share",campaign:"jobs-share",source:"email",siteType:"external",email:this.emailJobModel.email,jobSiteType:"internal"==this.jobSiteType?"external":this.jobSiteType,jobLocation:this.jobLocation,templateSiteType:this.commonService.getSiteType()};this.emailJobService.getSocialUrls(s,n.WidgetConfig.v1.ddoKeyShareDetails,i).then(function(i){e.prototype.hideLoader.call(t),i&&i.status&&"SUCCESS"==i.status.toUpperCase()&&i.data&&i.data.jdUrl&&(t.emailJobModel.referrerToken=i.data.referrerToken),t.emailJob()},function(i){new Error(i),e.prototype.hideLoader.call(t),t.handleError("")})}else this.emailJob()},t.prototype.hasPiiErrors=function(){var e=this;this.piiConsentError=!1,this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(t){t.optional||t.isChecked||(e.piiConsentError=!0)})},t.prototype.emailJob=function(){var t=this;if(this.hasPiiErrors(),!this.piiConsentError){if(this.jobSeqNo||this.fetchJobSeqNo(),this.emailJobModel.jobSeqNo=this.jobSeqNo,this.emailDomains=this.commonService.getSiteSettings("emailDomains"),this.errors.name={},this.errors.email={},this.disableName&&delete this.emailJobModel.name,this.emailDomains){for(var i=!1,o=0,a=this.emailDomains;o<a.length;o++){var r=a[o];if(this.validateEmail(this.emailJobModel.email,r)){i=!0;break}}this.emailJobModel.name||this.disableName?(this.hasErrors=!1,this.errors.name.error=!1):(this.hasErrors=!0,this.errors.name.code="E101",this.errors.name.error=!0),this.emailJobModel.email?i?(this.hasErrors=!1,this.errors.email.error=!1,e.prototype.unhideLoader.call(this)):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E102"):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E101")}else{var l=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.emailJobModel.name||this.disableName?(this.hasErrors=!1,this.errors.name.error=!1):(this.hasErrors=!0,this.errors.name.code="E101",this.errors.name.error=!0),this.emailJobModel.email?l.test(this.emailJobModel.email)?(this.hasErrors=!1,this.errors.email.error=!1,e.prototype.unhideLoader.call(this)):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E102"):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E101")}(this.errors.name.error||this.errors.email.error)&&(this.hasErrors=!0,e.prototype.hideLoader.call(this)),this.hasErrors?setTimeout(function(){t.errors.name.error?t.element.querySelector(".ph-a11y-form-control-name").focus():!t.errors.name.error&&t.errors.email.error&&t.element.querySelector(".ph-a11y-form-control-email").focus()},50):(this.emailJobModel.templateSiteType=this.commonService.getSiteType(),this.jobSiteType&&("internal"==this.jobSiteType?this.emailJobModel.jobSiteType="external":this.emailJobModel.jobSiteType=this.jobSiteType),this.emailJobModel.jobLocation=this.jobLocation,this.emailJobService.emailThisJob(s,n.WidgetConfig.v1.ddoKey,this.emailJobModel).then(function(i){var o=t.element.querySelectorAll(".feedbackText")[0];if(i&&i.emailjob&&"success"==i.emailjob.status){var n={};n.trait15=t.emailJobModel.name?t.emailJobModel.name:"",n.trait27=t.emailJobModel.email,n.trait5=t.jobSeqNo,n.trait14=t.category,t.commonService.processTrackingEvent("email_job",void 0,n),e.prototype.hideLoader.call(t),t.showEmailSuccess=!0;var a=document.querySelector(".ph-a11y-email-submit"),r=t.element.querySelector(".success-hdlr button");a&&r&&e.prototype.openDialogPopup.call(t,"success-hdlr",a,r),t.emailJobModel.name="",t.emailJobModel.email=""}else{e.prototype.hideLoader.call(t),t.showEmailFailure=!0;var a=document.querySelector(".ph-a11y-email-submit"),r=t.element.querySelector(".failure-hdlr button");a&&r&&e.prototype.openDialogPopup.call(t,"failure-hdlr",a,r)}o&&o.setAttribute("tabindex","0"),setTimeout(function(){o&&o.focus()},50),t.isDialog&&(t.showDialogPopup=!0,t.emailJobModel.name="",t.emailJobModel.email="")},function(e){t.showEmailSuccess=!1,t.showEmailFailure=!1,t.closeEmailDialog()}))}},t.prototype.onBtnBlurHandler=function(e){e.target.setAttribute("tabindex","-1")},t.prototype.validateEmail=function(e,t){var i=e.toLowerCase().match("^(.+)@"+t.toLowerCase()+".com$");if(null==i)return!1;if(null!=i[1]){var o=/^\"?[\w-_\.]*\"?$/;return null!=i[1].match(o)}return!1},t.prototype.detached=function(){e.prototype.hideLoader.call(this)},t.prototype.openEmailDialog=function(){if(this.isPopupReqd){this.showEmailDialog=!0;var t=document.getElementsByClassName("email")[0],i=this.element.querySelectorAll(".form-control")[0];t&&e.prototype.openDialogPopup.call(this,"modal",t,i),this.showEmailSuccess=!1,this.showEmailFailure=!1,this.getBodyClass();var o=this.bodyclass+" overflow-hidden";document.body.className=o}else{var n=document.querySelector('[as-element^="ph-email-job"]');if(n){var a=window.pageYOffset;if(this.commonService.smoothScroll&&"internal"==this.commonService.getSiteType()){var r=this.commonService.getNearestSectionElemOffsetTop(n,"bottom");a<r?this.commonService.smoothScroll(a,r,!0,30):this.commonService.smoothScroll(a,r,!1,30);var s=n.querySelector("input");s&&s.focus()}else{n.scrollIntoView(!1);var l=document.querySelectorAll(".ph-sticky-header"),c=0,p=window.scrollY,d=0;if(l.length){for(var f=0;f<l.length;f++)c+=l[f].offsetHeight;p&&c>window.innerHeight/2&&(d=n.offsetHeight-(window.innerHeight-c),window.scroll(0,p-d))}}}}},t.prototype.closeEmailDialog=function(){if(this.showEmailDialog=!1,this.showEmailSuccess=!1,this.showEmailFailure=!1,e.prototype.closeDialogPopup.call(this),this.errors.name={},this.errors.email={},document.body.classList&&document.body.classList.contains("overflow-hidden")&&document.body.classList.remove("overflow-hidden"),this.shareHandler){this.shareHandler({share:{name:"email"}});var t={jobSeqNo:this.jobSeqNo};e.prototype.trackWidgetClick.call(this,"popup_close_click",t)}var i=this.element.querySelector(".ph-a11y-email-button");i&&i.focus()},t.prototype.closeFeedbackPopup=function(t){e.prototype.closeDialogPopup.call(this),t?this.closeEmailDialog():(this.errors.name={},this.errors.email={},this.errors.senderName={},this.emailJobModel.name="",this.emailJobModel.email="")},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"jobSeqNo",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"jobId",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"category",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"isPopupReqd",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"replaceJobSeqNo",void 0),__decorate([i.bindable(),__metadata("design:type",Function)],t.prototype,"shareHandler",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"disableName",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"siteTypeExternal",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"showSubTitle",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"isDialog",void 0),t=__decorate([i.customElement(s),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(l=void 0!==o.CommonService&&o.CommonService)&&l||Object,a.EmailJobService,r.EmailJobModel])],t);var l}(o.PhenomWidget);t.EmailJob=l}),define("text!v1/ph-email-job.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/base-step-provider",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8},o=function(){function e(e,t,o,n,a,r){var s=this;this.destroy=function(){},this.handleActionOutsideScope=function(e){var t,o=e.target,n=!1;if(e.keyCode===i.RETURN||e.keyCode==i.TAB||void 0==e.keyCode)for(;o;)if(o=o.parentElement,!(t=o&&o.className)||t.constructor!=Array&&t.constructor!=String)o||(n=!0);else if(null==o||-1==t.indexOf("ph-combobox-dropdown-area"))n=!0;else if(t.indexOf("ph-combobox-dropdown-area")>=0){n=!1;break}if(n||e.keyCode==i.ESC){var a=s.element.querySelector(".search-dropdown-list");a&&(a.scrollTop=0),s.handleBlur()}},this.handleKeyup=function(e){var t=e.target;if(t){switch(e.which||e.keyCode){case i.UP:case i.DOWN:case i.RETURN:case i.ESC:return void e.preventDefault();case i.BACKSPACE:if(!t.value)return void s.onBackspace()}s.handleStepKeyup(t)}},this.handleKeydown=function(e){var t=e.target;if(t){switch(e.which||e.keyCode){case i.DOWN:s.moveDown(t);break;case i.UP:s.moveUp(t);break;case i.RETURN:return void s.onEnter(t)}s.handleStepKeydown()}},this.element=e,this.widgetRef=n,this.stepConfig=a,this.elementTag=t,this.version=o,this.a11yAutoComplete=r}return e.prototype.makeDdoRequest=function(e,t,i){return this.widgetRef.makeDdoRequest(e,t,i)},e.prototype.handleFyfActions=function(e,t){this.widgetRef.handleFyfActions(e,t)},e.prototype.fetchAutoCompleteInput=function(e){var t=this;setTimeout(function(){var i=t.element.querySelectorAll(".ph-autocomplete-input-wrapper");if(i)for(var o=0;o<i.length;o++)i[o];t.inputField=t.element.querySelector("[data-ph-autocomplete-input]"),t.inputField&&t.setupEventListeners(t.inputField),e&&e()},300)},e.prototype.setupEventListeners=function(e){},e.prototype.focusToStepBlock=function(){var e=this;setTimeout(function(){var t=e.element.querySelector(".ph-common-slection-area");t&&(t.scrollTop=t.scrollHeight);var i=e.element.querySelector(".ph-a11y-fyf-step-block");if(i)return i.focus(),i.setActive&&i.setActive(),document.activeElement===i},500)},e.prototype.focusSearch=function(){var e=this;this.widgetRef.showFocus=!0,setTimeout(function(){e.inputField&&e.inputField.focus()},150)},e.prototype.addSelectionRemovalSronly=function(e){var t=this;this.widgetRef.selectionRemovalSrText=e,this.widgetRef.selectionRemovalSronly=!0,setTimeout(function(){t.widgetRef.selectionRemovalSronly=!1},100)},e}();t.BaseStepProvider=o}),define("v1/ph-find-your-fit-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeyStepConfig:"fyfConfig",ddokeyStepPosition:"",ddoKeyProfileData:"mergedProfileV2",ddoKeyCiProfileUpdate:"ciProfileUpdate",ddoKeyFreshProfileCreation:"uploadCvMergeFlow",ddoKeyCategories:"categories",ddoKeyMasterDataV2:"categoryMasterDataV2",ddoKeyRecentTitles:"fyfTitles",ddoKeySkills:"fyfSkills",ddoKeySkillSuggestions:"fyfSkillSuggestions",ddoKeyworkExperience:"",ddoKeyLocations:"fyfLocations",ddoKeyPreferredLocations:"ddoKeyPreferredLocations",ddoKeyContactInfo:"ddoKeyContactInfo",ddoKeySubCategories:"subCategories",ddoKeyGetPiiConsentConfig:"getPiiConsentConfig",ddoKeySendVerificationEmail:"sendVerificationEmail",ddoKeyResendVerificationEmail:"resendVerificationEmail",ddoKeyRemoveValidationDataFromSession:"removeValidationDataFromSession",ddoKeyGetCurrentLocation:"getCurrentLocation",ddoKeyGetResumeData:"getResumeData"}}});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-authorise",["require","exports","./base-step-provider"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.focusToStepBlock.call(this)},t.prototype.handlePrevStep=function(){this.widgetRef.fyfStepConfig.prevStepRef("firstStep")},t}(i.BaseStepProvider);t.FyfStepAuthorise=o});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-category",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){var e=JSON.parse(JSON.stringify(this.widgetRef.fyfStepConfig.profileData.categories||[]));this.widgetRef.fyfStepConfig.categories={},this.widgetRef.fyfStepConfig.categories.selectedCategories=[],this.widgetRef.fyfStepConfig.categories.selectedCategories=e,this.getCategories()},t.prototype.getCategoryMasterData=function(t){var i=this;this.widgetRef.unhideLoader(),this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeyMasterDataV2,{}).then(function(o){o=o.data||{},i.widgetRef.stepData=i.widgetRef.stepData||{},i.widgetRef.stepData.categories=i.mergeMasterCatWithSearchCat(o,t),i.widgetRef.stepData.categories.length?i.widgetRef.noCategories=!1:i.widgetRef.fyfStepConfig.showEmptyCategories?i.widgetRef.noCategories=!0:"next"==i.widgetRef.handleEmptyCatFlow?i.widgetRef.fyfStepConfig.funRef(!1):i.widgetRef.fyfStepConfig.prevStepRef(!1),e.prototype.focusToStepBlock.call(i),i.widgetRef.hideLoader()})},t.prototype.getCategories=function(){var e=this;this.widgetRef.unhideLoader(),this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeyCategories,{}).then(function(t){t&&t.data&&t.data.category&&(e.getCategoryMasterData(t.data.category),e.widgetRef.hideLoader())})},t.prototype.mergeMasterCatWithSearchCat=function(e,t){var i=[],o=[],n=[],a=[];if(this.widgetRef.fyfStepConfig.orderType&&"default"!=this.widgetRef.fyfStepConfig.orderType?"custom"==this.widgetRef.fyfStepConfig.orderType&&(i=e.categories||[],o=t):(i=t,o=e.categories||[]),i.length){var r=void 0,s=void 0,l=void 0,c=void 0,p=void 0;for(s=0;s<i.length;s++)n.push(i[s].internalId);for(l=0;l<o.length;l++)a.push(o[l].internalId);for(c=0;c<n.length;c++)if(i[c].isRemoveEle=!0,-1!=(r=a.indexOf(n[c]))){i[c].isRemoveEle=!1,p=o[r];for(var d in p)(void 0==i[c][d]&&p.hasOwnProperty(d)||p.hasOwnProperty(d)&&!i[c].hasOwnProperty(d))&&(i[c][d]=p[d])}i.length&&i.forEach(function(e){e.key||(e.key=e.category)})}return i||[]},t.prototype.handleActions=function(){var e=!1,t=this.widgetRef.fyfStepConfig.categories.selectedCategories||[],i=this.widgetRef.fyfStepConfig.profileData.categories||[];if(t.length){if(t.length==i.length){for(var o=0;o<t.length;o++)!function(o){var n=t[o];-1==i.findIndex(function(e){return e==n})&&(e=!0)}(o);t=e?t:"unChanged"}}else t=!1,i&&i.length>0&&(t=[]);this.handleFyfActions(t)},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.categories.selectedCategories||"";this.widgetRef.fyfStepConfig.prevStepRef(e)},t}(i.BaseStepProvider);t.FyfStepCategory=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-contactInfo-v1",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){
function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.errors={},t}return __extends(t,e),t.prototype.init=function(){this.widgetRef.fyfStepConfig.contactInfo={},this.widgetRef.fyfStepConfig.contactInfo.information={},this.widgetRef.fyfStepConfig.profileData.lastName?(this.widgetRef.fyfStepConfig.contactInfo.information.firstName=this.widgetRef.fyfStepConfig.profileData.firstName+" "+this.widgetRef.fyfStepConfig.profileData.lastName,this.widgetRef.fyfStepConfig.profileData.lastName=""):this.widgetRef.fyfStepConfig.contactInfo.information.firstName=this.widgetRef.fyfStepConfig.profileData.firstName,this.widgetRef.fyfStepConfig.contactInfo.information.email=this.widgetRef.fyfStepConfig.profileData.email,this.widgetRef.fyfStepConfig.contactInfo.information.phone=this.widgetRef.fyfStepConfig.profileData.phone,this.widgetRef.preferredName&&(this.widgetRef.fyfStepConfig.contactInfo.information.preferredName=this.widgetRef.fyfStepConfig.profileData.preferredName),this.widgetRef.stepData=this.widgetRef.stepData||{},this.widgetRef.stepData.name={},this.widgetRef.preferredName&&(this.widgetRef.stepData.preferredName={}),this.widgetRef.stepData.email={},this.widgetRef.stepData.phone={},this.widgetRef.stepData.name.validField=!1,this.widgetRef.stepData.email.validField=!1,this.widgetRef.stepData.phone.validField=!1,this.widgetRef.piiConsentError=!1,this.widgetRef.fyfStepConfig.contactInfo.information.firstName&&this.nameFieldValidation(),this.widgetRef.preferredName&&this.widgetRef.fyfStepConfig.contactInfo.information.preferredName&&this.preferredNameFieldValidation(),this.widgetRef.fyfStepConfig.contactInfo.information.email&&this.emailFieldValidation(),this.widgetRef.fyfStepConfig.contactInfo.information.phone&&this.phoneFieldValidation(),e.prototype.focusToStepBlock.call(this)},t.prototype.fetchContactInfo=function(){var e=this;this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeyContactInfo,{}).then(function(t){t&&t.data&&(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.contactInfo=t.data)})},t.prototype.handleActions=function(){this.validation()},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.contactInfo.information;this.widgetRef.fyfStepConfig.prevStepRef(e)},t.prototype.fieldValidation=function(e){switch(e){case"name":this.nameFieldValidation();break;case"email":this.emailFieldValidation();break;case"phone":this.phoneFieldValidation();break;case"preferredName":this.preferredNameFieldValidation()}},t.prototype.nameFieldValidation=function(){return this.widgetRef.stepData.name={},this.widgetRef.fyfStepConfig.contactInfo.information.firstName=this.widgetRef.fyfStepConfig.contactInfo.information.firstName?this.widgetRef.fyfStepConfig.contactInfo.information.firstName.trim():"",this.widgetRef.fyfStepConfig.contactInfo.information.firstName?(this.widgetRef.stepData.name.error=!1,this.hasErrors=!1,this.widgetRef.stepData.name.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.name.code="E101",this.widgetRef.stepData.name.error=!0,this.widgetRef.stepData.name.validField=!1),this.hasErrors},t.prototype.preferredNameFieldValidation=function(){return this.widgetRef.stepData.preferredName={},this.widgetRef.fyfStepConfig.contactInfo.information.preferredName?(this.widgetRef.stepData.preferredName.error=!1,this.hasErrors=!1,this.widgetRef.stepData.preferredName.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.preferredName.code="E101",this.widgetRef.stepData.preferredName.error=!0,this.widgetRef.stepData.preferredName.validField=!1),this.hasErrors},t.prototype.emailFieldValidation=function(){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return this.widgetRef.stepData.email={},this.widgetRef.fyfStepConfig.contactInfo.information.email?e.test(this.widgetRef.fyfStepConfig.contactInfo.information.email)?(this.widgetRef.stepData.email.error=!1,this.hasErrors=!1,this.widgetRef.stepData.email.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.email.code="E102",this.widgetRef.stepData.email.error=!0,this.widgetRef.stepData.email.validField=!1):(this.hasErrors=!0,this.widgetRef.stepData.email.code="E101",this.widgetRef.stepData.email.error=!0,this.widgetRef.stepData.email.validField=!1),this.hasErrors},t.prototype.phoneFieldValidation=function(){this.widgetRef.stepData.phone={};var e=/^(\+?[0-9\-\(\) ]+)?$/;if(this.widgetRef.fyfStepConfig.contactInfo.information.phone){var t=this.widgetRef.fyfStepConfig.contactInfo.information.phone,i=this.widgetRef.fyfStepConfig.contactInfo.information.phone.replace(/[^0-9]/g,"");return e.test(t)&&t.length<=20&&i.length>6&&i.length<=13?this.widgetRef.stepData.phone.validField=!0:(this.widgetRef.stepData.phone.code="E101",this.widgetRef.stepData.phone.error=!0,this.hasErrors=!0,this.widgetRef.stepData.phone.validField=!1),this.hasErrors}return!1},t.prototype.termsValidation=function(){return this.widgetRef.termsError=!1,this.widgetRef.piiConsentError=!1,!(!this.widgetRef.gdprConsent||this.widgetRef.acceptTerms||(this.widgetRef.termsError=!0,0))},t.prototype.hasPiiErrors=function(){var e=this;this.widgetRef.piiConsentError=!1,this.widgetRef.termsError=!1;var t=!1;return this.widgetRef.piiConsentData&&this.widgetRef.piiConsentData.length&&this.widgetRef.piiConsentData.forEach(function(i){i.optional||i.isChecked||(e.widgetRef.piiConsentError=!0,t=!0)}),t},t.prototype.validation=function(){var e=!1;this.widgetRef.preferredName&&(e=this.preferredNameFieldValidation());var t=this.nameFieldValidation(),i=this.emailFieldValidation(),o=this.phoneFieldValidation(),n=!1;if(n=this.widgetRef.piiConsentData&&this.widgetRef.piiConsentData.length?this.hasPiiErrors():this.termsValidation(),this.hasErrors=!!(e||t||i||o),n&&!this.hasErrors)return this.hasErrors=!0,void(this.widgetRef.piiConsentContext&&this.widgetRef.piiConsentContext.triggerPopup&&(this.widgetRef.piiConsentContext.triggerPopup(!0),this.widgetRef.trackWidgetClick&&this.widgetRef.trackWidgetClick("pii-popup-trigger",{})));if(this.hasErrors){var a=!1;this.widgetRef.preferredName&&this.widgetRef.stepData.preferredName.error?(this.widgetRef.focusElement(".ph-a11y-form-control-preferred-name",50),a=!0):this.widgetRef.stepData.name.error?(this.widgetRef.focusElement(".ph-a11y-form-control-name",50),a=!0):this.widgetRef.stepData.email.error&&!a?(this.widgetRef.focusElement(".ph-a11y-form-control-email",50),a=!0):this.widgetRef.stepData.phone.error&&!a&&this.widgetRef.focusElement(".ph-a11y-form-control-phone",50)}else this.handleFyfActions(this.widgetRef.fyfStepConfig.contactInfo.information)},t}(i.BaseStepProvider);t.FyfStepContactInfoV1=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-contactInfo",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.errors={},t}return __extends(t,e),t.prototype.init=function(){this.widgetRef.fyfStepConfig.contactInfo={},this.widgetRef.fyfStepConfig.contactInfo.information={},this.widgetRef.acceptTerms=this.widgetRef.fyfStepConfig.profileData&&this.widgetRef.fyfStepConfig.profileData.privacyConsent||!1,this.widgetRef.termsError=!1,this.widgetRef.preferredName&&(this.widgetRef.fyfStepConfig.contactInfo.information.preferredName=this.widgetRef.fyfStepConfig.profileData.preferredName),this.widgetRef.fyfStepConfig.profileData.lastName?(this.widgetRef.fyfStepConfig.contactInfo.information.firstName=this.widgetRef.fyfStepConfig.profileData.firstName+" "+this.widgetRef.fyfStepConfig.profileData.lastName,this.widgetRef.fyfStepConfig.profileData.lastName=""):this.widgetRef.fyfStepConfig.contactInfo.information.firstName=this.widgetRef.fyfStepConfig.profileData.firstName,this.widgetRef.fyfStepConfig.contactInfo.information.email=this.widgetRef.fyfStepConfig.profileData.email,this.widgetRef.fyfStepConfig.contactInfo.information.phone=this.widgetRef.fyfStepConfig.profileData.phone,this.widgetRef.stepData=this.widgetRef.stepData||{},this.widgetRef.preferredName&&(this.widgetRef.stepData.preferredName={}),this.widgetRef.stepData.name={},this.widgetRef.stepData.email={},this.widgetRef.stepData.phone={},this.widgetRef.stepData.name.validField=!1,this.widgetRef.stepData.email.validField=!1,this.widgetRef.stepData.phone.validField=!1,this.widgetRef.piiConsentError=!1,this.widgetRef.preferredName&&this.widgetRef.fyfStepConfig.contactInfo.information.preferredName&&this.preferredNameFieldValidation(),this.widgetRef.fyfStepConfig.contactInfo.information.firstName&&this.nameFieldValidation(),this.widgetRef.fyfStepConfig.contactInfo.information.email&&this.emailFieldValidation(),this.widgetRef.fyfStepConfig.contactInfo.information.phone&&this.phoneFieldValidation(),e.prototype.focusToStepBlock.call(this)},t.prototype.fetchContactInfo=function(){var e=this;this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeyContactInfo,{}).then(function(t){t&&t.data&&(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.contactInfo=t.data)})},t.prototype.handleActions=function(){this.validation()},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.contactInfo.information;this.widgetRef.fyfStepConfig.prevStepRef(e)},t.prototype.fieldValidation=function(e){switch(e){case"preferredName":this.preferredNameFieldValidation();break;case"name":this.nameFieldValidation();break;case"email":this.emailFieldValidation();break;case"phone":this.phoneFieldValidation()}},t.prototype.nameFieldValidation=function(){return this.widgetRef.stepData.name={},this.widgetRef.fyfStepConfig.contactInfo.information.firstName=this.widgetRef.fyfStepConfig.contactInfo.information.firstName?this.widgetRef.fyfStepConfig.contactInfo.information.firstName.trim():"",this.widgetRef.fyfStepConfig.contactInfo.information.firstName?(this.widgetRef.stepData.name.error=!1,this.hasErrors=!1,this.widgetRef.stepData.name.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.name.code="E101",this.widgetRef.stepData.name.error=!0,this.widgetRef.stepData.name.validField=!1),this.hasErrors},t.prototype.preferredNameFieldValidation=function(){return this.widgetRef.stepData.preferredName={},this.widgetRef.fyfStepConfig.contactInfo.information.preferredName?(this.widgetRef.stepData.preferredName.error=!1,this.hasErrors=!1,this.widgetRef.stepData.preferredName.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.preferredName.code="E101",this.widgetRef.stepData.preferredName.error=!0,this.widgetRef.stepData.preferredName.validField=!1),this.hasErrors},t.prototype.emailFieldValidation=function(){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return this.widgetRef.stepData.email={},this.widgetRef.fyfStepConfig.contactInfo.information.email?e.test(this.widgetRef.fyfStepConfig.contactInfo.information.email)?(this.widgetRef.stepData.email.error=!1,this.hasErrors=!1,this.widgetRef.stepData.email.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.email.code="E102",this.widgetRef.stepData.email.error=!0,this.widgetRef.stepData.email.validField=!1):(this.hasErrors=!0,this.widgetRef.stepData.email.code="E101",this.widgetRef.stepData.email.error=!0,this.widgetRef.stepData.email.validField=!1),this.hasErrors},t.prototype.phoneFieldValidation=function(){this.widgetRef.stepData.phone={};var e=/^(\+?[0-9\-\(\) ]+)?$/;if(this.widgetRef.fyfStepConfig.contactInfo.information.phone){var t=this.widgetRef.fyfStepConfig.contactInfo.information.phone,i=this.widgetRef.fyfStepConfig.contactInfo.information.phone.replace(/[^0-9]/g,"");return e.test(t)&&t.length<=20&&i.length>6&&i.length<=13?this.widgetRef.stepData.phone.validField=!0:(this.widgetRef.stepData.phone.code="E101",this.widgetRef.stepData.phone.error=!0,this.hasErrors=!0,this.widgetRef.stepData.phone.validField=!1),this.hasErrors}return!1},t.prototype.termsValidation=function(){return this.widgetRef.termsError=!1,this.widgetRef.piiConsentError=!1,!(!this.widgetRef.gdprConsent||this.widgetRef.acceptTerms||(this.widgetRef.termsError=!0,0))},t.prototype.hasPiiErrors=function(){var e=this;this.widgetRef.piiConsentError=!1,this.widgetRef.termsError=!1;var t=!1;return this.widgetRef.piiConsentData&&this.widgetRef.piiConsentData.length&&this.widgetRef.piiConsentData.forEach(function(i){i.optional||i.isChecked||(e.widgetRef.piiConsentError=!0,t=!0)}),t},t.prototype.validation=function(){var e=!1;this.widgetRef.preferredName&&(e=this.preferredNameFieldValidation());var t=this.nameFieldValidation(),i=this.emailFieldValidation(),o=this.phoneFieldValidation(),n=!1;if(n=this.widgetRef.piiConsentData&&this.widgetRef.piiConsentData.length?this.hasPiiErrors():this.termsValidation(),this.hasErrors=!!(e||t||i||o),n&&!this.hasErrors)return this.hasErrors=!0,void(this.widgetRef.piiConsentContext&&this.widgetRef.piiConsentContext.triggerPopup&&(this.widgetRef.piiConsentContext.triggerPopup(!0),this.widgetRef.trackWidgetClick&&this.widgetRef.trackWidgetClick("pii-popup-trigger",{})));if(this.hasErrors){var a=!1;this.widgetRef.preferredName&&this.widgetRef.stepData.preferredName.error?(this.widgetRef.focusElement(".ph-a11y-form-control-preferred-name",50),a=!0):this.widgetRef.stepData.name.error?(this.widgetRef.focusElement(".ph-a11y-form-control-name",50),a=!0):this.widgetRef.stepData.email.error&&!a?(this.widgetRef.focusElement(".ph-a11y-form-control-email",50),a=!0):this.widgetRef.stepData.phone.error&&!a?this.widgetRef.focusElement(".ph-a11y-form-control-phone",50):this.widgetRef.termsError&&this.widgetRef.focusElement(".ph-a11y-terms-check-box",50)}else this.handleFyfActions(this.widgetRef.fyfStepConfig.contactInfo.information)},t}(i.BaseStepProvider);t.FyfStepContactInfo=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-contactInfoWithResume",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="resume_upload_click",a=["email","firstName","lastName","phone"],r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.errors={},t.hiddenOverflow=!1,t.handleFileUploadStatus=function(e){t.widgetRef.resumeFileSizeExceeds=!1,t.widgetRef.resumeFileUnsupported=!1,t.unhideSaveChangesLoader(),e&&"addedfile"==e.status&&(t.widgetRef.trackWidgetClick(n,{}),t.parentPopup=t.hasPopup(20),t.parentPopup&&(t.parentPopup.style.overflow="hidden"),t.widgetRef.fyfStepConfig.resumeUploading=!0,setTimeout(function(){t.widgetRef.fyfStepConfig.resumeUploading=!1},250)),e&&"success"==e.status&&e.data&&e.data.res?(t.widgetRef.fyfStepConfig.resumeData=e.data,t.fetchResumeData()):!e||"error"!=e.status&&"canceled"!=e.status||(e.data&&"exceeds"==e.data.type&&(t.widgetRef.resumeFileSizeExceeds=!0),e.data&&"unsupported"==e.data.type&&(t.widgetRef.resumeFileUnsupported=!0),t.triggerPopup("resumeError","#ph-dropzone"),t.widgetRef.isResumeUploaded=!1,t.widgetRef.fyfStepConfig.resumeData={},t.hideSaveChangesLoader())},t.handleEscape=function(e){"Escape"!=e.key&&27!==e.keyCode&&27!==e.which||t.closeResumeUploadDetailsPopup()},t}return __extends(t,e),t.prototype.init=function(){this.widgetRef.fyfStepConfig.contactInfo={},this.widgetRef.fyfStepConfig.contactInfo.information={},this.widgetRef.acceptTerms=this.widgetRef.fyfStepConfig.profileData&&this.widgetRef.fyfStepConfig.profileData.privacyConsent||!1,this.widgetRef.termsError=!1,this.widgetRef.contactInfoFields=this.widgetRef.contactInfoFields||a,this.widgetRef.fyfStepConfig.contactInfo.information.email=this.widgetRef.fyfStepConfig.profileData.email,this.widgetRef.preferredName&&(this.widgetRef.fyfStepConfig.contactInfo.information.preferredName=this.widgetRef.fyfStepConfig.profileData.preferredName),this.widgetRef.fyfStepConfig.contactInfo.information.firstName=this.widgetRef.fyfStepConfig.profileData.firstName,this.widgetRef.fyfStepConfig.contactInfo.information.lastName=this.widgetRef.fyfStepConfig.profileData.lastName,this.widgetRef.fyfStepConfig.contactInfo.information.phone=this.widgetRef.fyfStepConfig.profileData.phone,this.widgetRef.fyfStepConfig.contactInfo.information.resumeName=this.widgetRef.fyfStepConfig.profileData.resumeName,this.widgetRef.stepData=this.widgetRef.stepData||{},this.widgetRef.preferredName&&(this.widgetRef.stepData.preferredName={}),this.widgetRef.stepData.firstName={},this.widgetRef.stepData.lastName={},this.widgetRef.stepData.email={},this.widgetRef.stepData.phone={},this.widgetRef.stepData.firstName.validField=!1,this.widgetRef.stepData.lastName.validField=!1,this.widgetRef.stepData.email.validField=!1,this.widgetRef.stepData.phone.validField=!1,this.widgetRef.piiConsentError=!1,this.widgetRef.fyfStepConfig.contactInfo.information.email&&this.emailFieldValidation(),this.widgetRef.fyfStepConfig.contactInfo.information.phone&&this.phoneFieldValidation(),this.widgetRef.fileCtx={uploadUrl:"/fileCommonUpload",allowedFormats:".doc, .docx, .pdf, .txt",previewTemplate:"",maxFileSize:this.widgetRef.maxFileSize,dk:"fileUpload",funRef:this.handleFileUploadStatus},e.prototype.focusToStepBlock.call(this)},t.prototype.fetchContactInfo=function(){var e=this;this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeyContactInfo,{}).then(function(t){t&&t.data&&(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.contactInfo=t.data)})},t.prototype.handleActions=function(){this.validation()},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.contactInfo.information;if(this.widgetRef.showLoginScreen)return this.widgetRef.trackWidgetClick("back_to_contact_info_click",e),void this.switchToContactInfoScreen();this.widgetRef.fyfStepConfig.prevStepRef(e)},t.prototype.fieldValidation=function(e){switch(e){case"preferredName":this.preferredNameFieldValidation();break;case"firstName":this.firstNameFieldValidation();break;case"lastName":this.lastNameFieldValidation();break;case"email":this.emailFieldValidation();break;case"phone":this.phoneFieldValidation()}},t.prototype.firstNameFieldValidation=function(){return this.widgetRef.stepData.firstName={},this.widgetRef.fyfStepConfig.contactInfo.information.firstName?(this.widgetRef.stepData.firstName.error=!1,this.hasErrors=!1,this.widgetRef.stepData.firstName.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.firstName.error=!0,this.widgetRef.stepData.firstName.code="E101",this.widgetRef.stepData.firstName.validField=!1),this.hasErrors},t.prototype.lastNameFieldValidation=function(){return this.widgetRef.stepData.lastName={},this.widgetRef.fyfStepConfig.contactInfo.information.lastName?(this.widgetRef.stepData.lastName.error=!1,this.hasErrors=!1,this.widgetRef.stepData.lastName.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.lastName.code="E101",this.widgetRef.stepData.lastName.error=!0,this.widgetRef.stepData.lastName.validField=!1),this.hasErrors},t.prototype.preferredNameFieldValidation=function(){return this.widgetRef.stepData.preferredName={},this.widgetRef.fyfStepConfig.contactInfo.information.preferredName?(this.widgetRef.stepData.preferredName.error=!1,this.hasErrors=!1,this.widgetRef.stepData.preferredName.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.preferredName.code="E101",this.widgetRef.stepData.preferredName.error=!0,this.widgetRef.stepData.preferredName.validField=!1),this.hasErrors},t.prototype.emailFieldValidation=function(){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return this.widgetRef.stepData.email={},this.widgetRef.fyfStepConfig.contactInfo.information.email?e.test(this.widgetRef.fyfStepConfig.contactInfo.information.email)?(this.widgetRef.stepData.email.error=!1,this.hasErrors=!1,this.widgetRef.stepData.email.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.email.code="E102",this.widgetRef.stepData.email.error=!0,this.widgetRef.stepData.email.validField=!1):(this.hasErrors=!0,this.widgetRef.stepData.email.code="E101",this.widgetRef.stepData.email.error=!0,this.widgetRef.stepData.email.validField=!1),this.hasErrors},t.prototype.phoneFieldValidation=function(){this.widgetRef.stepData.phone={};var e=/^(\+?[0-9\-\(\) ]+)?$/;if(this.widgetRef.fyfStepConfig.contactInfo.information.phone){var t=this.widgetRef.fyfStepConfig.contactInfo.information.phone,i=this.widgetRef.fyfStepConfig.contactInfo.information.phone.replace(/[^0-9]/g,"");return e.test(t)&&t.length<=20&&i.length>6&&i.length<=13?this.widgetRef.stepData.phone.validField=!0:(this.widgetRef.stepData.phone.code="E101",this.widgetRef.stepData.phone.error=!0,this.hasErrors=!0,this.widgetRef.stepData.phone.validField=!1),this.hasErrors}return!1},t.prototype.switchToLoginScreen=function(){this.widgetRef.showContactInfoScreen=!1,this.widgetRef.showLoginScreen=!0,e.prototype.focusToStepBlock.call(this)},t.prototype.switchToContactInfoScreen=function(){this.widgetRef.showLoginScreen=!1,this.widgetRef.showContactInfoScreen=!0,e.prototype.focusToStepBlock.call(this)},t.prototype.termsValidation=function(){return this.widgetRef.termsError=!1,this.widgetRef.piiConsentError=!1,!(!this.widgetRef.gdprConsent||this.widgetRef.acceptTerms||(this.widgetRef.termsError=!0,0))},t.prototype.hasPiiErrors=function(){var e=this;this.widgetRef.piiConsentError=!1,this.widgetRef.termsError=!1;var t=!1;return this.widgetRef.piiConsentData&&this.widgetRef.piiConsentData.length&&this.widgetRef.piiConsentData.forEach(function(i){i.optional||i.isChecked||(e.widgetRef.piiConsentError=!0,t=!0)}),t},t.prototype.fetchResumeData=function(){var e={};this.widgetRef.fyfStepConfig.resumeData&&this.widgetRef.fyfStepConfig.resumeData.res&&"success"==this.widgetRef.fyfStepConfig.resumeData.res.status&&this.widgetRef.fyfStepConfig.resumeData.res.profile?(this.hideSaveChangesLoader(),e.profile=this.widgetRef.fyfStepConfig.resumeData.res.profile,this.widgetRef.fyfStepConfig.contactInfo.information.resumeName=this.widgetRef.fyfStepConfig.resumeData.name,this.widgetRef.fyfStepConfig.contactInfo.information.resumeIdentifier=e.profile.resumeIdentifier,this.widgetRef.resumeDeleted=!1,this.getResumeData(e,!0)):(this.triggerPopup("resumeError","#ph-dropzone"),this.widgetRef.fyfStepConfig.resumeData={},this.hideSaveChangesLoader())},t.prototype.getResumeData=function(e,t){var i=this,n=e||{};return this.unhideSaveChangesLoader(),this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeyGetResumeData,n).then(function(e){if(e&&"success"==e.status&&e.profile)return t?(i.populateUploadResumeData(e.profile),i.widgetRef.isResumeUploaded=!0,i.triggerPopup("resumeUpload",".remove-file"),i.hideSaveChangesLoader()):(i.widgetRef.isResumeUploaded=!1,i.widgetRef.selectionRemovalSronly=!0,setTimeout(function(){i.widgetRef.selectionRemovalSronly=!1,i.widgetRef.focusElement("#ph-dropzone")},10),i.widgetRef.fyfStepConfig.resumeData={},i.hideSaveChangesLoader()),!0},function(e){return new Error(e),i.hideSaveChangesLoader(),!1})},t.prototype.populateUploadResumeData=function(e){var t=this;this.widgetRef.contactInfoFields.forEach(function(i){if(t.widgetRef.fyfStepConfig.contactInfo.information[i]=t.widgetRef.fyfStepConfig.contactInfo.information[i]||e[i],"phone"==i&&!e.hasOwnProperty("phone")&&e.hasOwnProperty("phones")&&e.phones.length){var o=e.phones[0].phoneNumber;t.widgetRef.fyfStepConfig.contactInfo.information[i]=t.widgetRef.fyfStepConfig.contactInfo.information[i]||o}("email"==i||"phone"==i)&&t.widgetRef.fyfStepConfig.contactInfo&&t.widgetRef.fyfStepConfig.contactInfo.information&&t.widgetRef.fyfStepConfig.contactInfo.information[i]&&t.fieldValidation(i)})},t.prototype.hasPopup=function(e,t){var i=t||this.element&&this.element.parentElement;return i&&e>0?i.classList&&i.classList.contains("modal-dialog")?i:this.hasPopup(e-1,i.parentElement):void 0},t.prototype.triggerPopup=function(e,t){var i=this;this.parentPopup=this.hasPopup(20),this.parentPopup&&(document.body&&"hidden"==document.body.style.overflow&&(this.hiddenOverflow=!0,document.body&&(document.body.style.overflow="auto")),this.parentPopup.style.overflow="hidden"),this.widgetRef.popupType=e,this.widgetRef.saveDetailsDialog?(this.widgetRef.saveDetailsDialog=!1,setTimeout(function(){i.widgetRef.saveDetailsDialog=!0},0)):this.widgetRef.saveDetailsDialog=!0,t=t||"#"+this.widgetRef.fyfStepConfig.stepType,setTimeout(function(){var e=i.element.querySelector(t),o=i.element.querySelector(".modal-dialog .save-btn");i.element.addEventListener("keyup",i.handleEscape),i.widgetRef.openDialogPopup("ph-a11y-modal-area",e,o,null,!0)},100)},t.prototype.unhideSaveChangesLoader=function(){this.widgetRef.saveDetailsLoader=!0,document.body.style.overflow="hidden"},t.prototype.hideSaveChangesLoader=function(){this.widgetRef.saveDetailsLoader=!1,document.body.style.overflow=""},t.prototype.closeResumeUploadDetailsPopup=function(e){var t=this;this.widgetRef.saveDetailsDialog=!1,"delete"==e?this.widgetRef.trackWidgetClick("close_delete_resume_popup_click",{}):"upload"==e&&this.widgetRef.trackWidgetClick("close_resume_upload_details_popup_click",{}),this.widgetRef.closeDialogPopup(),this.element.removeEventListener("keyup",this.handleEscape),this.parentPopup&&(this.parentPopup.style.overflow="auto"),this.hiddenOverflow&&setTimeout(function(){document.body&&(document.body.style.overflow="hidden"),t.hiddenOverflow=!1},100)},t.prototype.deleteResumePopup=function(){this.widgetRef.trackWidgetClick("open_delete_resume_popup_click",{}),this.triggerPopup("resumeDelete",".remove-file")},t.prototype.deleteResume=function(){this.unhideSaveChangesLoader(),this.widgetRef.saveDetailsDialog=!1,this.widgetRef.closeDialogPopup(),this.element.removeEventListener("keyup",this.handleEscape),this.widgetRef.trackWidgetClick("delete_resume_click",{}),this.widgetRef.focusElement(".upload-btn"),this.widgetRef.fyfStepConfig.contactInfo.information.resumeName="",this.widgetRef.fyfStepConfig.contactInfo.information.resumeUrl="",this.widgetRef.fyfStepConfig.contactInfo.information.resumeRelativePath="",this.widgetRef.fyfStepConfig.contactInfo.information.resumeBucketId="",this.widgetRef.fyfStepConfig.contactInfo.information.resumeIdentifier=void 0,this.widgetRef.resumeDeleted=!0,this.parentPopup&&(this.parentPopup.style.overflow="auto"),this.hiddenOverflow&&setTimeout(function(){document.body&&(document.body.style.overflow="hidden")},100),this.hideSaveChangesLoader()},t.prototype.resumeUploadTryAgain=function(){this.widgetRef.trackWidgetClick("resume_upload_try_again_click",{}),this.widgetRef.isResumeUploaded?this.deleteResume():(this.closeResumeUploadDetailsPopup(),this.element.querySelector("#ph-dropzone")&&this.element.querySelector("#ph-dropzone").click())},t.prototype.validation=function(){var e=this.emailFieldValidation(),t=this.phoneFieldValidation(),i=!1;if(i=this.widgetRef.piiConsentData&&this.widgetRef.piiConsentData.length?this.hasPiiErrors():this.termsValidation(),this.hasErrors=!(!e&&!t),i&&!this.hasErrors&&(this.hasErrors=!0,this.widgetRef.piiConsentContext&&this.widgetRef.piiConsentContext.triggerPopup))return this.widgetRef.piiConsentContext.triggerPopup(!0),void(this.widgetRef.trackWidgetClick&&this.widgetRef.trackWidgetClick("pii-popup-trigger",{}));if(this.hasErrors){var o=!1;this.widgetRef.stepData.email.error&&!o?(this.widgetRef.focusElement(".ph-a11y-form-control-email",50),o=!0):this.widgetRef.stepData.phone.error&&!o?this.widgetRef.focusElement(".ph-a11y-form-control-phone",50):this.widgetRef.termsError&&this.widgetRef.focusElement(".ph-a11y-terms-check-box",50)}else this.handleFyfActions(this.widgetRef.fyfStepConfig.contactInfo.information)},t}(i.BaseStepProvider);t.FyfStepContactInfoWithResume=r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-location",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.activeIndex=-1,t.handleFieldFocus=function(e){var i=e&&e.target&&e.target.value;t.widgetRef.stepData.locations&&t.widgetRef.stepData.locations.length&&i&&(t.widgetRef.stepData.showLocationDropdown=!0,t.activeIndex=-1)},t.handleStepKeyup=function(e){var i=e.value;i&&i.length?t.fetchData():t.widgetRef.stepData.showLocationDropdown=!1},t.handleStepKeydown=function(e){},t}return __extends(t,e),t.prototype.init=function(){this.widgetRef.stepData=this.widgetRef.stepData||{};var t=JSON.parse(JSON.stringify(this.widgetRef.fyfStepConfig.profileData.preferredLocation||[]));this.widgetRef.fyfStepConfig.preferredLocation=t,this.widgetRef.fyfStepConfig.preferredLocationValue="",this.widgetRef.stepData.locations=[],this.widgetRef.showFocus=!1,this.constructSelectedLocationListOnInit(),e.prototype.fetchAutoCompleteInput.call(this),e.prototype.focusToStepBlock.call(this)},t.prototype.constructSelectedLocationListOnInit=function(){var e=this;this.widgetRef.fyfStepConfig.selectedLocation=[],this.widgetRef.fyfStepConfig.preferredLocation.forEach(function(t){e.widgetRef.fyfStepConfig.selectedLocation.push(t.location_display)})},t.prototype.handleBlur=function(){this.widgetRef.stepData.showLocationDropdown=!1,this.widgetRef.showFocus=!1},t.prototype.moveDown=function(e){if(this.widgetRef.stepData.showLocationDropdown){var t=this.widgetRef.stepData.locations||[];if(t.length){++this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex>=t.length&&(this.activeIndex=0);var i=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveDown(this.widgetRef,e,"stepData",this.widgetRef.stepData.locations,this.activeIndex,this.element,i),"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.moveUp=function(e){if(this.widgetRef.stepData.showLocationDropdown){var t=this.widgetRef.stepData.locations||[];if(t.length){--this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex<0&&(this.activeIndex=0);var i=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveUp(this.widgetRef,e,"stepData",this.widgetRef.stepData.locations,this.activeIndex,this.element,i),"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.onEnter=function(e){var t=this;this.widgetRef.fyfStepConfig.preferredLocation=this.widgetRef.fyfStepConfig.preferredLocation||[];var i=this.widgetRef.stepData.locations||[];if(this.widgetRef.stepData.showLocationDropdown&&i.length){var o=!1;this.widgetRef.fyfStepConfig.preferredLocation.length&&this.widgetRef.fyfStepConfig.preferredLocation.forEach(function(e,n){e.location_display==i[t.widgetRef.stepData.activeIndex].location_display&&(o=!0)}),o||this.populateSelectedData(i[this.widgetRef.stepData.activeIndex])}},
t.prototype.autoFillValue=function(){this.widgetRef.fyfStepConfig.preferredLocation=this.widgetRef.fyfStepConfig.preferredLocation||[];var e=this.widgetRef.stepData.locations||[];e.length&&this.widgetRef.stepData.showLocationDropdown&&this.widgetRef.fyfStepConfig.preferredLocation.length&&(this.widgetRef.fyfStepConfig.preferredLocationValue=e[this.widgetRef.stepData.activeIndex].location_display)},t.prototype.fetchData=function(){var e=this,t=this.widgetRef.fyfStepConfig.preferredLocationValue||"";if(t.length){var i=this.widgetRef.fyfStepConfig.locationKey||"",n=i.split(","),a={};return a.keywords=t,a.size=parseInt(this.widgetRef.fyfStepConfig.size)||10,this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeyLocations,a).then(function(t){return t&&t.data&&t.data.results&&t.data.results.length?(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.locations=[],t.data.results.forEach(function(t,i){n.find(function(e){return e.trim()==t.type})&&e.widgetRef.stepData.locations.push(t)})):e.widgetRef.stepData.locations=[],e.widgetRef.stepData.showLocationDropdown=!0,e.widgetRef.stepData.locations})}},t.prototype.populateSelectedData=function(t){this.widgetRef.fyfStepConfig.preferredLocation=this.widgetRef.fyfStepConfig.preferredLocation||[];var i={};-1==(this.widgetRef.fyfStepConfig.selectedLocation||[]).indexOf(t.location_display)&&(i.standardlocation=t.standardlocation||"",i.location_display=t.location_display||"",i.latlong=t.latlong||{},this.widgetRef.fyfStepConfig.preferredLocation.push(i),this.widgetRef.fyfStepConfig.selectedLocation.push(t.location_display),t.isLocationSelected=!0,this.widgetRef.fyfStepConfig.preferredLocationValue=""),this.widgetRef.stepData.showLocationDropdown=!1;var o=t.location_display+" location selected";e.prototype.addSelectionRemovalSronly.call(this,o),this.focusSearch()},t.prototype.clearSearch=function(){var e={};e.trait6=this.widgetRef.fyfStepConfig.preferredLocationValue,this.widgetRef.trackWidgetClick("clear_text_click",e),this.widgetRef.fyfStepConfig.preferredLocationValue="",this.widgetRef.stepData.showLocationDropdown=!1,this.focusSearch()},t.prototype.onBackspace=function(){this.widgetRef.fyfStepConfig.preferredLocationValue||this.clearSearch()},t.prototype.handleActions=function(){var e=this.widgetRef.fyfStepConfig.preferredLocation||[],t=this.widgetRef.fyfStepConfig.profileData.preferredLocation||[],i=!1;if(e.length){if(e.length==t.length){for(var o=0;o<e.length;o++)!function(o){var n=e[o].location_display;-1==t.findIndex(function(e){return e.location_display==n})&&(i=!0)}(o);e=i?e:"unChanged"}}else e=!1,t&&t.length>0&&(e=[]);this.handleFyfActions(e)},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.preferredLocation||"";this.widgetRef.fyfStepConfig.prevStepRef(e)},t.prototype.removeSelectedData=function(t){var i=this;event.stopPropagation();var o=this.widgetRef.stepData.locations.findIndex(function(e){return e.location_display==i.widgetRef.fyfStepConfig.selectedLocation[t]}),n="removed location "+this.widgetRef.fyfStepConfig.selectedLocation[t];e.prototype.addSelectionRemovalSronly.call(this,n),setTimeout(function(){i.widgetRef.fyfStepConfig.preferredLocation.splice(t,1),i.widgetRef.fyfStepConfig.selectedLocation.splice(t,1),i.focusSearch()},500),-1!=o&&(this.widgetRef.stepData.locations[o].isLocationSelected=!1)},t.prototype.focusSearch=function(){e.prototype.focusSearch.call(this)},t}(i.BaseStepProvider);t.FyfStepLocation=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-locationWithMoreOptions",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.locationOptions={data:{results:[{displayName:"My Current Location",name:"currentLocation"},{displayName:"Any Location",name:"anyLocation"},{displayName:"Find a City",name:"findACity"}]}},t.activeIndex=-1,t.currentLocationCaptured=!1,t.handleFieldFocus=function(e){var i=e&&e.target&&e.target.value;t.widgetRef.stepData.locations&&t.widgetRef.stepData.locations.length&&i&&(t.widgetRef.stepData.showLocationDropdown=!0,t.activeIndex=-1)},t.handleStepKeyup=function(e){var i=e.value;i&&i.length?t.fetchData():t.widgetRef.stepData.showLocationDropdown=!1},t.handleStepKeydown=function(e){},t}return __extends(t,e),t.prototype.init=function(){var t=this;this.widgetRef.stepData=this.widgetRef.stepData||{},this.widgetRef.fyfStepConfig.locationOptions={},this.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions={},this.widgetRef.stepData.locationOptions=this.locationOptions.data.results,this.widgetRef.fyfStepConfig.profileData=this.widgetRef.fyfStepConfig.profileData||{},this.widgetRef.fyfStepConfig.profileData.locationOption=this.widgetRef.fyfStepConfig.profileData.locationOption||{};var i=[];this.widgetRef.fyfStepConfig&&this.widgetRef.fyfStepConfig.profileData&&this.widgetRef.fyfStepConfig.profileData.locationOption&&"currentLocation"==this.widgetRef.fyfStepConfig.profileData.locationOption.name||(i=JSON.parse(JSON.stringify(this.widgetRef.fyfStepConfig.profileData.preferredLocation||this.widgetRef.fyfStepConfig.profileData.preferredLocationWithMoreOptions||[])));var o=this.locationOptions.data.results.length;this.widgetRef.fyfStepConfig.profileData.locationOption.name?this.widgetRef.fyfStepConfig.locationOptions.selectedOption=this.locationOptions.data.results.find(function(e){return e.name==(t.widgetRef.fyfStepConfig.profileData.locationOption.name||"")}):this.widgetRef.fyfStepConfig.locationOptions.selectedOption=this.locationOptions.data.results[o-1],this.widgetRef.fyfStepConfig.locationBlockedPopup=!1,this.getGeoLocationPopup(),this.widgetRef.stepData.showLocationDropdown=!1,this.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions=i,this.widgetRef.fyfStepConfig.preferredLocationValue="",this.widgetRef.stepData.locations=[],this.widgetRef.showFocus=!1,this.constructSelectedLocationListOnInit(),e.prototype.fetchAutoCompleteInput.call(this),e.prototype.focusToStepBlock.call(this)},t.prototype.getGeoLocationPopup=function(){var e=this;"currentLocation"==this.widgetRef.fyfStepConfig.locationOptions.selectedOption.name&&setTimeout(function(){e.widgetRef.geoLocationService.getGeoLocation().then(function(t){console.log("payload for geo location");var i=e.latitude&&e.roundToFour(e.latitude),o=e.longitude&&e.roundToFour(e.longitude);e.latitude=t&&t.coords&&t.coords.latitude,e.longitude=t&&t.coords&&t.coords.longitude,i==e.roundToFour(e.latitude)&&o==e.roundToFour(e.longitude)||e.getCurrentLocation()}).catch(function(){console.log("location denied"),e.latitude=void 0,e.longitude=void 0,e.openLocationBlockedPopup()})},250)},t.prototype.roundToFour=function(e){return+(Math.round(e+"e+4")+"e-4")},t.prototype.openLocationBlockedPopup=function(){var e=this;this.widgetRef.fyfStepConfig.locationBlockedPopup=!0,this.widgetRef.fyfStepConfig.currentLocation={},setTimeout(function(){var t=e.element.querySelector(".ph-a11y-popup-start-focus"),i=e.element.querySelector("#"+e.locationOptions.data.results[0].name);e.element.addEventListener("keyup",e.handleEscape),e.widgetRef.openDialogPopup("ph-a11y-modal-area",i,t,null,!0)},0)},t.prototype.handleEscape=function(e){"Escape"!=e.key&&27!==e.keyCode&&27!==e.which||this.closeLocationBlockedPopup()},t.prototype.closeLocationBlockedPopup=function(){this.widgetRef.fyfStepConfig.locationBlockedPopup=!1,this.widgetRef.closeDialogPopup(),this.element.removeEventListener("keyup",this.handleEscape),this.widgetRef.trackWidgetClick("close-location-blocked-popup-click",{})},t.prototype.focusToElement=function(e){var t,i=this;setTimeout(function(){(t=i.element.querySelector(e))&&t.focus()},250)},t.prototype.constructSelectedLocationListOnInit=function(){var e=this;this.widgetRef.fyfStepConfig.selectedLocation=[],this.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions.forEach(function(t){e.widgetRef.fyfStepConfig.selectedLocation.push(t.location_display)})},t.prototype.handleBlur=function(){this.widgetRef.stepData.showLocationDropdown=!1,this.widgetRef.showFocus=!1},t.prototype.moveDown=function(e){if(this.widgetRef.stepData.showLocationDropdown){var t=this.widgetRef.stepData.locations||[];if(t.length){++this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex>=t.length&&(this.activeIndex=0);var i=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveDown(this.widgetRef,e,"stepData",this.widgetRef.stepData.locations,this.activeIndex,this.element,i),"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.getCurrentLocation=function(){var e=this;if(!this.latitude||!this.longitude)return void this.openLocationBlockedPopup();this.currentLocationCaptured=!0;var t={};return t.latitude=this.latitude,t.longitude=this.longitude,t.source="MCS",this.widgetRef.fyfStepConfig.currentLocation={latlong:{lat:this.latitude,lon:this.longitude}},this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeyGetCurrentLocation,t).then(function(t){t&&t.formattedAddress&&(e.widgetRef.fyfStepConfig.currentLocation.location_display=t.formattedAddress,e.widgetRef.fyfStepConfig.currentLocation.standardlocation=t.formattedAddress)})},t.prototype.moveUp=function(e){if(this.widgetRef.stepData.showLocationDropdown){var t=this.widgetRef.stepData.locations||[];if(t.length){--this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex<0&&(this.activeIndex=0);var i=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveUp(this.widgetRef,e,"stepData",this.widgetRef.stepData.locations,this.activeIndex,this.element,i),"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.onEnter=function(e){var t=this;this.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions=this.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions||[];var i=this.widgetRef.stepData.locations||[];if(this.widgetRef.stepData.showLocationDropdown&&i.length){var o=!1;this.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions.length&&this.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions.forEach(function(e,n){e.location_display==i[t.widgetRef.stepData.activeIndex].location_display&&(o=!0)}),o||this.populateSelectedData(i[this.widgetRef.stepData.activeIndex])}},t.prototype.autoFillValue=function(){this.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions=this.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions||[];var e=this.widgetRef.stepData.locations||[];e.length&&this.widgetRef.stepData.showLocationDropdown&&this.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions.length&&(this.widgetRef.fyfStepConfig.preferredLocationValue=e[this.widgetRef.stepData.activeIndex].location_display)},t.prototype.fetchData=function(){var e=this,t=this.widgetRef.fyfStepConfig.preferredLocationValue||"";if(t.length){var i=this.widgetRef.fyfStepConfig.locationKey||"",n=i.split(","),a={};return a.keywords=t,a.size=parseInt(this.widgetRef.fyfStepConfig.size)||10,this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeyLocations,a).then(function(t){return t&&t.data&&t.data.results&&t.data.results.length?(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.locations=[],t.data.results.forEach(function(t,i){n.find(function(e){return e.trim()==t.type})&&e.widgetRef.stepData.locations.push(t)})):e.widgetRef.stepData.locations=[],e.widgetRef.stepData.showLocationDropdown=!0,e.widgetRef.stepData.locations})}},t.prototype.populateSelectedData=function(t){this.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions=this.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions||[];var i={};-1==(this.widgetRef.fyfStepConfig.selectedLocation||[]).indexOf(t.location_display)&&(i.standardlocation=t.standardlocation||"",i.location_display=t.location_display||"",i.latlong=t.latlong||{},this.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions.push(i),this.widgetRef.fyfStepConfig.selectedLocation.push(t.location_display),t.isLocationSelected=!0,this.widgetRef.fyfStepConfig.preferredLocationValue=""),this.widgetRef.stepData.showLocationDropdown=!1;var o=t.location_display+" location selected";e.prototype.addSelectionRemovalSronly.call(this,o),this.focusSearch()},t.prototype.clearSearch=function(){var e={};e.trait6=this.widgetRef.fyfStepConfig.preferredLocationValue,this.widgetRef.trackWidgetClick("clear_text_click",e),this.widgetRef.fyfStepConfig.preferredLocationValue="",this.widgetRef.stepData.showLocationDropdown=!1,this.focusSearch()},t.prototype.onBackspace=function(){this.widgetRef.fyfStepConfig.preferredLocationValue||this.clearSearch()},t.prototype.handleActions=function(){var e=this.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions||[],t=this.widgetRef.fyfStepConfig.profileData.preferredLocationWithMoreOptions||[],i=!1;if(e.length){if(e.length==t.length){for(var o=0;o<e.length;o++)!function(o){var n=e[o].location_display;-1==t.findIndex(function(e){return e.location_display==n})&&(i=!0)}(o);e=i?e:"unChanged"}}else e=!1,t&&t.length>0&&(e=[]);"currentLocation"==this.widgetRef.fyfStepConfig.locationOptions.selectedOption.name?e=[this.widgetRef.fyfStepConfig.currentLocation]:"anyLocation"==this.widgetRef.fyfStepConfig.locationOptions.selectedOption.name&&(e=[]),this.handleFyfActions(e)},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions||"";this.widgetRef.fyfStepConfig.prevStepRef(e)},t.prototype.removeSelectedData=function(t){var i=this;event.stopPropagation();var o=this.widgetRef.stepData.locations.findIndex(function(e){return e.location_display==i.widgetRef.fyfStepConfig.selectedLocation[t]}),n="removed location "+this.widgetRef.fyfStepConfig.selectedLocation[t];e.prototype.addSelectionRemovalSronly.call(this,n),setTimeout(function(){i.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions.splice(t,1),i.widgetRef.fyfStepConfig.selectedLocation.splice(t,1),i.focusSearch()},500),-1!=o&&(this.widgetRef.stepData.locations[o].isLocationSelected=!1)},t.prototype.onPreferredLocationListChange=function(){var e=this.element.querySelector(".selected-location-data"),t=this.element.querySelector(".selected-location-list");this.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions&&1==this.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions.length?(e.setAttribute("role","presentation"),t.setAttribute("role","option")):this.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions&&this.widgetRef.fyfStepConfig.preferredLocationWithMoreOptions.length>1&&(e.setAttribute("role","list"),t.setAttribute("role","listitem"))},t.prototype.focusSearch=function(){e.prototype.focusSearch.call(this)},t}(i.BaseStepProvider);t.FyfStepLocationWithMoreOptions=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-recentTitle",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="clear_text_click",a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.activeIndex=-1,t.handleFieldFocus=function(e){var i=e&&e.target&&e.target.value;t.widgetRef.stepData.recentTitles&&t.widgetRef.stepData.recentTitles.length&&i&&(t.widgetRef.stepData.showRecentTitleDropdown=!0,t.activeIndex=-1)},t.handleStepKeyup=function(e){var i=e.value;i&&i.length?t.fetchData():t.widgetRef.stepData.showRecentTitleDropdown=!1},t.handleStepKeydown=function(e){},t.clearSearch=function(e){var i={};i.trait6=t.widgetRef.fyfStepConfig.recentTitle.value,t.widgetRef.stepData.recentTitles=[],t.widgetRef.fyfStepConfig.recentTitle.selectedTitle="",t.widgetRef.stepData.showRecentTitleDropdown=!1,t.widgetRef.fyfStepConfig.typed_recentTitle=[],t.widgetRef.fyfStepConfig.selected_recentTitle=[],e||(t.widgetRef.trackWidgetClick(n,i),t.focusSearch()),setTimeout(function(){t.widgetRef.fyfStepConfig.recentTitle.value=""},150)},t}return __extends(t,e),t.prototype.init=function(){this.widgetRef.stepData=this.widgetRef.stepData||{},this.widgetRef.fyfStepConfig.recentTitle=this.widgetRef.fyfStepConfig.recentTitle||{},this.widgetRef.stepData.recentTitles=[],this.widgetRef.fyfStepConfig.recentTitle.flag=1==this.widgetRef.fyfStepConfig.profileData.relevantExperience,this.widgetRef.fyfStepConfig.recentTitle.flag?(this.widgetRef.fyfStepConfig.recentTitle.selectedTitle="",this.widgetRef.fyfStepConfig.recentTitle.value=""):(this.widgetRef.fyfStepConfig.recentTitle.value=this.widgetRef.fyfStepConfig.profileData.recentTitle||"",this.widgetRef.fyfStepConfig.recentTitle.selectedTitle=this.widgetRef.fyfStepConfig.profileData.recentTitle||"",this.widgetRef.fyfStepConfig.recentTitle.value&&(this.widgetRef.fyfStepConfig.isClickOption=!0)),e.prototype.focusToStepBlock.call(this),e.prototype.fetchAutoCompleteInput.call(this)},t.prototype.handleBlur=function(){this.widgetRef.stepData.showRecentTitleDropdown=!1},t.prototype.moveDown=function(e){if(this.widgetRef.stepData.showRecentTitleDropdown){var t=this.widgetRef.stepData.recentTitles||[];if(t.length){++this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex>=t.length&&(this.activeIndex=0);var i=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveDown(this.widgetRef,e,"stepData",this.widgetRef.stepData.recentTitles,this.activeIndex,this.element,i),"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.moveUp=function(e){if(this.widgetRef.stepData.showRecentTitleDropdown){var t=this.widgetRef.stepData.recentTitles||[];if(t.length){--this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex<0&&(this.activeIndex=0);var i=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveUp(this.widgetRef,e,"stepData",this.widgetRef.stepData.recentTitles,this.activeIndex,this.element,i),"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.onEnter=function(e){if(this.widgetRef.stepData.showRecentTitleDropdown){var t={};t.title=this.widgetRef.fyfStepConfig.recentTitle.value||"",t.title.length&&this.populateSelectedData(t)}},t.prototype.populateSelectedData=function(e,t){this.widgetRef.fyfStepConfig.recentTitle.selectedTitle=e.title,this.widgetRef.fyfStepConfig.recentTitle.value=e.title,this.widgetRef.stepData.showRecentTitleDropdown=!1,this.focusSearch()},t.prototype.autoFillValue=function(){var e=this.widgetRef.stepData.recentTitles;this.widgetRef.stepData.showRecentTitleDropdown&&e.length&&this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&(this.widgetRef.fyfStepConfig.recentTitle.value=e[this.widgetRef.stepData.activeIndex].title)},t.prototype.fetchData=function(){var e=this,t=this.widgetRef.fyfStepConfig.recentTitle.value;if(t.length){var i={};return i.keywords=t,i.size=parseInt(this.widgetRef.fyfStepConfig.size)||10,this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeyRecentTitles,i).then(function(t){return t&&t.data&&t.data.results&&t.data.results.length?(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.recentTitles=t.data.results):e.widgetRef.stepData.recentTitles=[],e.widgetRef.stepData.showRecentTitleDropdown=!0,e.widgetRef.stepData.recentTitles},function(e){new Error(e)})}},t.prototype.onBackspace=function(){this.widgetRef.fyfStepConfig.recentTitle.value||this.clearSearch()},t.prototype.hideDropDown=function(){var e=this;return setTimeout(function(){e.widgetRef.stepData.showRecentTitleDropdown=!1},150),!0},t.prototype.disableJobTitle=function(){this.widgetRef.fyfStepConfig.recentTitle.flag&&this.clearSearch(!0)},t.prototype.handleActions=function(){var e="false";this.widgetRef.fyfStepConfig.recentTitle.flag?e="true":!this.widgetRef.fyfStepConfig.profileData.hasOwnProperty("relevantExperience")||this.widgetRef.fyfStepConfig.profileData.relevantExperience==this.widgetRef.fyfStepConfig.recentTitle.flag&&this.widgetRef._tempProfileData.profile.relevantExperience==this.widgetRef.fyfStepConfig.recentTitle.flag?this.widgetRef.fyfStepConfig.profileData.hasOwnProperty("relevantExperience")&&this.widgetRef.fyfStepConfig.profileData.relevantExperience!=this.widgetRef.fyfStepConfig.recentTitle.flag||(e=this.widgetRef.fyfStepConfig.recentTitle.value?"false":""):e="false";var t=this.widgetRef.fyfStepConfig.recentTitle.value||this.widgetRef.fyfStepConfig.recentTitle.selectedTitle||"",i=this.widgetRef.fyfStepConfig.profileData.recentTitle||"";if(t?t==i&&(!this.widgetRef.fyfStepConfig.recentTitle.value.length&&this.widgetRef.fyfStepConfig.recentTitle.selectedTitle.length?(t="",e="false"):t="unChanged"):(t=!1,i&&i.length&&(t="",this.widgetRef.fyfStepConfig.profileData.recentTitle="","true"==e||(e="false"))),this.widgetRef.fyfStepConfig.recentTitle.value.length&&this.widgetRef.fyfStepConfig.recentTitle.value!=this.widgetRef.fyfStepConfig.profileData.recentTitle&&!this.widgetRef.fyfStepConfig.selected_recentTitle.length||this.widgetRef.fyfStepConfig.selected_recentTitle.length&&this.widgetRef.fyfStepConfig.selected_recentTitle[0]!=this.widgetRef.fyfStepConfig.recentTitle.value){var o=this.widgetRef.fyfStepConfig.recentTitle.value,n=!1;if(this.widgetRef.stepData.recentTitles.length)for(var a=this.widgetRef.stepData.recentTitles,r=0,s=a;r<s.length;r++){var l=s[r];l.title.toLowerCase()===o.toLowerCase()&&(this.widgetRef.fyfStepConfig.selected_recentTitle=[o],this.widgetRef.fyfStepConfig.typed_recentTitle=[],n=!0)}n||(this.widgetRef.fyfStepConfig.typed_recentTitle=[o],this.widgetRef.fyfStepConfig.selected_recentTitle=[])}this.widgetRef.fyfStepConfig.profileData.hasOwnProperty("workExperience")&&!this.widgetRef.fyfStepConfig.recentTitle.flag?this.handleFyfActions(t):this.handleFyfActions(t,e),this.widgetRef.stepData.showRecentTitleDropdown=!1},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.recentTitle.selectedTitle||"",t=this.widgetRef.fyfStepConfig.recentTitle.flag?"true":"false";this.widgetRef.fyfStepConfig.prevStepRef(e,t),this.widgetRef.stepData.showRecentTitleDropdown=!1},t.prototype.focusSearch=function(){e.prototype.focusSearch.call(this)},t}(i.BaseStepProvider);t.FyfStepRecentTitle=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-skills",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="clear_text_click",a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.activeIndex=-1,t.handleFieldFocus=function(e){var i=e&&e.target&&e.target.value;t.widgetRef.stepData.skills&&t.widgetRef.stepData.skills.length&&i&&(t.widgetRef.stepData.showSkillsDropdown=!0,t.activeIndex=-1)},t.handleStepKeyup=function(e){var i=e.value;i&&i.length?t.fetchData():t.widgetRef.stepData.showSkillsDropdown=!1},t.handleInputFieldLength=function(){var e=t.widgetRef.fyfStepConfig.skills&&t.widgetRef.fyfStepConfig.skills.value||"",i=t.widgetRef.widgetBundle.fyfSkillsPlaceHolderText||"";t.inputField&&(t.inputField.style.width=10*((e.length||i.length)+1)+"px")},t.handleStepKeydown=function(e){},t.clearSearch=function(){var e={};e.trait6=t.widgetRef.fyfStepConfig.skills.value,t.widgetRef.trackWidgetClick(n,e),t.widgetRef.stepData.showSkillsDropdown=!1,t.widgetRef.fyfStepConfig.skills.value="",t.focusSearch()},t}return __extends(t,e),t.prototype.init=function(){this.widgetRef.stepData=this.widgetRef.stepData||{};var t=JSON.parse(JSON.stringify(this.widgetRef.fyfStepConfig.profileData.skills||[]));this.widgetRef.fyfStepConfig.skills={},this.widgetRef.stepData.skills=[],this.widgetRef.stepData.suggestedSkills=[],this.widgetRef.fyfStepConfig.skills.selectedSkill=t,this.widgetRef.fyfStepConfig.typed_skills=this.widgetRef.fyfStepConfig.profileData.typed_skills||[],this.widgetRef.fyfStepConfig.selected_skills=this.widgetRef.fyfStepConfig.profileData.selected_skills||[],this.widgetRef.showFocus=!1,this.fetchSuggestedSkills(),e.prototype.fetchAutoCompleteInput.call(this,this.handleInputFieldLength),e.prototype.focusToStepBlock.call(this)},t.prototype.handleBlur=function(){this.widgetRef.stepData.showSkillsDropdown=!1,this.widgetRef.showFocus=!1},t.prototype.moveDown=function(e){if(this.widgetRef.stepData.showSkillsDropdown){var t=this.widgetRef.stepData.skills||[];if(t.length){++this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex>=t.length&&(this.activeIndex=0);var i=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveDown(this.widgetRef,e,"stepData",this.widgetRef.stepData.skills,this.activeIndex,this.element,i),"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.moveUp=function(e){if(this.widgetRef.stepData.showSkillsDropdown){var t=this.widgetRef.stepData.skills||[];if(t.length){--this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex<0&&(this.activeIndex=0);var i=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveUp(this.widgetRef,e,"stepData",this.widgetRef.stepData.skills,this.activeIndex,this.element,i),"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.onEnter=function(e){if(this.widgetRef.stepData.showSkillsDropdown){var t={};t.skill=this.widgetRef.fyfStepConfig.skills.value||"",t.skill.length&&this.populateSelectedData(t,"onEnter")}},t.prototype.populateSelectedData=function(e,t){-1==this.widgetRef.fyfStepConfig.skills.selectedSkill.indexOf(e.skill)&&(this.widgetRef.fyfStepConfig.skills.selectedSkill.push(e.skill),this.widgetRef.fyfStepConfig.skills.value="","onEnter"==t&&this.widgetRef.fyfStepConfig.typed_skills.push(e.skill)),e.isSkillSelected=!0,this.handleInputFieldLength(),this.focusSearch(),this.widgetRef.stepData.showSkillsDropdown=!1},t.prototype.autoFillValue=function(){var e=this.widgetRef.stepData.skills||[];this.widgetRef.stepData.showSkillsDropdown&&e.length&&this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&(this.widgetRef.fyfStepConfig.skills.value=e[this.widgetRef.stepData.activeIndex].skill)},t.prototype.fetchSuggestedSkills=function(){var e=this,t={},i=this.widgetRef.fyfStepConfig.profileData.recentTitle;i=i?[i]:[],t.titles=i,t.categories=this.widgetRef.fyfStepConfig.profileData.categories||[],t.skills=this.widgetRef.fyfStepConfig.skills.selectedSkill||[],t.size=parseInt(this.widgetRef.fyfStepConfig.suggestedSkillSize)||7,this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeySkillSuggestions,t).then(function(t){t&&t.data&&t.data.results&&(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.suggestedSkills=t.data.results)})},t.prototype.fetchData=function(){var e=this,t=this.widgetRef.fyfStepConfig.skills.value||"";if(t.length){var i={},n=this.widgetRef.fyfStepConfig.skills.selectedSkill;return i.keywords=t,i.size=parseInt(this.widgetRef.fyfStepConfig.size)||10,i.addedSkills=n.length?n:[],this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeySkills,i).then(function(t){return t&&t.data&&t.data.results&&t.data.results.length?(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.skills=t.data.results):e.widgetRef.stepData.skills=[],e.widgetRef.stepData.showSkillsDropdown=!0,e.widgetRef.stepData.skills},function(e){new Error(e)})}},t.prototype.onBackspace=function(){this.widgetRef.fyfStepConfig.skills.value||this.clearSearch()},t.prototype.handleActions=function(){if(this.widgetRef.fyfStepConfig.skills.value){var e=this.widgetRef.fyfStepConfig.skills.value;if(this.widgetRef.stepData.skills&&this.widgetRef.stepData.skills.length)for(var t=this.widgetRef.stepData.skills,i=0,o=t;i<o.length;i++){var n=o[i];n.skill.toLowerCase()===e.toLowerCase()&&this.widgetRef.fyfStepConfig.selected_skills.push(e)}this.widgetRef.fyfStepConfig.typed_skills.push(e),this.widgetRef.fyfStepConfig.skills.selectedSkill.push(this.widgetRef.fyfStepConfig.skills.value)}var a=this.widgetRef.fyfStepConfig.skills.selectedSkill||[],r=this.widgetRef.fyfStepConfig.profileData.skills||[],s=!1;if(a.length)if(a.length==r.length){for(var l=0;l<a.length;l++)!function(e){var t=a[e];-1==r.findIndex(function(e){return e==t})&&(s=!0)}(l);a=s?a:"unChanged"}else a.length&&(a=Array.from(new Set(a)));else a=!1,r&&r.length>0&&(a=[]);this.handleFyfActions(a),this.widgetRef.stepData.showSkillsDropdown=!1},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.skills.selectedSkill||"";this.widgetRef.fyfStepConfig.prevStepRef(e),this.widgetRef.stepData.showSkillsDropdown=!1},t.prototype.selectSuggestions=function(t,i){var o=this;if(this.widgetRef.fyfStepConfig.skills.selectedSkill=this.widgetRef.fyfStepConfig.skills.selectedSkill||[],-1==this.widgetRef.fyfStepConfig.skills.selectedSkill.indexOf(t)){this.widgetRef.fyfStepConfig.skills.selectedSkill.push(t),this.widgetRef.fyfStepConfig.selected_skills.push(t),this.widgetRef.stepData.suggestedSkills.splice(i,1);var n=this.element.querySelector(".ph-common-slection-area"),a=this.element.querySelector("[data-ph-autocomplete-input]"),r=t+" skill selected";e.prototype.addSelectionRemovalSronly.call(this,r),setTimeout(function(){a&&(a.focus(),o.widgetRef.fyfStepConfig.skills.value=""),n&&(n.scrollTop=n.scrollHeight)},150),this.widgetRef.trackWidgetClick("suggested_skill_click",{skill:t})}},t.prototype.removeSelectedData=function(t){var i=this;event.stopPropagation();var o=this.widgetRef.stepData.skills.findIndex(function(e){return e.skill==i.widgetRef.fyfStepConfig.skills.selectedSkill[t]}),n="removed skill "+this.widgetRef.fyfStepConfig.skills.selectedSkill[t];if(e.prototype.addSelectionRemovalSronly.call(this,n),setTimeout(function(){i.widgetRef.fyfStepConfig.skills.selectedSkill.splice(t,1),i.focusSearch()},500),-1!=o&&(this.widgetRef.stepData.skills[o].isSkillSelected=!1),this.widgetRef.fyfStepConfig.selected_skills&&this.widgetRef.fyfStepConfig.selected_skills.length){var a=this.widgetRef.fyfStepConfig.selected_skills.findIndex(function(e){return e==i.widgetRef.fyfStepConfig.skills.selectedSkill[t]});-1!=a&&this.widgetRef.fyfStepConfig.selected_skills.splice(a,1)}if(this.widgetRef.fyfStepConfig.typed_skills&&this.widgetRef.fyfStepConfig.typed_skills.length){var a=this.widgetRef.fyfStepConfig.typed_skills.findIndex(function(e){return e==i.widgetRef.fyfStepConfig.skills.selectedSkill[t]});-1!=a&&this.widgetRef.fyfStepConfig.typed_skills.splice(a,1)}},t.prototype.focusSearch=function(){e.prototype.focusSearch.call(this)},t}(i.BaseStepProvider);t.FyfStepSkills=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){
function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-workExperience",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.workExperience={data:{results:[{displayName:"0-3",min:0,max:3},{displayName:"4-8",min:4,max:8},{displayName:"9-14",min:9,max:14},{displayName:"15+",min:15,max:100}]}},t}return __extends(t,e),t.prototype.init=function(){var t=this;this.widgetRef.stepData=this.widgetRef.stepData||{},this.widgetRef.stepData.workExperience=this.workExperience.data.results,this.widgetRef.fyfStepConfig.workExperience={},this.widgetRef.fyfStepConfig.profileData.workExperience=this.widgetRef.fyfStepConfig.profileData.workExperience||{},this.widgetRef.fyfStepConfig.workExperience.selectedExp=this.workExperience.data.results.find(function(e){return e.displayName==(t.widgetRef.fyfStepConfig.profileData.workExperience.displayName||"")}),e.prototype.focusToStepBlock.call(this)},t.prototype.fetchWorkExperience=function(){var e=this;this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeyworkExperience,{}).then(function(t){t&&t.data&&(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.workExperience=t.data)})},t.prototype.handleActions=function(){var e=this.widgetRef.fyfStepConfig.workExperience.selectedExp||{},t=this.widgetRef.fyfStepConfig.profileData.workExperience||{};Object.keys(e).length?e.displayName==t.displayName&&(e="unChanged"):(e=!1,t&&t.displayName&&(e={},this.widgetRef.fyfStepConfig.profileData.workExperience={})),this.handleFyfActions(e)},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.workExperience.selectedExp||"";this.widgetRef.fyfStepConfig.prevStepRef(e)},t}(i.BaseStepProvider);t.FyfStepWorkExperience=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-subCategory",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){var e=JSON.parse(JSON.stringify(this.widgetRef.fyfStepConfig.profileData.subCategories||[]));this.widgetRef.fyfStepConfig.subCategories={},this.widgetRef.fyfStepConfig.subCategories.selectedSubCategories=[],this.widgetRef.fyfStepConfig.subCategories.selectedSubCategories=e,this.getSubCategories()},t.prototype.setSubCategories=function(t){this.widgetRef.unhideLoader(),this.widgetRef.stepData=this.widgetRef.stepData||{},this.widgetRef.stepData.subCategories=this.refineSubCategories(t),this.widgetRef.stepData.subCategories.length?this.widgetRef.noSubCategories=!1:this.widgetRef.fyfStepConfig.showEmptySubCategories?this.widgetRef.noSubCategories=!0:"next"==this.widgetRef.handleEmptyCatFlow?this.widgetRef.fyfStepConfig.funRef(!1):this.widgetRef.fyfStepConfig.prevStepRef(!1),e.prototype.focusToStepBlock.call(this),this.widgetRef.hideLoader()},t.prototype.refineSubCategories=function(e){return e.filter(function(e){return e.subCategory&&e.subCategory.length})},t.prototype.getSubCategories=function(){var e=this;this.widgetRef.unhideLoader();var t={field:"subCategory"};this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeySubCategories,t).then(function(t){t&&t.data&&t.data.subCategory&&(e.setSubCategories(t.data.subCategory),e.widgetRef.hideLoader())})},t.prototype.handleActions=function(){var e=!1,t=this.widgetRef.fyfStepConfig.subCategories.selectedSubCategories||[],i=this.widgetRef.fyfStepConfig.profileData.subCategories||[];if(t.length){if(t.length==i.length){for(var o=0;o<t.length;o++)!function(o){var n=t[o];-1==i.findIndex(function(e){return e==n})&&(e=!0)}(o);t=e?t:"unChanged"}}else t=!1,i&&i.length>0&&(t=[]);this.handleFyfActions(t)},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.subCategories.selectedSubCategories||"";this.widgetRef.fyfStepConfig.prevStepRef(e)},t}(i.BaseStepProvider);t.FyfStepSubCategory=n}),define("v1/fyf-step-provider-factory",["require","exports","./fyf-step-category","./fyf-step-recentTitle","./fyf-step-skills","./fyf-step-workExperience","./fyf-step-location","./fyf-step-locationWithMoreOptions","./fyf-step-contactInfo","./fyf-step-authorise","./fyf-step-contactInfo-v1","./fyf-step-contactInfoWithResume","./fyf-step-subCategory"],function(e,t,i,o,n,a,r,s,l,c,p,d,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function e(){}return e.createProvider=function(e,t,h,u,g,m){return"authorise"===t?new c.FyfStepAuthorise(e,h,u,g,t):"categories"===t?new i.FyfStepCategory(e,h,u,g,t):"recentTitle"===t?new o.FyfStepRecentTitle(e,h,u,g,t,m):"skills"===t?new n.FyfStepSkills(e,h,u,g,t,m):"workExperience"===t?new a.FyfStepWorkExperience(e,h,u,g,t):"preferredLocation"===t?new r.FyfStepLocation(e,h,u,g,t,m):"preferredLocationWithMoreOptions"===t?new s.FyfStepLocationWithMoreOptions(e,h,u,g,t,m):"contactInfo"===t?new l.FyfStepContactInfo(e,h,u,g,t):"contactInfoWithSocialOptions"===t?new p.FyfStepContactInfoV1(e,h,u,g,t):"contactInfoWithResume"===t?new d.FyfStepContactInfoWithResume(e,h,u,g,t):"subCategories"===t?new f.FyfStepSubCategory(e,h,u,g,t):void 0},e}();t.FyfStepProvideFactory=h}),define("v1/ph-find-your-fit-data",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.profileData={profile:{categories:[],recentTitle:"",skills:[],workExperience:{displayName:"",min:"",max:""},preferedLocation:[],firstName:"",email:"",phone:""},editType:"mergeProfile"}});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-find-your-fit-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.FindYourFitService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-find-your-fit",["require","exports","aurelia-framework","ph-common","./ph-find-your-fit-config","./ph-find-your-fit-service","./ph-find-your-fit-data","./fyf-step-provider-factory","aurelia-event-aggregator"],function(e,t,i,o,n,a,r,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c="ph-find-your-fit-v1",p="next_click",d="previous_click",f="registration_submit",h={find_your_fit_flow:"find_your_fit"},u="suggestions",g={categories:"selectedCategories",subCategories:"selectedSubCategories",recentTitle:"selectedTitle",skills:"selectedSkill",workExperience:"selectedExp",contactInfo:"information"},m=function(e){function t(t,i,o,n,a,s,l){var m=e.call(this,t,i,c)||this;return m.element=t,m.commonService=i,m.findYourFitService=o,m.eventAggregator=n,m.a11yAutoComplete=a,m.localStorage=s,m.geoLocationService=l,m.fileCtx={},m.isLoggedIn=!1,m.isUserSocialLoggedIn=!1,m.isAnonymousUser=!1,m.isActiveSession=!1,m.stepsData=[],m._tempStepData=[],m.profileData=r.profileData,m._tempProfileData={},m.stepPosition=0,m.currentStep=0,m.fyfStatus=!1,m.isLastStep=!1,m.isFirstStepClick=!1,m.stepStatus=0,m.showOnRevelantExp=!0,m.isProfileSaveFails=!1,m.isShiftKey=!1,m.isTabKey=!1,m.stepLandingInfo={},m.fyfProvider={},m.nonEditableFields={},m.isErrorMsgReqd=!1,m.fyfInfo={},m.showErrorMsg=!1,m.isProfileJobsAvailable=!1,m.profileRecomDataObj=!0,m.userActions=!1,m.isSiteLogin=!1,m.recentStepType="",m.fyfSocialOptions=[],m.isClickOption=!1,m.fyfSteps={},m.ProfileSaveFailsMsg=!1,m.handleEmptyCatFlow="next",m.noCategories=!1,m.disableSocialLogin=!1,m.disableContactInfo=!1,m.disableNextButton=!1,m.removeSkipButton=!1,m.showSkipInCandidateLogin=!1,m.enableContactInfoWithResume=!1,m.disableUploadResumeFlow=!1,m.resumeFileSizeExceeds=!1,m.resumeFileUnsupported=!1,m.trackingLocally=!0,m.subscriptions=[],m.contactInfoV1Enabled=!1,m.resultUpdated=!1,m.isCandidateHomeEnabled=!0,m.selectionRemovalSrText="",m.selectionRemovalSronly=!1,m.gdprConsent=!1,m.acceptTerms=!1,m.termsError=!1,m.piiConsentError=!1,m.piiConsentContext={},m.consentPrefill=!0,m.preferredName=!1,m.uniformGdpr=!1,m.hideOptIn=!1,m.gdprPreCheck=!1,m.isEmailValidationEnabled=!1,m.isVerificationEmailSent=!1,m.isVerifiedUser=!1,m.isResend=!1,m.isShowValidationSuccessPopup=!1,m.maxFileSize=2,m.showContactInfoScreen=!0,m.showLoginScreen=!1,m.saveDetailsLoader=!1,m.saveDetailsDialog=!1,m.popupType=!1,m.isResumeUploaded=!1,m.errorMsgTimeout=void 0,m.resumeDeleted=!1,m.prevStep=function(t,i){var o={stepName:m.fyfStepConfig.stepType};if(e.prototype.trackWidgetClick.call(m,d,o),m.handleStepDestory(),m.recentStepType="",m.handleEmptyCatFlow="prev",0==m.currentStep){var n=m.profileData&&m.profileData.profile&&m.profileData.profile.flowType||m.userActions||m.isUserSocialLoggedIn?"Edit":"Start";m.eventAggregator.publish("getUserProfileData",{context:h.find_your_fit_flow,isFirstStep:n}),m.commonService.raiseCustomEvent("getUserProfileData",{context:h.find_your_fit_flow,isFirstStep:n})}else e.prototype.unhideLoader.call(m),t&&t.hasOwnProperty("email")&&!m.isProfileSaveFails?(m.profileData.profile.firstName=t.firstName,m.profileData.profile.email=t.email,m.profileData.profile.phone=t.phone,m.profileData.profile.lastName=t.lastName,m.profileData.profile.resumeName=t.resumeName,m.profileData.profile.resumeIdentifier=t.resumeIdentifier):t&&(m.profileData.profile[m.fyfStepConfig.stepType]=t),i&&"true"==i?m.profileData.profile.relevantExperience=!0:i&&"false"==i&&(m.profileData.profile.relevantExperience=!1),m.currentStep>0&&(m.currentStep--,m.stepStatus--,m.handleNestedView()),m.hideLoader()},m.updatingEventObjWithSelectedValues=function(e){var t=m.fyfStepConfig.stepType;"preferredLocationWithMoreOptions"==t||"preferredLocation"==t?(e.selected_values=e.selected_values||{},e.selected_values.selectedLocations=m.fyfStepConfig.locationOptions&&m.fyfStepConfig.locationOptions.selectedOption&&"currentLocation"==m.fyfStepConfig.locationOptions.selectedOption.name?m.fyfStepConfig.currentLocation:m.fyfStepConfig[t],m.fyfStepConfig.locationOptions&&m.fyfStepConfig.locationOptions.selectedOption&&(e.selected_values.selectedOption=m.fyfStepConfig.locationOptions.selectedOption)):e.selected_values="contactInfo"==t||"contactInfoWithResume"==t?m.fyfStepConfig.contactInfo[g.contactInfo]:m.fyfStepConfig[t][g[t]]},m.handleFyfActions=function(t,i){e.prototype.unhideLoader.call(m),m.handleStepDestory(),m.handleEmptyCatFlow="next",m.recentStepType="",m.piiConsentError=!1,m.isLastStep=m.currentStep==m.stepsData.length-1;var o=m.fyfStepConfig.stepType;"recentTitle"==o&&m.isLastStep&&"false"==i&&"workExperience"==m._tempStepData[m._tempStepData.length-1].stepType&&(m.isLastStep=!1);var n={stepName:m.fyfStepConfig.stepType};m.updatingEventObjWithSelectedValues(n);var a={};if(a.editType="mergeProfile",a.profile={},!t&&(!m.isLastStep||m.isLastStep&&"contactInfo"!=o&&"contactInfoWithResume"!=o)&&(!i||"noSelection"==i)&&(!t&&!i||!m.ProfileSaveFailsMsg))return e.prototype.trackWidgetClick.call(m,p,n),m.isLastStep&&"contactInfo"!=o&&"contactInfoWithResume"!=o?(m.currentStep=0,m.stepStatus=0,m.eventAggregator.publish("getUserProfileData",{context:h.find_your_fit_flow,isLastStep:m.isLastStep}),m.commonService.raiseCustomEvent("getUserProfileData",{context:h.find_your_fit_flow,isLastStep:m.isLastStep})):(m.currentStep++,m.stepStatus++),m.handleNestedView(),void m.hideLoader();if("contactInfo"!=o&&"contactInfoWithSocialOptions"!=o&&"contactInfoWithResume"!=o||setTimeout(function(){m.profileRecomDataObj=!0},1e3),m.userActions=!0,m.profileRecomDataObj=!1,m.fyfStepConfig["typed_"+o]&&(m.profileData.profile["typed_"+o]=m.fyfStepConfig["typed_"+o]),m.fyfStepConfig["selected_"+o]&&(m.profileData.profile["selected_"+o]=m.fyfStepConfig["selected_"+o]),m.fyfStepConfig["typed_"+o]&&m.fyfStepConfig["typed_"+o].length||m.fyfStepConfig["selected_"+o]&&m.fyfStepConfig["selected_"+o].length){var r={stepName:o};if(m.fyfStepConfig["selected_"+o]&&m.fyfStepConfig["selected_"+o].length){m.fyfStepConfig["selected_"+o]=m.fyfStepConfig["selected_"+o].map(function(e){return e.toLowerCase()});var s=Array.from(new Set(m.fyfStepConfig["selected_"+o]));"skills"==o&&s.forEach(function(e,t){m.fyfStepConfig.profileData.skills&&-1!=m.fyfStepConfig.profileData.skills.indexOf(e)&&s.splice(t,1)}),s.length&&(r.selected_values=s)}else delete r.selected_values;if(m.fyfStepConfig["typed_"+o]&&m.fyfStepConfig["typed_"+o].length){m.fyfStepConfig["typed_"+o]=m.fyfStepConfig["typed_"+o].map(function(e){return e.toLowerCase()});var l=Array.from(new Set(m.fyfStepConfig["typed_"+o]));if("skills"==o){var c=!(!r.selected_values||!r.selected_values.length);l.forEach(function(e,t){m.fyfStepConfig.profileData.skills&&-1!=m.fyfStepConfig.profileData.skills.indexOf(e)&&l.splice(t,1),c&&l[t]&&l[t].length&&-1!=r.selected_values.indexOf(e)&&l.splice(t,1)})}l.length&&(r.typed_values=l)}else delete r.typed_values;Object.keys(r).length>1&&e.prototype.trackWidgetClick.call(m,u,r)}if(i){var d=!("true"==i);m.showOnRevelantExp=d,a.profile.relevantExperience=!d,m.profileData.profile.relevantExperience=!d,m.recentStepType=m.fyfStepConfig.stepType}if(m.isLastStep&&(t.firstName||t.email)){var g={email:t.email,firstName:t.firstName};a.profile={},a.profile.firstName=m.profileData.profile.firstName=t.firstName,a.profile.lastName=m.profileData.profile.lastName=t.lastName||"",t.lastName&&(g.lastName=t.lastName),t.resumeIdentifier&&(a.profile.resumeIdentifier=t.resumeIdentifier,a.fyfVersion2=!0),m.resumeDeleted&&(a.profile.resumeName=t.resumeName,a.profile.resumeUrl=t.resumeUrl,a.profile.resumeBucketId=t.resumeBucketId,a.profile.resumeRelativePath=t.resumeRelativePath),m.preferredName&&t.preferredName&&(a.profile.preferredName=m.profileData.profile.preferredName=t.preferredName,g.preferredName=t.preferredName),a.profile.email=m.profileData.profile.email=t.email,(t.phone&&t.phone.length>0||m.profileData.profile.phone)&&(a.profile.phone=m.profileData.profile.phone=t.phone,g.phone=t.phone),a.profile.finalStep=!0,m.profileData.profile.finalStep=!0,e.prototype.trackWidgetClick.call(m,f,g)}else t&&"unChanged"!=t&&"false"!=t||(t="unChanged"==t?m.profileData.profile[m.fyfStepConfig.stepType]:""),a.profile[m.fyfStepConfig.stepType]=t,m.profileData.profile[m.fyfStepConfig.stepType]=t,m.isLastStep?(a.profile.finalStep=!0,m.profileData.profile.finalStep=!0,e.prototype.trackWidgetClick.call(m,f,n)):(a.profile.finalStep=!1,m.profileData.profile.finalStep=!1,e.prototype.trackWidgetClick.call(m,p,n));"preferredLocationWithMoreOptions"==o&&m.fyfStepConfig&&m.fyfStepConfig.locationOptions&&m.fyfStepConfig.locationOptions.selectedOption&&(a.profile.locationOption=m.fyfStepConfig.locationOptions.selectedOption),m._tempProfileData.profile=m.getClonedObj(m.profileData.profile),!m.isLoggedIn||m.isLoggedIn&&m.isAnonymousUser&&!m.isActiveSession&&!m.isFirstStepClick?m.freshProfileCreation(a):(a.stepName=o,m.updateProfileData(a)),"contactInfoWithResume"==m.fyfStepConfig.stepType&&(m.showLoginScreen?(m.showLoginScreen=!1,m.showContactInfoScreen=!0):setTimeout(function(){m.focusToStepBlock()},250))},m.handleProfileUpdateSyncFromBot=function(e){var t=e&&e.detail;Object.keys(t).length&&m.isLoggedIn&&m.fetchProfileData()},m.handleSocialSkip=function(e,t,i){e&&e.length-1==t&&m.handleSkip(i)},m.handleSocialNextStep=function(e){m.handleNextKeyup(e)},m.handleEmailValidationEscape=function(e){"Escape"!=e.key&&27!==e.keyCode&&27!==e.which||m.closeEmailValidationPopup()},m}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),e.prototype.unhideLoader.call(this),this.preferredName=this.commonService.getSiteSettings("preferredName"),this.contactInfoFields=this.commonService.getSiteSettings("contactInfoFields"),this.getPiiConsentData(),this.subscribeToEventForExternalDepends(),0==this.commonService.getSiteSettings("consentPrefill")&&(this.consentPrefill=!1);var i=this.commonService.getSiteSettings("navItems");this.isCandidateHomeEnabled=i&&i.candidateHome,this.subscriptions.push(this.eventAggregator.subscribe("ph:candidateLoggedinEvent",function(e){t.profileData.profile=e})),this.subscriptions.push(this.eventAggregator.subscribe("getUserProfileData",function(e){"upload_resume"==e.context&&t.fetchValidateJwtToken()})),this.fetchValidateJwtToken(),this.fyfInfo&&this.fyfInfo.hasOwnProperty("isOptInChoosen")||(this.fyfInfo||(this.fyfInfo={}),this.fyfInfo.isOptInChoosen=e.prototype.getQueryParam.call(this,"optIn")||!1),this.subscriptions.push(this.eventAggregator.subscribe("ph:profileRecomData",function(e){e.jobs&&e.jobs.length?t.isProfileJobsAvailable=!0:t.isProfileJobsAvailable=!1,t.profileRecomDataObj=!0})),this.maxFileSize=this.getResumeFileSize()||2,this.eventAggregator.publish("getUserProfileData",{context:h.find_your_fit_flow}),this.commonService.raiseCustomEvent("getUserProfileData",{context:h.find_your_fit_flow}),window&&window.phApp&&window.phApp.sessionParams&&window.phApp.sessionParams.validationStatus&&200==window.phApp.sessionParams.validationStatus&&"findYourFit"===window.phApp.sessionParams.validationContext&&(this.isShowValidationSuccessPopup=!0,this.findYourFitService.makeDDORequest(c,n.WidgetConfig.v1.ddoKeyRemoveValidationDataFromSession,{}).then(function(e){}))},t.prototype.checkStepLanding=function(){var e,t=this.localStorage.getItem("fyfStepLandInfo");this.isUserSocialLoggedIn&&t?e=t.success&&t.success.value:t&&(e=t.failure&&t.failure.value),e&&(this.currentStep=this.stepsData.findIndex(function(t){return t.stepType==e})),this.localStorage.removeItem("fyfStepLandInfo")},t.prototype.getPiiConsentData=function(){var e=this,t=n.WidgetConfig.v1.ddoKeyGetPiiConsentConfig;this.findYourFitService.makeDDORequest(c,t).then(function(i){if(e.raiseDDOFailureEvent(i,"ddoKey"),i&&i.status&&"success"==i.status&&i.data)window.phApp&&window.phApp.ddo&&(window.phApp.ddo[t]=i),e.piiConsentData=i.data,e.handleConsentData();else{var o=e.commonService.getSiteSettings("piiConsentConfig");o&&(e.piiConsentData=JSON.parse(JSON.stringify(o)),e.handleConsentData())}})},t.prototype.handleConsentData=function(){this.piiConsentData&&this.piiConsentData.length&&(this.piiConsentContext={},this.piiConsentContext.consentData=this.piiConsentData,this.piiConsentContext.submit=this.handleActions.bind(this),this.piiConsentContext.widgetRef=this)},t.prototype.fetchValidateJwtToken=function(t){var i=this;this.findYourFitService.makeDDORequest(c,n.WidgetConfig.v1.ddoKeyValidateJwtToken,{}).then(function(e){i.raiseDDOFailureEvent(e,n.WidgetConfig.v1.ddoKeyValidateJwtToken),e.data&&(i.isLoggedIn=e.data.isValidToken,i.isUserSocialLoggedIn=e.data.isSocialLogin&&i.isLoggedIn,i.isAnonymousUser=e.data.isAnonymous,i.isActiveSession=e.data.isActiveSession,i.isSiteLogin=e.data.isSiteLogin,i.isAnonymousUser&&i.isActiveSession||i.isUserSocialLoggedIn||i.isSiteLogin?i.fetchProfileData():(i.userActions=!1,i.profileData.profile={},i._tempProfileData.profile={},i.fyfStepConfig={},i.fyfStepConfig.profileData={},i.fetchStepsList(),i.isProfileJobsAvailable=!1))},function(t){new Error(t),i.raiseDDOErrorEvent(t,n.WidgetConfig.v1.ddoKeyValidateJwtToken),e.prototype.hideLoader.call(i)})},t.prototype.fetchStepsList=function(){var t,i=this;if(this.fyfSteps&&this.fyfSteps.steps&&this.fyfSteps.steps.length)try{t=this.getClonedObj(this.fyfSteps.steps),this.fetchingFyfRootKeyVAlues(this.fyfSteps),this.fetchStepsData(t)}catch(e){t=void 0,o.logger.error(e)}this.findYourFitService.makeDDORequest(c,n.WidgetConfig.v1.ddoKeyStepConfig,{}).then(function(e){i.raiseDDOFailureEvent(e,n.WidgetConfig.v1.ddoKeyStepConfig),t||(e&&e.data&&Array.isArray(e.data)?i.fetchStepsData(e.data):e&&e.data&&!Array.isArray(e.data)&&e.data.steps?(i.fetchingFyfRootKeyVAlues(e.data),i.fetchStepsData(e.data.steps)):i.handleError())},function(t){new Error(t),i.raiseDDOErrorEvent(t,n.WidgetConfig.v1.ddoKeyStepConfig),e.prototype.hideLoader.call(i)})},t.prototype.fetchingFyfRootKeyVAlues=function(e){this.fyfSocialOptions=this.getClonedObj(e.socialOptions)||[],this.disableUploadResumeFlow=!(!e.disableUploadResumeFlow||"true"!=e.disableUploadResumeFlow),this.disableSocialLogin=!(!e.disableSocialLogin||"true"!=e.disableSocialLogin),this.disableContactInfo=!(!e.disableContactInfo||"true"!=e.disableContactInfo),this.disableNextButton=!(!e.disableNextButton||"true"!=e.disableNextButton),this.removeSkipButton=!(!e.removeSkipButton||"true"!=e.removeSkipButton),this.showSkipInCandidateLogin=!(!e.showSkipInCandidateLogin||"true"!=e.showSkipInCandidateLogin),this.enableContactInfoWithResume=!(!e.enableContactInfoWithResume||"true"!=e.enableContactInfoWithResume),this.enableContactInfoWithResume&&(this.disableContactInfo=!0),this.gdprConsent=!(!e.gdprConsent||"true"!=e.gdprConsent&&"partial"!=e.gdprConsent&&"uniform"!=e.gdprConsent),"partial"==e.gdprConsent&&(this.fyfInfo.isOptInChoosen=!0,this.hideOptIn=!0),e.gdprConsent&&"precheck"==e.gdprConsent&&(this.gdprConsent=!0,this.acceptTerms=!0,this.gdprPreCheck=!0,this.profileData.profile&&(this.profileData.profile.privacyConsent=!0))},t.prototype.fetchStepsData=function(t){var i=this,o={stepType:"authorise",skip:"loggedIn"},n={stepType:"contactInfo",skip:"loggedIn"},a={stepType:"contactInfoWithResume",skip:"loggedIn"},r=[];t.forEach(function(e,t){e.isDisable||(r.push(e),"contactInfoWithSocialOptions"==e.stepType&&(i.isCandidateHomeEnabled&&r.pop(),!i.isCandidateHomeEnabled&&(i.contactInfoV1Enabled=!0)))}),t=r,this.stepsData=this.getClonedObj(t)||[],this._tempStepData=this.getClonedObj(t)||[],this.isCandidateHomeEnabled&&(this.disableSocialLogin=!0),this.disableSocialLogin||(this.stepsData.unshift(o),this._tempStepData.unshift(o)),this.disableContactInfo||(this.stepsData.push(n),this._tempStepData.push(n)),this.enableContactInfoWithResume&&(this.stepsData.push(a),this._tempStepData.push(a)),this.handleStepProcess(),this.checkStepLanding(),this.handleNestedView(),e.prototype.hideLoader.call(this)},t.prototype.fetchStepPosition=function(){var t=this;this.findYourFitService.makeDDORequest(c,n.WidgetConfig.v1.ddokeyStepPosition,{}).then(function(e){t.raiseDDOFailureEvent(e,n.WidgetConfig.v1.ddokeyStepPosition),e&&e.data&&(t.stepPosition=e.data,t.fetchStepsList())},function(i){new Error(i),t.raiseDDOErrorEvent(i,n.WidgetConfig.v1.ddokeyStepPosition),e.prototype.hideLoader.call(t)})},t.prototype.fetchProfileData=function(){var t=this;this.findYourFitService.makeDDORequest(c,n.WidgetConfig.v1.ddoKeyProfileData,{}).then(function(e){if(t.raiseDDOFailureEvent(e,n.WidgetConfig.v1.ddoKeyProfileData),e&&Object.keys(e).length){e.hasOwnProperty("verifiedEmails")&&e.verifiedEmails&&e.verifiedEmails.includes(e.email)&&(t.isVerifiedUser=!0),e.profile?t.profileData=e:t.profileData.profile=e,t._tempProfileData=t.getClonedObj(t.profileData),t.profileData&&t.profileData.profile&&t.profileData.profile.optIn&&(t.fyfInfo.isOptInChoosen=t.profileData.profile.optIn),t.fetchStepsList();var i=e.nonEditableFields||[];t.piiConsentData&&t.piiConsentData.length&&t.consentPrefill&&t.piiConsentData.forEach(function(e){t.profileData&&t.profileData[e.type]&&(e.isChecked=!0)}),t.profileData&&t.profileData.privacyConsent&&(t.acceptTerms=!0),i.forEach(function(e){t.nonEditableFields[e]=e})}},function(i){new Error(i),t.raiseDDOErrorEvent(i,n.WidgetConfig.v1.ddoKeyProfileData),e.prototype.hideLoader.call(t)})},t.prototype.handleStepProcess=function(){var e=this,t=[],i=0;this.stepsCount=0,this.isLastStep=!1,this.isUserSocialLoggedIn||this.isSiteLogin?(this.stepsData.forEach(function(o,n){"loggedIn"!=o.skip?t.push(o):("contactInfo"==o.stepType&&t.push(o),"contactInfoWithResume"==o.stepType&&t.push(o),i++,e.stepsCount++)}),this.isLoggedIn&&(this.currentStep=(this.stepPosition||0)-i,this.currentStep=this.currentStep<0?this.currentStep=0:this.currentStep),this.stepsData=t,this._tempStepData=this.getClonedObj(this.stepsData),this.stepStatus=1):this.stepStatus=0,this.showOnRevelantExp=!(!this.profileData||!this.profileData.profile||this.profileData.profile.relevantExperience)||this.showOnRevelantExp,this.currentStep=this.fyfInfo&&this.fyfInfo.stepPosition?0:this.currentStep},t.prototype.handleNestedView=function(){var e=this,t=[],i=0;if(this.stepsData=this.getClonedObj(this._tempStepData),this.stepsCount=0,this.showOnRevelantExp=(!(this.profileData&&this.profileData.profile&&this.profileData.profile.relevantExperience)||0!=this.stepStatus&&0!=this.currentStep)&&this.showOnRevelantExp,this.stepsData.forEach(function(o,n){"true"!=o.showOnRevelantExp||e.showOnRevelantExp?(t.push(o),"loggedIn"!=o.skip&&e.stepsCount++,o.stepType!=e.recentStepType||e.ProfileSaveFailsMsg||(e.currentStep=e.isUserSocialLoggedIn||e.disableSocialLogin?e.stepsCount:e.stepsCount+1,e.stepStatus=e.disableSocialLogin&&!e.isUserSocialLoggedIn?e.stepsCount:e.stepsCount+1,e.recentStepType="")):i++}),this.stepsData=t,this.currentStep>this.stepsData.length-1)return this.currentStep=0,this.stepStatus=0,this.eventAggregator.publish("getUserProfileData",{context:h.find_your_fit_flow,isLastStep:"true"}),void this.commonService.raiseCustomEvent("getUserProfileData",{context:h.find_your_fit_flow,isLastStep:"true"});this.fyfStatus=!1,this.fyfStepConfig=this.stepsData[this.currentStep]||{},this.fyfStepConfig.profileData=this.profileData&&this.profileData.profile||{},this.fyfStepConfig.funRef=this.handleFyfActions,this.fyfStepConfig.prevStepRef=this.prevStep,this.fyfStepConfig.firstStep=!1,this.ProfileSaveFailsMsg=!1,this.currentStep==this.stepsData.length-1?this.fyfStepConfig.lastStep=!0:(0==this.currentStep&&(this.fyfStepConfig.firstStep=!0),this.fyfStepConfig.lastStep=!1);var o=this.currentStep+1;(o>this.stepsData.length-1||o<0)&&(o=0),this.stepStatus=0==this.stepStatus&&0!=this.currentStep?this.currentStep:this.stepStatus,this.stepLandingInfo={context:"fyf",failure:{key:"stepType",value:this.stepsData[this.currentStep].stepType},fyfFuncRef:this.handleSocialSkip,fyfNextStepFuncRef:this.handleSocialNextStep,optIn:this.fyfInfo.isOptInChoosen},this.contactInfoV1Enabled||(this.stepLandingInfo.success={key:"stepType",value:this.stepsData[o].stepType}),this.fyfSocialOptions&&this.fyfSocialOptions.length&&(this.stepLandingInfo.socialOptions=this.fyfSocialOptions||[]),this.loadStep()},t.prototype.skip=function(){var t={stepName:this.fyfStepConfig.stepType};if("contactInfoWithResume"==this.fyfStepConfig.stepType&&this.showContactInfoScreen&&this.isCandidateHomeEnabled)return e.prototype.trackWidgetClick.call(this,"skip_contact_info",t),void this.switchToLoginScreen();"contactInfoWithResume"==this.fyfStepConfig.stepType&&this.showLoginScreen&&(this.showLoginScreen=!1,this.showContactInfoScreen=!0),e.prototype.trackWidgetClick.call(this,"skip_questions_click",t),this.handleStepDestory(),this.handleEmptyCatFlow="next",this.recentStepType="",this.currentStep==this.stepsData.length-1?(!this.disableUploadResumeFlow||this.disableContactInfo&&!this.enableContactInfoWithResume||(this.fyfInfo.isOptInChoosen=this.profileData.profile.optIn||!1),this.currentStep=0,this.stepStatus=0,this.eventAggregator.publish("getUserProfileData",{context:h.find_your_fit_flow,isLastStep:"true"}),this.commonService.raiseCustomEvent("getUserProfileData",{context:h.find_your_fit_flow,isLastStep:"true"})):(e.prototype.unhideLoader.call(this),this._tempProfileData.profile&&this._tempProfileData.profile[this.fyfStepConfig.stepType]&&!this.isProfileSaveFails&&(this.profileData.profile[this.fyfStepConfig.stepType]=this.getClonedObj(this._tempProfileData.profile[this.fyfStepConfig.stepType])),this.currentStep<this.stepsData.length-1&&(this.currentStep++,this.stepStatus++,this.handleNestedView()),this.hideLoader())},t.prototype.hideLoader=function(){var t=this;setTimeout(function(){e.prototype.hideLoader.call(t)},250)},t.prototype.handleStepDestory=function(){this.fyfProvider.destroy&&this.fyfProvider.destroy()},t.prototype.getClonedObj=function(e){if(e&&"string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e?JSON.parse(JSON.stringify(e)):e},t.prototype.freshProfileCreation=function(t){var i=this;e.prototype.unhideLoader.call(this);var o=t;if(o.flowType=h.find_your_fit_flow,(!this.profileData.profile.hasOwnProperty("optIn")||this.profileData.profile.optIn!=this.fyfInfo.isOptInChoosen)&&(this.profileData.profile.finalStep||!this.disableUploadResumeFlow)){o.profile.optIn=this.fyfInfo.isOptInChoosen||!1,this.profileData.profile.optIn=o.profile.optIn;var a=this.commonService.getSiteSettings("optInPreferences");a&&a.smsTiedWithOptin&&(a.smsOptIn&&(o.profile.smsOptIn=this.profileData.profile.optIn,this.profileData.profile.smsOptIn=this.profileData.profile.optIn),a.singleSmsOptIn&&(o.profile.singleSmsOptIn=this.profileData.profile.optIn,this.profileData.profile.singleSmsOptIn=this.profileData.profile.optIn))}if(o.profile.hasOwnProperty("locationOption")&&(this.profileData.profile.locationOption=o.profile.locationOption),this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(e){e.type&&(o.profile[e.type]=!!e.isChecked)}),o.profile.hasOwnProperty("preferredLocationWithMoreOptions")){var r=o.profile;r.preferredLocation=r.preferredLocationWithMoreOptions,delete r.preferredLocationWithMoreOptions}this.findYourFitService.makeDDORequest(c,n.WidgetConfig.v1.ddoKeyFreshProfileCreation,o).then(function(e){i.raiseDDOFailureEvent(e,n.WidgetConfig.v1.ddoKeyFreshProfileCreation),i.handleProfileResponse(e)},function(t){new Error(t),i.raiseDDOErrorEvent(t,n.WidgetConfig.v1.ddoKeyFreshProfileCreation),e.prototype.hideLoader.call(i)})},t.prototype.updateProfileData=function(t){var i=this;e.prototype.unhideLoader.call(this);var o=t;if(o.flowType=h.find_your_fit_flow,(!this.profileData.profile.hasOwnProperty("optIn")||this.profileData.profile.optIn!=this.fyfInfo.isOptInChoosen)&&(this.profileData.profile.finalStep||!this.disableUploadResumeFlow)){o.profile.optIn=this.fyfInfo.isOptInChoosen||!1,this.profileData.profile.optIn=o.profile.optIn;var a=this.commonService.getSiteSettings("optInPreferences");a&&a.smsTiedWithOptin&&(a.smsOptIn&&(o.profile.smsOptIn=this.profileData.profile.optIn,this.profileData.profile.smsOptIn=this.profileData.profile.optIn),
a.singleSmsOptIn&&(o.profile.singleSmsOptIn=this.profileData.profile.optIn,this.profileData.profile.singleSmsOptIn=this.profileData.profile.optIn))}if(o.profile.hasOwnProperty("locationOption")&&(this.profileData.profile.locationOption=o.profile.locationOption),!this.gdprConsent||this.piiConsentData&&this.piiConsentData.length||!this.profileData.profile.finalStep||(o.profile.privacyConsent=this.acceptTerms,this.profileData.profile.privacyConsent=this.acceptTerms),this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(e){e.type&&(o.profile[e.type]=!!e.isChecked)}),o.profile.hasOwnProperty("preferredLocationWithMoreOptions")){var r=o.profile;r.preferredLocation=r.preferredLocationWithMoreOptions,delete r.preferredLocationWithMoreOptions}this.findYourFitService.makeDDORequest(c,n.WidgetConfig.v1.ddoKeyCiProfileUpdate,o).then(function(e){i.raiseDDOFailureEvent(e,n.WidgetConfig.v1.ddoKeyCiProfileUpdate),i.handleProfileResponse(e)},function(t){new Error(t),i.raiseDDOErrorEvent(t,n.WidgetConfig.v1.ddoKeyCiProfileUpdate),e.prototype.hideLoader.call(i)})},t.prototype.handleProfileResponse=function(t){if(t&&"success"==t.status){if(this.isLastStep&&this.showContactInfoScreen&&"contactInfoWithResume"==this.fyfStepConfig.stepType&&this.isCandidateHomeEnabled)return this.switchToLoginScreen(!0),void e.prototype.hideLoader.call(this);this.isLastStep?(this.currentStep=0,this.stepStatus=0,this.handleNestedView()):(this.currentStep++,this.stepStatus++,this.handleNestedView()),this.eventAggregator.publish("getUserProfileData",{context:h.find_your_fit_flow,isLastStep:this.isLastStep}),this.commonService.raiseCustomEvent("getUserProfileData",{context:h.find_your_fit_flow,isLastStep:this.isLastStep}),this.isFirstStepClick=!0,this.isLoggedIn=!0,this.isProfileSaveFails=!1,this.ProfileSaveFailsMsg=!1}else!t||"failure"!=t.status&&"error"!=t.status&&500!=t.status||(this.isProfileSaveFails=!0,this.ProfileSaveFailsMsg=!0,this.isProfileJobsAvailable||(this.profileRecomDataObj=!0),this.isLastStep?(delete this.profileData.profile.firstName,delete this.profileData.profile.email,delete this.profileData.profile.phone):(delete this.profileData.profile[this.fyfStepConfig.stepType],this.recentStepType&&this.recentStepType.length&&delete this.profileData.profile.relevantExperience),this.focusFailureMessage());e.prototype.hideLoader.call(this)},t.prototype.focusToStepBlock=function(){var e=this;setTimeout(function(){var t=e.element.querySelector(".ph-common-slection-area");t&&(t.scrollTop=t.scrollHeight);var i=e.element.querySelector(".ph-a11y-fyf-step-block");if(i)return i.focus(),i.setActive&&i.setActive(),document.activeElement===i},500)},t.prototype.focusFailureMessage=function(){var e,t=this;setTimeout(function(){(e=t.element.querySelector(".ph-error-msg"))&&e.focus()},250)},t.prototype.loadStep=function(){var t=this;if(this.fyfProvider=s.FyfStepProvideFactory.createProvider(this.element,this.fyfStepConfig.stepType,c,"v1",this,this.a11yAutoComplete),this.fyfProvider){if(this.fyfProvider.init(),this.fyfStepConfig.selected_skills=[],this.fyfStepConfig.typed_skills=[],this.fyfStepConfig.selected_recentTitle=[],this.fyfStepConfig.typed_recentTitle=[],!this.isLastStep){var i=this.fyfStepConfig.stepType;e.prototype.trackWidgetClick.call(this,"fyf_step_loaded",{step:i})}var o=this.element.querySelector(".phs-step-count-block");if(o){var n=this.element.querySelector(".phs-aseertive");n&&!this.stepsData[this.currentStep].skip?setTimeout(function(){var e=t.element.querySelector(".ph-a11y-heading");n.innerHTML=e?o.innerText+" "+e.innerText:o.innerText,setTimeout(function(){n.innerHTML=""},1500)},300):n&&setTimeout(function(){var e=t.element.querySelector(".ph-a11y-heading");e&&(n.innerHTML=e.innerText),setTimeout(function(){n.innerHTML=""},1500)},300)}}},t.prototype.subscribeToEventForExternalDepends=function(){document.addEventListener("ph:site:fyfProfileUpdate",this.handleProfileUpdateSyncFromBot,!0)},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()}),document.removeEventListener("ph:site:fyfProfileUpdate",this.handleProfileUpdateSyncFromBot,!0)},t.prototype.makeDdoRequest=function(t,i,o){var n=this;return new Promise(function(a,r){n.findYourFitService.makeDDORequest(t,i,o).then(function(e){n.raiseDDOFailureEvent(e,i),a(e)},function(t){new Error(t),n.raiseDDOErrorEvent(t,i),e.prototype.hideLoader.call(n)})})},t.prototype.raiseDDOFailureEvent=function(t,i){if(i!=n.WidgetConfig.v1.ddoKeyValidateJwtToken&&t&&t.status&&"success"!=t.status&&200!=t.status){var o={stepName:this.fyfStepConfig&&this.fyfStepConfig.stepType||""};o.ddoKey=i,o.response=t,e.prototype.trackWidgetClick.call(this,"ddo_failure",o)}},t.prototype.raiseDDOErrorEvent=function(t,i){var o={stepName:this.fyfStepConfig&&this.fyfStepConfig.stepType||""};o.ddoKey=i,o.error=t,e.prototype.trackWidgetClick.call(this,"ddo_error",o)},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},t.prototype.handleActions=function(){this.fyfProvider&&this.fyfProvider.handleActions&&this.fyfProvider.handleActions()},t.prototype.handlePrevStep=function(){this.fyfProvider&&this.fyfProvider.handlePrevStep&&this.fyfProvider.handlePrevStep()},t.prototype.fetchData=function(e){this.fyfProvider&&this.fyfProvider.fetchData&&this.fyfProvider.fetchData(e)},t.prototype.handleFocus=function(e){this.fyfProvider&&this.fyfProvider.handleFocus&&this.fyfProvider.handleFocus(e)},t.prototype.populateSelectedData=function(e,t){this.fyfProvider&&this.fyfProvider.populateSelectedData&&this.fyfProvider.populateSelectedData(e,t)},t.prototype.highlightSelectedData=function(e){this.fyfProvider&&this.fyfProvider.highlightSelectedData&&this.fyfProvider.highlightSelectedData(e)},t.prototype.hideDropDown=function(e){this.fyfProvider&&this.fyfProvider.hideDropDown&&this.fyfProvider.hideDropDown(e)},t.prototype.selectSuggestions=function(e,t){this.fyfProvider&&this.fyfProvider.selectSuggestions&&this.fyfProvider.selectSuggestions(e,t)},t.prototype.handleActionOutsideScope=function(e){this.fyfProvider&&this.fyfProvider.handleActionOutsideScope&&this.fyfProvider.handleActionOutsideScope(e)},t.prototype.handleBlur=function(){this.fyfProvider&&this.fyfProvider.handleBlur&&this.fyfProvider.handleBlur()},t.prototype.removeSelectedData=function(e){this.fyfProvider&&this.fyfProvider.removeSelectedData&&this.fyfProvider.removeSelectedData(e)},t.prototype.clearSearch=function(){this.fyfProvider&&this.fyfProvider.clearSearch&&this.fyfProvider.clearSearch()},t.prototype.focusSearch=function(){this.fyfProvider&&this.fyfProvider.focusSearch&&this.fyfProvider.focusSearch()},t.prototype.handleSkip=function(e){if(!this.isTabKey||!this.isShiftKey){var t=this.element.querySelector(".ph-a11y-skip");return t?(t.focus(),document.activeElement===t):void 0}},t.prototype.handleNextKeyup=function(e){return e&&(this.isTabKey=9===e.which,this.isShiftKey=e.shiftKey),!0},t.prototype.disableJobTitle=function(){this.fyfProvider&&this.fyfProvider.disableJobTitle&&this.fyfProvider.disableJobTitle()},t.prototype.fieldValidation=function(e){this.fyfProvider&&this.fyfProvider.fieldValidation&&this.fyfProvider.fieldValidation(e)},t.prototype.getFieldOptions=function(e){var t="";switch(e){case"skills":return t=this.fyfStepConfig.skills.value||"",this.isClickOption?(this.stepData.skills=[],this.isClickOption=!1,this.stepData.skills):t.length?this.fyfProvider.fetchData():(this.stepData.skills=[],this.stepData.skills);case"recentTitles":return t=this.fyfStepConfig.recentTitle.value||"",this.fyfStepConfig.isClickOption?(this.stepData.recentTitles=[],this.fyfStepConfig.isClickOption=!1,this.stepData.recentTitles):t.length?this.fyfProvider.fetchData():(this.stepData.recentTitles=[],this.stepData.recentTitles);case"locations":return t=this.fyfStepConfig.preferredLocationValue||"",this.isClickOption?(this.stepData.locations=[],this.isClickOption=!1,this.stepData.locations):t.length?this.fyfProvider.fetchData():(this.stepData.locations=[],this.stepData.locations)}},t.prototype.setFieldValue=function(e,t){var i=this;switch(e){case"skills":var o;if(this.stepData.skills.length&&this.stepData.skills[t]){if(o=this.stepData.skills[t].skill,this.fyfStepConfig[e].value=this.stepData.skills[t].skill,-1==this.fyfStepConfig[e].selectedSkill.indexOf(o.toLowerCase())){this.fyfStepConfig[e].selectedSkill.push(o),this.fyfStepConfig.selected_skills.push(o);var n=o+" skill selected";this.fyfProvider.addSelectionRemovalSronly(n),this.fyfProvider.focusSearch(),setTimeout(function(){i.fyfStepConfig.skills.value=""},150);var a=this.stepData.suggestedSkills.findIndex(function(e){return e.skill.toLowerCase()==o.toLowerCase()});-1!=a&&this.stepData.suggestedSkills.splice(a,1)}this.fyfProvider.handleInputFieldLength()}else if(this.fyfStepConfig[e].value.length&&-1==t){var r=this.fyfStepConfig.skills.value,s=!1;if(this.stepData.skills.length)for(var l=this.stepData.skills,c=0,p=l;c<p.length;c++){var d=p[c];d.skill.toLowerCase()===r.toLowerCase()&&(this.fyfStepConfig.selected_skills.push(r),s=!0)}if(!s){var f=void 0,h=void 0;this.fyfStepConfig.selected_skills&&this.fyfStepConfig.selected_skills.length&&(this.fyfStepConfig.selected_skills=this.fyfStepConfig.selected_skills.map(function(e){return e.toLowerCase()}),-1!=this.fyfStepConfig.selected_skills.indexOf(r.toLowerCase())&&(f=!0)),this.fyfStepConfig.profileData.skills&&this.fyfStepConfig.profileData.skills.length&&(this.fyfStepConfig.profileData.skills=this.fyfStepConfig.profileData.skills.map(function(e){return e.toLowerCase()}),-1!=this.fyfStepConfig.profileData.skills.indexOf(r)&&(h=!0)),f||h||this.fyfStepConfig.typed_skills.push(r)}if(-1==this.fyfStepConfig[e].selectedSkill.indexOf(r)){this.fyfStepConfig[e].selectedSkill.push(r);var n=r+" skill selected";this.fyfProvider.addSelectionRemovalSronly(n),this.fyfProvider.focusSearch(),setTimeout(function(){i.fyfStepConfig.skills.value=""},150);var a=this.stepData.suggestedSkills.findIndex(function(e){return e.skill.toLowerCase()==r.toLowerCase()});-1!=a&&this.stepData.suggestedSkills.splice(a,1)}this.fyfProvider.handleInputFieldLength()}break;case"recentTitles":if(this.stepData.recentTitles.length&&this.stepData.recentTitles[t]){var u=this.stepData.recentTitles[t].title;this.fyfStepConfig.recentTitle.value=u,this.fyfProvider.onEnter(this.stepData.recentTitles[t]),this.fyfStepConfig.selected_recentTitle=[u],this.fyfStepConfig.typed_recentTitle=[],this.fyfStepConfig.isClickOption=!0}else if(this.fyfStepConfig.recentTitle.value.length&&-1==t){var g=this.fyfStepConfig[e].value,s=!1;if(this.stepData.recentTitles.length)for(var m=this.stepData.recentTitles,y=0,v=m;y<v.length;y++){var b=v[y];b.title.toLowerCase()===g.toLowerCase()&&(this.fyfStepConfig.selected_recentTitle=[g],this.fyfStepConfig.typed_recentTitle=[],s=!0)}s||(this.fyfStepConfig.typed_recentTitle=[g],this.fyfStepConfig.selected_recentTitle=[])}break;case"locations":this.stepData.locations.length&&this.stepData.locations[t]&&(this.stepData.locations[t].standardlocation,this.fyfProvider.populateSelectedData(this.stepData.locations[t]))}},t.prototype.getActiveIndex=function(e){var t=this,i=-1;switch(e){case"skills":return this.stepData[e].forEach(function(o,n){o.skill==t.fyfStepConfig[e].value&&(i=n)}),this.stepData[e].length&&(this.resultUpdated=!1,setTimeout(function(){t.resultUpdated=!0},0)),i;case"recentTitles":return this.stepData[e].forEach(function(e,o){e.title==t.fyfStepConfig.recentTitle.value&&(i=o)}),this.stepData[e].length&&(this.resultUpdated=!1,setTimeout(function(){t.resultUpdated=!0},0)),i;case"locations":return this.stepData[e].forEach(function(e,o){e.location_display==t.fyfStepConfig.preferredLocationValue&&(i=o)}),this.stepData[e].length&&(this.resultUpdated=!1,setTimeout(function(){t.resultUpdated=!0},0)),i}},t.prototype.clearFieldValue=function(e){},t.prototype.setFocusField=function(e,t){switch(this.focusedField=e,e){case"skills":t?(this.focusedField=void 0,this.stepData.showSkillsDropdown=!1):this.stepData.showSkillsDropdown=!0;break;case"recentTitles":t?(this.focusedField=void 0,this.stepData.showRecentTitleDropdown=!1):this.fyfStepConfig.isClickOption||this.stepData.recentTitles.length||(this.stepData.showRecentTitleDropdown=!0);break;case"locations":t?(this.focusedField=void 0,this.stepData.showLocationDropdown=!1):this.stepData.showLocationDropdown=!0}},t.prototype.setActiveRadioChecked=function(e){var t=this,i=-1;return"workExperience"==this.fyfStepConfig.stepType&&this.fyfStepConfig.workExperience.selectedExp&&this.stepData.workExperience.length&&this.stepData.workExperience.map(function(e,o){e.min==t.fyfStepConfig.workExperience.selectedExp.min&&(i=o)}),"preferredLocationWithMoreOptions"==this.fyfStepConfig.stepType&&this.fyfStepConfig.locationOptions.selectedOption&&this.stepData.locationOptions.length&&this.stepData.locationOptions.map(function(e,o){e.name==t.fyfStepConfig.locationOptions.selectedOption.name&&(i=o)}),i},t.prototype.setRadioCheked=function(e){"workExperience"==this.fyfStepConfig.stepType&&this.stepData.workExperience.length&&-1!=e&&(this.fyfStepConfig.workExperience.selectedExp=this.stepData.workExperience[e]),"preferredLocationWithMoreOptions"==this.fyfStepConfig.stepType&&this.stepData.locationOptions.length&&-1!=e&&(this.fyfStepConfig.locationOptions.selectedOption=this.stepData.locationOptions[e])},t.prototype.termsChanged=function(){this.acceptTerms&&(this.termsError=!1)},t.prototype.sendVerificationEmail=function(){var t=this,i={email:this.profileData.profile.email},o={profile:i,validationContext:"candidateProfile"};e.prototype.unhideLoader.call(this),this.findYourFitService.makeDDORequest(c,n.WidgetConfig.v1.ddoKeySendVerificationEmail,o).then(function(i){i&&i.status&&(t.isEmailValidationEnabled=!0,t.isVerificationEmailSent=t.isEmailValidationEnabled,setTimeout(function(){var i=t.element.querySelector(".ph-a11y-send-email-block"),o=t.element.querySelector(".ph-a11y-modal-area-email-validation .close-popup");t.element.addEventListener("keyup",t.handleEmailValidationEscape),e.prototype.openDialogPopup.call(t,"ph-a11y-modal-area-email-validation",i,o)},100)),e.prototype.hideLoader.call(t)})},t.prototype.resendVerificationEmail=function(){var t=this;this.isResend=!this.isResend;var i={validationContext:"candidateProfile"};this.findYourFitService.makeDDORequest(c,n.WidgetConfig.v1.ddoKeyResendVerificationEmail,i).then(function(i){e.prototype.focusElement.call(t,".ph-a11y-send-email-block",100)})},t.prototype.closeEmailValidationPopup=function(){e.prototype.closeDialogPopup.call(this)},t.prototype.getResumeFileSize=function(){return this.commonService.getSiteSettings("resumeUploadFileSizeLimit")},t.prototype.getGeoLocationPopup=function(){this.fyfProvider&&this.fyfProvider.getGeoLocationPopup&&this.fyfProvider.getGeoLocationPopup()},t.prototype.closeLocationBlockedPopup=function(){this.fyfProvider&&this.fyfProvider.closeLocationBlockedPopup&&this.fyfProvider.closeLocationBlockedPopup()},t.prototype.switchToLoginScreen=function(e){e&&(this.fyfStepConfig&&this.fyfStepConfig.contactInfo&&this.fyfStepConfig.contactInfo.information&&this.fyfStepConfig.contactInfo.information.resumeIdentifier&&delete this.fyfStepConfig.contactInfo.information.resumeIdentifier,this.isFirstStepClick=!0,this.isLoggedIn=!0,this.isProfileSaveFails=!1,this.ProfileSaveFailsMsg=!1),this.fyfProvider&&this.fyfProvider.switchToLoginScreen&&this.fyfProvider.switchToLoginScreen()},t.prototype.closeResumeUploadDetailsPopup=function(e){this.fyfProvider&&this.fyfProvider.closeResumeUploadDetailsPopup&&this.fyfProvider.closeResumeUploadDetailsPopup(e)},t.prototype.resumeUploadTryAgain=function(){this.fyfProvider&&this.fyfProvider.resumeUploadTryAgain&&this.fyfProvider.resumeUploadTryAgain()},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"fyfInfo",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"fyfSteps",void 0),t=__decorate([i.customElement(c),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(m=void 0!==o.CommonService&&o.CommonService)&&m||Object,a.FindYourFitService,l.EventAggregator,"function"==typeof(y=void 0!==o.A11yAutoComplete&&o.A11yAutoComplete)&&y||Object,"function"==typeof(v=void 0!==o.LocalStorageAPI&&o.LocalStorageAPI)&&v||Object,"function"==typeof(b=void 0!==o.GeoLocationService&&o.GeoLocationService)&&b||Object])],t);var m,y,v,b}(o.PhenomWidget);t.FindYourFit=m}),define("text!v1/ph-find-your-fit.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-social-connect-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKeySiteConfig:"siteConfig",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeyMergedProfile:"mergedProfile",ddoKeySaveProfile:"saveProfile",ddoKeyGetNextPage:"getOnBoardingNextStep",ddoKeyGetIMLandingPage:"getIMLandingPage",ddoKeySocialConnectOptions:"socialConnectOptions",ddoKeyCreateConsentProfile:"createConsentProfile",ddoKeyJwtLogout:"jwtLogout"}}});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-social-connect-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.SocialConnectService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-social-connect",["require","exports","aurelia-framework","ph-common","./ph-social-connect-config","./ph-social-connect-service"],function(e,t,i,o,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="ph-social-connect-v1",s=function(e){function t(t,i,o,n,a){var s=e.call(this,t,i,r)||this;return s.element=t,s.commonService=i,s.socialConnectService=o,s.candidateLoginService=n,s.localStorage=a,s.fyfStepLandInfo={},s.piiconsent={},s.providerKey={FACEBOOK:"facebook",MICROSOFT:"microsoft",LINKEDIN:"linkedIn",GOOGLE:"google",LOGIN:"google-signin"},s.submitAction={NEXT:"next",PREV:"prev"},s.enabledSocial=["facebook","linkedin","live","google"],s.connectedState={},s.siteVariant="i",s.isLoggedIn=!1,s.showPopup=!1,s.externalEnabledSocial=[],s.internalEnabledSocial=[],s.providers={},s.redirectUri="",s.openMenuPopup=!1,s.privacyDataConsent=!1,s.privacyConsentReqFlag=!1,s.privacyConsentError=!1,s.privacyConsentPreCheck=!1,s.showLink=!1,s}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),e.prototype.unhideLoader.call(this),"internal"==this.commonService.getSiteType()&&this.getOnBoardingStepData(),this.isPrivacyDataConsentCheckBoxRequired(),this.getEnabledSocial(),this.getConnectedData(),this.handleLoginPage(),this.getJwtToken(),this.privacyConsentError=!1,e.prototype.subscribeToEvent.call(this,"social-logout",function(){t.isLoggedIn=!1}),e.prototype.subscribeToEvent.call(this,"secure-url-click",function(e){t.togglePopup(e),t.redirectUri=e.redirectUri}),this.onBoardingStepId=localStorage.onBoardingStepId;var i=e.prototype.getQueryParam.call(this,"atsRedirectUrl")||"";this.atsInternalLogin=decodeURIComponent(i),window.location.hash&&(this.showLink=!0)},t.prototype.isPrivacyDataConsentCheckBoxRequired=function(){this.privacyConsentReqFlag=this.commonService.getSiteSettings("privacyDataConsentCheckBox"),this.commonService.getSiteSettings("privacyDataConsentPreCheck")&&(this.privacyDataConsent=!0,this.privacyConsentPreCheck=!0)},t.prototype.profileLoginFlowChanged=function(e,t){this.profileLoginFlow=e,this.privacyConsentError=!1},t.prototype.piiconsentChanged=function(e,t){this.piiconsent=e},t.prototype.isPrivacySocialConsentChecked=function(){this.privacyDataConsent&&(this.privacyConsentError=!1)},t.prototype.togglePopup=function(t){var i,o;this.element.querySelector('[data-is-popup-view="true"]')&&(this.showPopup=!this.showPopup,this.showPopup?(e.prototype.trackWidgetClick.call(this,"signIn_click",{}),i=this.element.querySelector(".signin-link"),o=this.element.querySelector(".ph-a11y-sign-in"),e.prototype.openDialogPopup.call(this,"modal",i,o)):(e.prototype.trackWidgetClick.call(this,"signIn_popup_close_click",{}),e.prototype.closeDialogPopup.call(this)))},t.prototype.getOnBoardingStepData=function(){var e=this,t=n.WidgetConfig.v1.ddoKeyGetIMLandingPage;this.socialConnectService.makeDDORequest(r,t).then(function(t){e.onBoardingStepId=t.stepId||""},function(e){o.logger.debug(e)})},t.prototype.onBlurHandler=function(e,t){var i=this;return t?(this.blurTimers&&clearTimeout(this.blurTimers),this.openMenuPopup=!0):(this.blurTimers&&clearTimeout(this.blurTimers),this.blurTimers=setTimeout(function(){i.openMenuPopup=!1},300)),!0},t.prototype.getEnabledSocial=function(){var e=this,t=n.WidgetConfig.v1.ddoKeySocialConnectOptions,i=this.commonService.getSiteType();this.socialConnectService.makeDDORequest(r,t).then(function(t){t&&t.status&&"SUCCESS"==t.status.toUpperCase()?(e.enabledSocial=t.data,(t.data&&!t.data.external||!t.data.external.length)&&t.data[i]&&(e.enabledSocial.external=t.data[i]),e.fyfStepLandInfo.socialOptions&&e.fyfStepLandInfo.socialOptions.length||(e.fyfStepLandInfo.socialOptions=[],e.enabledSocial&&e.enabledSocial.external&&e.enabledSocial.external.forEach(function(t){e.fyfStepLandInfo.socialOptions.push(t.name)})),e.rearrangeSocials()):(e.rearrangeSocials(),o.logger.debug("social config not found"))})},t.prototype.rearrangeSocials=function(){var t=this;setTimeout(function(){var i=t.element.querySelector("#social-container");if(i){for(var o=[],n=i.children.length,a=0;a<n;a++){var r=i.children[0];o[a]=r,i.removeChild(r)}t.enabledSocial.internal.forEach(function(e){var t=o.find(function(t){return t.id==e.name});t&&i.appendChild(t)})}e.prototype.hideLoader.call(t)},250)},t.prototype.handleLoginPage=function(){var e=this.commonService.getSiteSettings("oauth");e?this.providers=e:o.logger.debug("siteconfig data not available...")},t.prototype.getConnectedData=function(){var e=this;this.socialConnectService.makeDDORequest(r,n.WidgetConfig.v1.ddoKeyMergedProfile).then(function(t){t&&t.socialAccounts&&(e.mergedProfile=t,t.socialAccounts.forEach(function(t){e.connectedState[t.social]=t.status}))})},t.prototype.getLoacale=function(){var e=this.commonService.getLocale();return e=e.split("_"),e="/"+e[1]+"/"+e[0]+"/"},t.prototype.getJwtToken=function(){var t=this,i={};this.candidateLoginService.getValidateJwtToken(r,n.WidgetConfig.v1.ddoKeyValidateJwtToken,i).then(function(e){e.data.isValidToken&&(t.isLoggedIn=!e.data.isAnonymous)},function(i){e.prototype.hideLoader.call(t),new Error(i)})},t.prototype.dologin=function(t){var i=e.prototype.getQueryParam.call(this,"qpage")||"";i=decodeURIComponent(i);var n=e.prototype.getQueryParam.call(this,"page")||"",a=this.providers[t],r=this.getLoacale(),s=this.commonService.getLocale(),l=window.location.pathname,c=this.redirectUri||window.location.href;i||(l+=window.location.search);var p={page:l,protocol:window.location.protocol,localePath:r,qpage:i,pagename:n,locale:s,siteVariant:this.siteVariant,rurl:encodeURIComponent(c)},d=new URLSearchParams(window.location.search),f=d.get("RelayState")||"";f&&f.length&&(p.RelayState=f),t==this.providerKey.LOGIN&&(p.so="gs"),a?(a.redirectUriPath=this.commonService.getRootDomain()+a.redirectUri,a.state=JSON.stringify(p),this.redirectToProvider(a,t)):o.logger.debug("provider doesnt exist")},t.prototype.redirectToProvider=function(e,t){var i=this.providerKey,o=e.loginUrl+"?response_type="+e.response_type+"&";switch(t){case i.MICROSOFT:case i.LINKEDIN:o+="client_id="+encodeURIComponent(e.clientId)+"&";break;case i.GOOGLE:case i.LOGIN:o+="client_id="+encodeURIComponent(e.clientId)+"&access_type=offline&approval_prompt=auto&";break;case i.FACEBOOK:o+="client_id="+encodeURIComponent(e.clientId)+"&"}t&&(o+="redirect_uri="+encodeURIComponent(e.redirectUriPath),e.scope&&(o+="&scope="+encodeURIComponent(e.scope)),e.state&&(o+="&state="+encodeURIComponent(e.state)),window.location.href=o)},t.prototype.submit=function(e){if(e==this.submitAction.NEXT||e==this.submitAction.PREV){var t=n.WidgetConfig.v1.ddoKeyGetNextPage,i={};i.stepId=this.onBoardingStepId,i.action=e,this.socialConnectService.makeDDORequest(r,t,i).then(function(e){e.pageUrl?window.location.href=e.pageUrl:o.logger.debug("Error fetching page URL")},function(e){o.logger.debug(e)})}else o.logger.debug("Invalid action :: "+e)},t.prototype.doProfileLogin=function(e){var t=this;if(this.piiconsent&&this.piiconsent.consentData&&this.piiconsent.consentData.length){if(this.piiconsent.checkConsentError&&this.piiconsent.checkConsentError()&&"signUp"==this.profileLoginFlow)return void(this.piiconsent.handleError&&this.piiconsent.handleError())}else if(this.privacyConsentReqFlag&&(this.privacyConsentError=!1,!this.privacyDataConsent&&"signUp"==this.profileLoginFlow))return void(this.privacyConsentError=!0);var i={},o={};i.trait213=e.name,this.commonService.processTrackingEvent("social_login_click",void 0,i),this.redirectPage&&this.redirectPage.length&&(this.redirectUri="/");var a={redirectUri:this.redirectUri,name:e.name};this.fyfStepLandInfo&&this.fyfStepLandInfo.optIn&&(o.optIn=this.fyfStepLandInfo.optIn);var s=this.candidateLoginService.socialLoginUrl(r,e.userType,a,o),l=this.commonService.getSiteSettings("ignoreLinkedInStateParam");if("linkedIn"==e.name&&!l){var c;try{c=JSON.parse(this.getQueryParam(s,"state")||"{}"),Object.keys(c).forEach(function(e){c[e]=decodeURIComponent(c[e])})}catch(e){}this.socialConnectService.makeDDORequest(r,"storeStateParams",{stateParams:c}).then(function(e){e&&e.data?window.location.href=t.setQueryParam(s,"state",e.data):window.location.href=s})}if(this.fyfStepLandInfo&&"fyf"==this.fyfStepLandInfo.context&&this.localStorage.setItem("fyfStepLandInfo",this.fyfStepLandInfo),this.piiconsent&&this.piiconsent.consentData&&this.piiconsent.consentData.length&&"signUp"==this.profileLoginFlow){var p={profile:{}};this.piiconsent.consentData.forEach(function(e){e.type&&(p.profile[e.type]=!!e.isChecked)}),this.socialConnectService.makeDDORequest(r,n.WidgetConfig.v1.ddoKeyCreateConsentProfile,p).then(function(e){s&&(window.location.href=s)})}else("linkedIn"!=e.name||l)&&s&&(window.location.href=s)},t.prototype.getQueryParam=function(e,t){for(var i=e.substr(1),o=i.split("&"),n=0;n<o.length;n++){var a=o[n];if(a=a.split("="),a.length>1&&a[0]==t)return decodeURIComponent(a[1])}},t.prototype.setQueryParam=function(e,t,i){var o=new RegExp("([?&])"+t+"=.*?(&|$)","i"),n=-1!==e.indexOf("?")?"&":"?";return e.match(o)?e.replace(o,"$1"+t+"="+i+"$2"):e+n+t+"="+i},t.prototype.guestLogin=function(){var t=e.prototype.getQueryParam.call(this,"qpage")||"";t=decodeURIComponent(t);var i;if(t.length&&(i=this.commonService.getRootDomain()+t+"&qGuest=true"),t){var o={};o.trait213="guest",this.commonService.processTrackingEvent("social_login_click",void 0,o),window.location.href=i}},t.prototype.doProfileLogout=function(){var t=this;e.prototype.trackWidgetClick.call(this,"logout_click",{}),this.candidateLoginService.doLogout(r,n.WidgetConfig.v1.ddoKeyJwtLogout).then(function(i){i&&"success"==i.status?(t.isLoggedIn=!1,e.prototype.raiseEvent.call(t,"social-logout",{})):o.logger.debug("Failure ",i)})},t.prototype.getLocalWidgetBundle=function(){return{profileCount:"{{profileCount}} previous profiles",profileCountSingler:"{{profileCount}} previous profile",duplicateProfileInfo:"{{profileCount}} duplicate profiles found",facebook:"Sign in with Facebook",google:"Sign in with Google",linkedIn:"Sign in with LinkedIn",mergeCount:"Merge selected ({{profileCount}})","google-sign":"Sign in with Google",duplicateProfileInfoSingler:"{{profileCount}} duplicate profile found"}},t.prototype.handleSkip=function(e,t,i){this.fyfStepLandInfo&&this.fyfStepLandInfo.fyfFuncRef&&this.fyfStepLandInfo.fyfFuncRef(e,t,i)},t.prototype.handleNextKeyup=function(e,t,i){return e&&e.length-1==t&&this.fyfStepLandInfo&&this.fyfStepLandInfo.fyfNextStepFuncRef&&this.fyfStepLandInfo.fyfNextStepFuncRef(i),!0},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"mode",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"fyfStepLandInfo",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"redirectPage",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"profileLoginFlow",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"piiconsent",void 0),t=__decorate([i.customElement(r),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(s=void 0!==o.CommonService&&o.CommonService)&&s||Object,a.SocialConnectService,"function"==typeof(l=void 0!==o.CandidateLoginService&&o.CandidateLoginService)&&l||Object,"function"==typeof(c=void 0!==o.LocalStorageAPI&&o.LocalStorageAPI)&&c||Object])],t);var s,l,c}(o.PhenomWidget);t.SocialConnect=s}),define("text!v1/ph-social-connect.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-import-resume-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"siteConfig"}},t.ProviderKey={DropBox:"dropbox",GoogleDrive:"googledrive",OneDrive:"onedrive",LocalComputer:"localdrive",LocalComputerV2:"localdriveV2",LocalComputerV3:"localdriveV3"},function(e){e[e.Loaded=0]="Loaded",e[e.Errored=1]="Errored",e[e.InProgress=2]="InProgress"}(t.ScriptStatus||(t.ScriptStatus={}))});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r
},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-dropbox",["require","exports","aurelia-framework","./ph-import-resume-config","aurelia-event-aggregator"],function(e,t,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.eventAggregator=e,this.provider={api:"https://www.dropbox.com/static/api/2/dropins.js",devkey:"",clientId:"",scope:[],sid:"dropboxjs",state:null,viewId:"dropbox",errorRequest:5,amd:!1,attr:[{name:"data-app-key",refId:"clientId"}]},this.scriptState=o.ScriptStatus,this.pickerOptions={success:this.handlePickerSuccess.bind(this),cancel:this.handlePickerCanceled.bind(this),linkType:"direct",multiselect:!1,extensions:[".doc",".docx",".pdf",".txt"]},this.eventAggregator=e}return e.prototype.handlePickerSuccess=function(e){var t=e[0],i=t.bytes/1048576,o={fileLocation:t.link,fileName:t.name,proceed:!1};i<=2&&(o.proceed=!0),this.eventAggregator.publish("fileAdded",o)},e.prototype.handlePickerCanceled=function(){this.eventAggregator.publish("fileErrored",{type:"cancel"})},e.prototype.loadScripts=function(e){var t=this,i=this.provider,o=document.getElementsByTagName("head")[0];if(!document.getElementById(i.sid)){var n=document.createElement("script");n.type="text/javascript",n.src=i.api,n.id=i.sid;for(var a=i.attr,r=0,s=a;r<s.length;r++){var l=s[r];n.setAttribute(l.name,this.provider[l.refId])}n.async=!0,n.onload=function(o){i.state=!0,t.drive=Dropbox,e(!0)},n.onerror=function(){if(console.info("errored"),i.errorRequest){i.errorRequest--;var e=document.getElementById(i.sid);e.parentNode.removeChild(e),setTimeout(function(){return t.loadScripts(i)},500),console.info("errored")}else i.state=null},o&&o.appendChild(n)}},Object.defineProperty(e.prototype,"status",{get:function(){return this.provider.state},enumerable:!0,configurable:!0}),e.prototype.addPickerData=function(e){this.provider.clientId=e?e.clientId:"zxqem6bqrgopvs0"},e.prototype.launchDrive=function(e){!0===this.provider.state&&this.drive.choose(this.pickerOptions)},e=__decorate([i.autoinject(),__metadata("design:paramtypes",[n.EventAggregator])],e)}();t.ImportDropBox=a});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-onedrive",["require","exports","./ph-import-resume-config","aurelia-event-aggregator","aurelia-framework"],function(e,t,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.eventAggregator=e,this.provider={api:"https://js.live.net/v5.0/OneDrive.js",devkey:"",clientId:"",scope:[],sid:"onedrive-js",state:null,errorRequest:5,amd:!0,viewId:"onedrive",attr:[{name:"client-id",ref:"clientId"}]},this.scriptState=i.ScriptStatus,this.fileFormats=[],this.supporteFileFormats="bmp, doc, docx, dot, dotx, gif, gz, htm, html, jpeg, jpg, msg, odp, ods, odt, pdf, png, ppt, pptx, rar, rtf, tif, tiff, txt, wpd, wri, xls, xlsx, xlt, xltx, or zip",this.pickerOptions={clientId:"",action:"download",multiSelect:!1,success:this.handlePickerSuccess.bind(this),error:this.handlePickerErrored.bind(this),cancel:this.handlePickerCanceled.bind(this),linkType:"downloadLink"},this.eventAggregator=e}return e.prototype.handlePickerSuccess=function(e){var t=e.values[0],i=t.size/1048576,o={fileLocation:t.link,fileName:t.fileName,proceed:!1};if(i<=2){o.proceed=!0;var n=o.fileName.split("."),a=n[n.length-1];this.supporteFileFormats.indexOf(a.toLowerCase())>=0?this.eventAggregator.publish("fileAdded",o):this.eventAggregator.publish("fileErrored",{type:"unsupported"})}else this.eventAggregator.publish("fileErrored",{type:"exceeds"})},e.prototype.handlePickerErrored=function(){this.eventAggregator.publish("fileErrored",{type:"errored"})},e.prototype.handlePickerCanceled=function(){this.eventAggregator.publish("fileErrored",{type:"cancel"})},e.prototype.loadScripts=function(e){var t=this,i=this.provider,o=document.getElementsByTagName("head")[0],n=document.getElementById(i.sid);if(n){for(var a=i.attr,r=0,s=a;r<s.length;r++){var l=s[r];n.setAttribute(l.name,this.provider[l.ref])}i.state=!0,this.drive=OneDrive,e(!0)}else{var c=document.createElement("script");c.type="text/javascript",c.src=i.api,c.id=i.sid;for(var a=i.attr,p=0,d=a;p<d.length;p++){var l=d[p];c.setAttribute(l.name,this.provider[l.ref])}c.async=!0,c.onload=function(o){i.state=!0,t.drive=OneDrive,e(!0)},c.onerror=function(){if(console.info("errored"),i.errorRequest){i.errorRequest--;var e=document.getElementById(i.sid);e.parentNode.removeChild(e),setTimeout(function(){return t.loadScripts(i)},500),console.info("errored")}else i.state=null},o&&o.appendChild(c)}},Object.defineProperty(e.prototype,"status",{get:function(){return this.provider.state},enumerable:!0,configurable:!0}),e.prototype.addPickerData=function(e){e&&(this.provider.clientId=e.clientId,this.pickerOptions.clientId=e.clientId)},e.prototype.launchDrive=function(e){!0===this.provider.state?this.drive.open(this.pickerOptions):console.info("state:"+this.provider.state)},e=__decorate([n.autoinject(),__metadata("design:paramtypes",[o.EventAggregator])],e)}();t.ImportOneDrive=a});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-googledrive",["require","exports","./ph-import-resume-config","aurelia-event-aggregator","aurelia-framework"],function(e,t,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.eventAggregator=e,this.provider={api:"https://apis.google.com/js/client.js",devkey:"",clientId:"",scope:["https://www.googleapis.com/auth/drive"],sid:"googledrivejs",state:null,errorRequest:5,amd:!1,viewId:"googledrive",attr:[]},this.scriptState=i.ScriptStatus,this.pickerApiLoaded=!1,this.oauthToken=!1,this.eventAggregator=e}return e.prototype.loadScripts=function(e){var t=this,i=this.provider,o=document.getElementsByTagName("head")[0];if(!document.getElementById(i.sid)){var n=document.createElement("script");n.type="text/javascript",n.src=i.api,n.id=i.sid;for(var a=i.attr,r=0,s=a;r<s.length;r++){var l=s[r];n.setAttribute(l.name,l.value)}n.async=!0,n.onload=function(t){i.state=!0,e(!0)},n.onerror=function(){if(console.info("errored"),i.errorRequest){i.errorRequest--;var e=document.getElementById(i.sid);e.parentNode.removeChild(e),setTimeout(function(){return t.loadScripts(i)},500),console.info("errored")}else i.state=null},o&&o.appendChild(n)}},Object.defineProperty(e.prototype,"status",{get:function(){return this.provider.state},enumerable:!0,configurable:!0}),e.prototype.launchDrive=function(e){!0===this.provider.state?(gapi.auth.init(this.onAuthApiLoad.bind(this)),gapi.load("picker",{callback:this.onPickerApiLoad.bind(this)})):console.info("state:"+state)},e.prototype.onAuthApiLoad=function(){var e=this.provider;window.gapi.auth.authorize({client_id:e.clientId,scope:e.scope,immediate:!1},this.handleAuthResult.bind(this))},e.prototype.onPickerApiLoad=function(){this.pickerApiLoaded=!0},e.prototype.handleAuthResult=function(e){e&&!e.error&&(this.oauthToken=e.access_token,this.createPicker())},e.prototype.createPicker=function(){this.pickerApiLoaded&&this.oauthToken&&(new google.picker.View(google.picker.ViewId.DOCS).setMimeTypes("application/msword, application/pdf, application/rtf, text/plain, application/vnd.openxmlformats-officedocument.wordprocessingml.document, text/html, image/jpeg, image/png, image/jpg,application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.presentationml.presentation, application/rar, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/zip, application/x-compressed-zip, image/bmp, application/vnd.openxmlformats-officedocument.wordprocessingml.template, image/gif, application/x-gzip, application/vnd.google-apps.photo, application/vnd.google.drive.ext-type.jpg, application/vnd.google.drive.ext-type.png"),(new google.picker.PickerBuilder).addViewGroup(new google.picker.ViewGroup(google.picker.ViewId.DOCS).addView(google.picker.ViewId.DOCUMENTS).addView(google.picker.ViewId.PHOTOS)).enableFeature(google.picker.Feature.NAV_HIDDEN).setOAuthToken(this.oauthToken).setDeveloperKey(this.provider.devkey).setCallback(this.pickerCallback.bind(this)).build().setVisible(!0))},e.prototype.pickerCallback=function(e){var t=this,i="";if(e[google.picker.Response.ACTION]==google.picker.Action.PICKED){var o=e[google.picker.Response.DOCUMENTS][0];i=o[google.picker.Document.URL];var n=o.sizeBytes/1048576,a={fileLocation:i,fileName:o.name,proceed:!1};if("file"==o.type||"photo"==o.type){var r=o.id,s=this.oauthToken;n<=10?(a.proceed=!0,gapi.client.request({path:"/drive/v3/files/"+r+"/permissions/",method:"POST",body:{role:"reader",type:"anyone"}}).execute(function(e){var i=new XMLHttpRequest;i.open("GET","https://www.googleapis.com/drive/v2/files/"+r),i.setRequestHeader("Authorization","Bearer "+s),i.addEventListener("load",function(){var e=JSON.parse(i.responseText);a.fileLocation=e.webContentLink,t.eventAggregator.publish("fileAdded",a)}),i.addEventListener("error",function(){t.eventAggregator.publish("fileErrored",{type:"common"})}),i.send()})):this.eventAggregator.publish("fileErrored",{type:"exceeds"})}else this.eventAggregator.publish("fileErrored",{type:"unsupported"})}else e[google.picker.Response.ACTION]==google.picker.Action.CANCEL&&this.eventAggregator.publish("fileErrored",{type:"cancel"})},e.prototype.addPickerData=function(e){e?(this.provider.clientId=e.clientId,this.provider.devkey=e.devkey):(this.provider.devkey="AIzaSyBFrajIgOC9E6vnLy9n1YheaHkzGX7x1Dc",this.provider.clientId="21747885378-4j2okdko0uuvqb4bacu2rvr1cjndt9l2.apps.googleusercontent.com")},e=__decorate([n.autoinject(),__metadata("design:paramtypes",[o.EventAggregator])],e)}();t.ImportGoogleDrive=a});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-localdrive",["require","exports","aurelia-framework","dropzone","aurelia-event-aggregator"],function(e,t,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.provider={api:"",devkey:"",clientId:"",scope:[],sid:"",state:null,errorRequest:5,amd:!0,viewId:"localdrive",attr:[]},this.maxFileSize=10,this.fileObj={},this.ctx={uploadUrl:"/fileUpload",allowedFormats:".bmp, .doc, .docx, .dot, .dotx, .gif, .gz, .htm, .html, .jpeg, .jpg, .msg, .odp, .ods, .odt, .pdf, .png, .ppt, .pptx, .rar, .rtf, .tif, .tiff, .txt, .wpd, .wri, .xls, .xlsx, .xlt, .xltx, .zip",previewTemplate:""},this.eventAggregator=e}return e.prototype.handleFileUpload=function(){var e=this;try{if(o&&document.querySelector(".ph-dropzone-area")){o.options.phDropzone=!1,o.options.autoDiscover=!1;var t={url:phApp.baseDomain+this.ctx.uploadUrl,withCredentials:!0,clickable:""};this.ctx.allowedFormats&&(t.acceptedFiles=this.ctx.allowedFormats),t.maxFilesize=this.maxFileSize,this.dropzone&&this.dropzone.destroy(),t.clickable="#ph-dropzone",this.dropzone=new o(".ph-dropzone-area",t),this.dropzone.on("success",function(t,i){e.fileObj=t,e.fileObj.res=i,e.eventAggregator.publish("fileAddedLocalDrive",i)}),this.dropzone.on("addedfile",function(t){e.eventAggregator.publish("fileAddedLocalDriveInitiated",{view:e.provider.viewId})}),this.dropzone.on("canceled",function(t){var i={type:"cancel"};e.eventAggregator.publish("fileErrored",i)}),this.dropzone.on("uploadprogress",function(t){e.fileObj=t}),this.dropzone.on("error",function(i,n,a,r){var s=i.size/1048576,l={type:"common"};if(s>e.maxFileSize)l.type="exceeds",l.maxFileSize=e.maxFileSize;else if(i.type){var c=o.isValidFile(i,t.acceptedFiles);c||(l.type="unsupported")}e.eventAggregator.publish("fileErrored",l)}),this.eventAggregator.subscribe("ph:ir:lc:fileSizeChanged",function(t){t.fileSize&&(e.maxFileSize=t.fileSize)})}}catch(e){console.info(e.message)}},e.prototype.loadScripts=function(e){var t=this;this.provider.state=!0,setTimeout(function(){return t.handleFileUpload()},100),e(!0)},e.prototype.handleSuccess=function(e){},e.prototype.addPickerData=function(e){},Object.defineProperty(e.prototype,"status",{get:function(){return this.provider.state},enumerable:!0,configurable:!0}),e=__decorate([i.autoinject(),__metadata("design:paramtypes",[n.EventAggregator])],e)}();t.ImportLocalDrive=a});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-localdriveV2",["require","exports","aurelia-framework","dropzone","aurelia-event-aggregator"],function(e,t,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.provider={api:"",devkey:"",clientId:"",scope:[],sid:"",state:null,errorRequest:5,amd:!0,viewId:"localdriveV2",attr:[]},this.maxFileSize=10,this.fileObj={},this.ctx={uploadUrl:"/fileCommonUpload",allowedFormats:".bmp, .doc, .docx, .dot, .dotx, .gif, .gz, .htm, .html, .jpeg, .jpg, .msg, .odp, .ods, .odt, .pdf, .png, .ppt, .pptx, .rar, .rtf, .tif, .tiff, .txt, .wpd, .wri, .xls, .xlsx, .xlt, .xltx, .zip",previewTemplate:""},this.eventAggregator=e}return e.prototype.handleFileUpload=function(){var e=this;if(o&&document.querySelector(".ph-dropzone-areaV2")){o.options.phDropzone=!1,o.options.autoDiscover=!1;var t={url:phApp.baseDomain+this.ctx.uploadUrl,withCredentials:!0,clickable:!1};this.ctx.allowedFormats&&(t.acceptedFiles=this.ctx.allowedFormats),t.maxFilesize=this.maxFileSize,t.clickable="#ph-v2dropzone",this.dropzone&&this.dropzone.destroy(),this.dropzone=new o(".ph-dropzone-areaV2",t),this.dropzone.on("success",function(t,i){e.fileObj=t,e.fileObj.res=i,e.eventAggregator.publish("fileAddedLocalDrive",i)}),this.dropzone.on("addedfile",function(t){e.eventAggregator.publish("fileAddedLocalDriveInitiated",{view:e.provider.viewId})}),this.dropzone.on("canceled",function(t){var i={type:"cancel"};e.eventAggregator.publish("fileErrored",i)}),this.dropzone.on("uploadprogress",function(t){e.fileObj=t}),this.dropzone.on("error",function(i,n,a,r){var s=i.size/1048576,l={type:"common"};if(s>e.maxFileSize)l.type="exceeds",l.maxFileSize=e.maxFileSize;else if(i.type){var c=o.isValidFile(i,t.acceptedFiles);c||(l.type="unsupported")}e.eventAggregator.publish("fileErrored",l)}),this.eventAggregator.subscribe("ph:ir:lc:fileSizeChanged",function(t){t.fileSize&&(e.maxFileSize=t.fileSize)})}},e.prototype.loadScripts=function(e){var t=this;this.provider.state=!0,setTimeout(function(){return t.handleFileUpload()},100),e(!0)},e.prototype.handleSuccess=function(e){},e.prototype.addPickerData=function(e){},Object.defineProperty(e.prototype,"status",{get:function(){return this.provider.state},enumerable:!0,configurable:!0}),e=__decorate([i.autoinject(),__metadata("design:paramtypes",[n.EventAggregator])],e)}();t.ImportLocalDriveV2=a});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-localdriveV3",["require","exports","aurelia-framework","dropzone","aurelia-event-aggregator","ph-common"],function(e,t,i,o,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.commonService=t,this.provider={api:"",devkey:"",clientId:"",scope:[],sid:"",state:null,errorRequest:5,amd:!0,viewId:"localdriveV3",attr:[]},this.maxFileSize=10,this.uploadingSronly=!1,this.fileObj={},this.profileMerge=!1,this.ctx={uploadUrl:"/uploadResumeS3andParse",allowedFormats:".doc, .docx, .pdf, .txt",previewTemplate:""},this.eventAggregator=e}return e.prototype.handleFileUpload=function(){var e=this;this.eventAggregator.subscribe("initiate_upload",function(t){"localdriveV3"===t.provideId&&e.dropzone.processQueue()});var t={},i=this.element||document;if(o&&i.querySelector(".ph-dropzone-area")){o.options.phDropzone=!1,o.options.autoDiscover=!1,this.ctx=this.fileCtx||this.ctx;var n={url:this.commonService.getBaseDomain()+this.ctx.uploadUrl,withCredentials:!0,clickable:!1};this.ctx.allowedFormats&&(n.acceptedFiles=this.ctx.allowedFormats),this.ctx.hasOwnProperty("maxFiles")&&(n.maxFiles=this.ctx.maxFiles),n.maxFilesize=this.ctx.maxFileSize?this.ctx.maxFileSize:this.maxFileSize,this.fileCtx&&(n.params={dk:this.fileCtx.dk||"fileUpload"}),this.profileMerge&&(n.params?n.params.profileMerge=!0:(n.params={},n.params.profileMerge=!0)),this.ctx&&this.ctx.clickable?n.clickable=this.ctx.clickable:n.clickable="#ph-dropzone";var a=sessionStorage.getItem("resumeAutoDiscover");this.profileMerge&&"false"===a&&(n.autoProcessQueue=!1),this.dropzone&&this.dropzone.destroy(),this.dropzone=new o(".ph-dropzone-area",n),this.dropzone.off("success").on("success",function(i,o){if(e.fileObj=i,e.fileObj.res=o,localStorage.processType?o.source=localStorage.processType:o.source="",o&&"success"==o.status)e.eventAggregator.publish("fileAddedLocalDrive",o),t.status="success",t.data=i;else{t.status="error";var n={type:"error"};t.data=n}e.eventAggregator.publish("fileErrored",n),e.handleFileUploadStaus(t)}),this.dropzone.off("addedfile").on("addedfile",function(i){e.eventAggregator.publish("fileAddedLocalDriveInitiated",{view:e.provider.viewId}),t.status="addedfile",t.data=i,e.handleFileUploadStaus(t)}),this.dropzone.off("canceled").on("canceled",function(i){var o={type:"cancel"};e.eventAggregator.publish("fileErrored",o),t.status="canceled",t.data=i,e.handleFileUploadStaus(t)}),this.dropzone.off("uploadprogress").on("uploadprogress",function(i){e.fileObj=i,e.uploadingSronly=!0,setTimeout(function(){e.uploadingSronly=!1},4e3),t.status="uploadprogress",t.data=i,e.handleFileUploadStaus(t)}),this.dropzone.off("complete").on("complete",function(i){e.fileObj=i,e.fileObj.res&&e.fileObj.res.status&&("503"==e.fileObj.res.status||"failure"==e.fileObj.res.status)&&(t.status="error",e.handleFileUploadStaus(t))}),this.dropzone.off("error").on("error",function(i,a,r,s){var l=e.ctx.maxFileSize?e.ctx.maxFileSize:e.maxFileSize,c=i.size/1048576,p={type:"common",name:i.name};if(c>l)p.type="exceeds",p.maxFileSize=l,p.name=i.name;else if(i.type){var d=o.isValidFile(i,n.acceptedFiles);d||(p.type="unsupported",p.name=i.name)}e.eventAggregator.publish("fileErrored",p),t.status="error",t.data=p,e.handleFileUploadStaus(t)}),this.eventAggregator.subscribe("ph:ir:lc:fileSizeChanged",function(t){t.fileSize&&(e.maxFileSize=t.fileSize)})}},e.prototype.loadScripts=function(e){var t=this;this.provider.state=!0,setTimeout(function(){return t.handleFileUpload()},100),e(!0)},e.prototype.handleSuccess=function(e){},e.prototype.addPickerData=function(e){},e.prototype.handleBindableData=function(e){this.fileCtx=e.ctx,this.element=e.elem,this.profileMerge=e.profileMerge},e.prototype.handleFileUploadStaus=function(e){this.fileCtx&&this.fileCtx.funRef&&this.fileCtx.funRef(e)},Object.defineProperty(e.prototype,"status",{get:function(){return this.provider.state},enumerable:!0,configurable:!0}),e=__decorate([i.autoinject(),__metadata("design:paramtypes",[n.EventAggregator,"function"==typeof(t=void 0!==a.CommonService&&a.CommonService)&&t||Object])],e);var t}();t.ImportLocalDriveV3=r});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-factory",["require","exports","./ph-import-resume-config","aurelia-framework","./ph-import-resume-onedrive","./ph-import-resume-dropbox","./ph-import-resume-googledrive","./ph-import-resume-localdrive","./ph-import-resume-localdriveV2","./ph-import-resume-localdriveV3"],function(e,t,i,o,n,a,r,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(e,t,i,o,n,a){this.onedrive=e,this.dropbox=t,this.localdrive=i,this.localdriveV2=o,this.localdriveV3=n,this.googledrive=a}return e.prototype.getImporter=function(e){if(!e)return null;switch(e){case i.ProviderKey.OneDrive:return this.onedrive;case i.ProviderKey.GoogleDrive:return this.googledrive;case i.ProviderKey.DropBox:return this.dropbox;case i.ProviderKey.LocalComputer:return this.localdrive;case i.ProviderKey.LocalComputerV2:return this.localdriveV2;case i.ProviderKey.LocalComputerV3:return this.localdriveV3}},e.prototype.loadprovider=function(e){},e=__decorate([o.autoinject(),__metadata("design:paramtypes",[n.ImportOneDrive,a.ImportDropBox,s.ImportLocalDrive,l.ImportLocalDriveV2,c.ImportLocalDriveV3,r.ImportGoogleDrive])],e)}();t.ImportFactory=p});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.ImportResumeService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume",["require","exports","aurelia-framework","ph-common","./ph-import-resume-config","./ph-import-resume-service","aurelia-event-aggregator","./ph-import-resume-factory"],function(e,t,i,o,n,a,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l="ph-import-resume-v1",c=function(e){function t(t,i,o,a,r){var s=e.call(this,t,i,l)||this;return s.element=t,s.commonService=i,s.importResumeService=o,s.eventAggregator=a,s.importer=r,s.profileMerge=!1,s.providerKey=n.ProviderKey,s.private=null,s.providerId="localdrive",s.labelName="Local computer",s}return __extends(t,e),t.prototype.getSiteConfig=function(){var t=this,i=this.commonService.getSiteSettings("filePicker")||{};if(Object.keys(i).length||"localdriveV3"==this.providerId){if(this.pickerData=i[this.providerId]||{},this.providerId&&(this.driver=this.importer.getImporter(this.providerId),this.driver)){if(this.driver.addPickerData(this.pickerData),this.fileCtx&&this.driver.handleBindableData){var o={};o.ctx=this.fileCtx,o.elem=this.element,o.profileMerge=this.profileMerge,this.driver.handleBindableData(o)}else if(this.driver.handleBindableData){var o={};o.profileMerge=this.profileMerge,this.driver.handleBindableData(o)}this.driver.loadScripts(function(e){t.enableDrive=e})}e.prototype.hideLoader.call(this)}},t.prototype.chooseResume=function(e,t){var i=this;this.eventAggregator.publish("filePickerInitiated",{view:this.providerId}),setTimeout(function(){t&&i.providerId==t?i.driver.launchDrive(e):t||i.driver.launchDrive(e)},10)},t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),this.getSiteConfig(),this.eventAggregator.subscribe("ATTACH_LINK",function(e){var i=e.providerType;i&&t.chooseResume("",i)})},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"profileMerge",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"successImport",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"errorImport",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"fileCtx",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"providerId",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"labelName",void 0),t=__decorate([i.customElement(l),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(c=void 0!==o.CommonService&&o.CommonService)&&c||Object,a.ImportResumeService,r.EventAggregator,s.ImportFactory])],t);var c}(o.PhenomWidget);t.ImportResume=c}),define("text!v1/ph-import-resume.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-import-resume-v1/default/view.html",["module"],function(e){e.exports='<template>\n    \x3c!-- view html here --\x3e\n    <a id="ph-dropzone" href="javascript:void(0)" method="POST" class="dropzone ${ (enableDrive === true)  ? \'active\': \'disabled\'}" role="button" title="Local computer" aria-label="importe resume from Local computer" key-role="button" key-title="localComputer" key-aria-label="importeResumeFromLocalComputerText" ph-tevent="local_drive_click" data-ph-tevent-attr-trait145="local_drive" data-ph-tevent-attr-trait27="${profileForm.email}">\n        <div class="left-icon-holder ">\n            <i class="msicon-fullmdl2assets-25 local-pc-iconholder"></i>\n        </div>\n        <div class="right-content">\n            <ppc-content key="localComputer">Local computer</ppc-content>\n        </div>\n    </a>\n</template>'}),define("text!v1/views/ph-import-resume-v1/attachment/view.html",["module"],function(e){e.exports='<template>\n    \x3c!-- view html here --\x3e\n    <a id="ph-v2dropzone" href="javascript:void(0)" method="POST" class="dropzone" role="button" title="Local computer" aria-label="importe resume from Local computer" key-role="button" key-title="localComputer" key-aria-label="importeResumeFromLocalComputerText" ph-tevent="local_drive_click" data-ph-tevent-attr-trait145="local_drive" data-ph-tevent-attr-trait27="${profileForm.email}">\n        <div class="left-icon-holder ">\n            <i class="msicon-fullmdl2assets-25 local-pc-iconholder"></i>\n        </div>\n        <div class="right-content">\n            <ppc-content key="localComputer">Local computer</ppc-content>\n        </div>\n    </a>\n</template>'}),define("text!v1/views/ph-import-resume-v1/dropbox/view.html",["module"],function(e){e.exports='<template>\n    \x3c!-- view html here --\x3e\n    <a href="javascript:void(0)" click.trigger="chooseResume($event)" class="${ (enableDrive === true)  ? \'active\': \'disabled\'}"\n        role="button" title="Choose from Dropbox">\n        <div class="left-icon-holder">\n            <span class="icon-sprite dropbox-icon-holder"></span>\n        </div>\n        <div class="right-content">Dropbox</div>\n    </a>\n</template>'}),define("text!v1/views/ph-import-resume-v1/googledrive/view.html",["module"],function(e){e.exports='<template>\n    \x3c!-- view html here --\x3e\n    <a href="javascript:void(0)" click.trigger="chooseResume($event)" class="${ (enableDrive === true)  ? \'active\': \'disabled\'}"\n        role="button" title="Choose from Google Drive">\n        <div class="left-icon-holder">\n            <span class="icon-sprite googledrive-icon-holder"></span>\n        </div>\n        <div class="right-content">Google Drive</div>\n        </a>\n        \x3c!--<a href="javascript:void(0)" click.trigger="chooseResume(provider.oneDrive)" class="${canOneDrive ? \'active\': \'disabled\'}"\n        role="button" title="Choose from OneDrive">\n        <div class="icon-box dropbox-icon">\n            <ppc-content type="icon">\n            </ppc-content>\n        </div>\n        <div class="text-box">\n            Choose from OneDrive\n        </div>\n    </a>--\x3e\n</template>'}),define("text!v1/views/ph-import-resume-v1/im-default/view.html",["module"],function(e){e.exports='<template>\n\n\t<a id="ph-dropzone" href="javascript:void(0)" class="dropzone active" role="button">\n\t\t<div class="dropzone-content">\n\t\t\t<div class="icon-holder ">\n\t\t\t\t<i class="fa-2x fa fa-dropbox"></i>\n\t\t\t</div>\n\t\t\t<div class="content-holder">\n\t\t\t\t<ppc-content>Browse My Device</ppc-content>\n\t\t\t</div>\n\t\t</div>\n\t</a>\n\n</template>'}),define("text!v1/views/ph-import-resume-v1/im-dropbox/view.html",["module"],function(e){e.exports='<template>\n\n\t<a id="ph-dropzone" href="javascript:void(0)" class="dropzone" role="button">\n\t\t<div class="dropzone-content">\n\t\t\t<div class="icon-holder ">\n\t\t\t\t<i class="fa-2x fa fa-dropbox"></i>\n\t\t\t</div>\n\t\t\t<div class="content-holder">\n\t\t\t\t<ppc-content>Upload from Dropbox</ppc-content>\n\t\t\t</div>\n\t\t</div>\n\t</a>\n\t\n</template>'}),define("text!v1/views/ph-import-resume-v1/im-googledrive/view.html",["module"],function(e){
e.exports='<template>\n\n\t<a id="ph-dropzone" href="javascript:void(0)" class="dropzone" role="button">\n\t\t<div class="dropzone-content">\n\t\t\t<div class="icon-holder ">\n\t\t\t\t<i class="fa-2x fa fa-dropbox"></i>\n\t\t\t</div>\n\t\t\t<div class="content-holder">\n\t\t\t\t<ppc-content>Upload from Google drive</ppc-content>\n\t\t\t</div>\n\t\t</div>\n\t</a>\n\t\n</template>'}),define("text!v1/views/ph-import-resume-v1/onedrive/view.html",["module"],function(e){e.exports='<template>\n    \x3c!-- view html here --\x3e\n    <a href="javascript:void(0)" click.trigger="chooseResume($event)" class="${ (enableDrive === true)  ? \'active\': \'disabled\'}"\n        role="button" title="Choose from OneDrive">\n        <div class="left-icon-holder">\n            <span class="icon-sprite microsoft-icon-holder"></span>\n        </div>\n        <div class="right-content">Microsoft OneDrive</div>\n        </a>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-subscribe-similarjobs-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"subscribeSimilarjobs",ddoKeyATSProfileURL:"atsProfileURL",jobDetailDDOKey:"jobDetail",ddoKeySocialProfile:"mergedProfile",ddoKeymasterFrequency:"masterFrequencyV1",ddoKeySubscribedStatus:"subscribeSimilarStatus",ddoKeyValidateToken:"validateToken",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeyMergedProfile:"mergedProfile"}}}),define("v1/ph-subscribe-similarjobs-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.email="",this.jobSeqNo="",this.name="",this.frequency="2",this.alertFrequency={},this.userSubType=""}return e}();t.SubscribeSimilarJobsModel=i});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-subscribe-similarjobs-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.subscribe=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e})},e.prototype.getProfile=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e.prototype.makeDDORequest=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.SubscribeSimilarjobsService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(n,a){function r(e){try{l(o.next(e))}catch(e){a(e)}}function s(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(r,s)}l((o=o.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return o([e,t])}}function o(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(r=a[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,a,r,s,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};define("v1/ph-subscribe-similarjobs",["require","exports","aurelia-framework","ph-common","./ph-subscribe-similarjobs-config","./ph-subscribe-similarjobs-service","./ph-subscribe-similarjobs-model","aurelia-event-aggregator"],function(e,t,i,o,n,a,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l="ph-subscribe-similarjobs-v1",c=function(e){function t(t,i,o,n,a){var r=e.call(this,t,i,l)||this;return r.commonService=i,r.eventAggregator=o,r.subscribeSimilarjobsService=n,r.subscribeSimilarJobsModel=a,r.isErrorMsgReqd=!1,r.checkSubscribed=!1,r.hideIfNoEmail=!1,r.showErrorMsg=!1,r.errors={},r.showEmailSuccess=!1,r.showEmailFailure=!1,r.subscribedFlag=!1,r.userProfile={},r.isNonJwtTokenTenant=!1,r.consentRequired="0",r.acceptedConsent=!1,r.masterFrequency=[],r.isEmailEditable=!0,r.isUserLoggedIn=!1,r.statusCode=-1,r.isEmailReqd=!1,r.replaceJobSeqNo=!1,r.isDialog=!1,r.showDialogPopup=!1,r}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),e.prototype.hideLoader.call(this),this.fetchJobSeqNo(),this.isNonJwtTokenClient(),this.validateToken(),this.validateJwtToken(),this.isNonJwtTokenTenant||this.getProfile(),this.isEmailReqd&&this.getEmail(),this.hideIfNoEmail&&this.profileEmailCheck(),e.prototype.subscribeToEvent.call(this,"JOB_DETAIL_OBJECT",function(i){t.jobSeqNo=i.jobSeqNo,e.prototype.showContainer.call(t),t.getSubscribedStatus()}),this.getSubscribedStatus()},t.prototype.isNonJwtTokenClient=function(){if(this.commonService.getRefNum){var e=this.commonService.getSiteSettings("tokenConfiguredTenants"),t=this.commonService.getRefNum();e&&e.refNums&&e.refNums.length&&-1!=e.refNums.indexOf(t)?this.isNonJwtTokenTenant=!0:this.isNonJwtTokenTenant=!1}},t.prototype.fetchJobSeqNo=function(){if(this.jobSeqNo&&null!=this.jobSeqNo&&this.jobSeqNo.length>0);else{var t=this.commonService.getCachedDDO(n.WidgetConfig.v1.jobDetailDDOKey,l);t&&t.data&&t.data.job&&t.data.job.jobSeqNo?(this.jobSeqNo=t.data.job.jobSeqNo,this.category=t.data.job.category):(e.prototype.hideLoader.call(this),this.handleError(""))}},t.prototype.validateToken=function(){var e=this;this.subscribeSimilarjobsService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyValidateToken,{}).then(function(t){t&&t.access_token&&(e.isUserLoggedIn=!0,e.isEmailEditable=!1,e.subscribeSimilarJobsModel.email=t.user_name)},function(e){new Error(e)})},t.prototype.validateJwtToken=function(){var e=this;this.subscribeSimilarjobsService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyValidateJwtToken).then(function(t){"success"==t.status&&t.data&&(e.isNonJwtTokenTenant?t.data.isSiteLogin&&(e.isUserLoggedIn=t.data.isValidToken):e.isUserLoggedIn=t.data.isValidToken,t.data.userSubType&&(e.subscribeSimilarJobsModel.userSubType=t.data.userSubType))},function(e){new Error(e)})},t.prototype.getProfile=function(){var t=this;e.prototype.unhideLoader.call(this),this.subscribeSimilarjobsService.getProfile(l,n.WidgetConfig.v1.ddoKeySocialProfile,{}).then(function(i){i&&i.email&&(t.userProfile=i,t.subscribeSimilarJobsModel.email=t.userProfile.email),e.prototype.hideLoader.call(t)})},t.prototype.profileEmailCheck=function(){return __awaiter(this,void 0,void 0,function(){var t,i;return __generator(this,function(o){switch(o.label){case 0:return t=n.WidgetConfig.v1.ddoKeyMergedProfile,[4,this.subscribeSimilarjobsService.makeDDORequest(l,t)];case 1:return i=o.sent(),i&&i.email||e.prototype.hideContainer.call(this),[2]}})})},t.prototype.subscribe=function(){var t=this,i=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(this.subscribeSimilarJobsModel.jobSeqNo=this.jobSeqNo,this.subscribeSimilarJobsModel.email?i.test(this.subscribeSimilarJobsModel.email)?"1"!=this.consentRequired||this.acceptedConsent?(this.hasErrors=!1,e.prototype.unhideLoader.call(this)):(this.hasErrors=!0,this.errors.email="",this.errors.consent="E103"):(this.hasErrors=!0,this.errors.email="E102",this.errors.consent=""):(this.hasErrors=!0,this.errors.email="E101",this.errors.consent=""),this.hasErrors)e.prototype.hideLoader.call(this),setTimeout(function(){var e=t.element.querySelector(".ph-a11y-subscribe-box");e&&e.focus()},50);else{var o=this.element.querySelectorAll(".feedbackText")[0];this.subscribeSimilarjobsService.subscribe(l,n.WidgetConfig.v1.ddoKey,this.subscribeSimilarJobsModel).then(function(i){if("success"==i.subscribeSimilarjobs.status){t.showEmailSuccess=!0;var n=t.element.querySelector(".success-hdlr"),a=t.element.querySelector(".ph-a11y-submit"),r=t.element.querySelectorAll(".success-hdlr .hdlr-block")[0];r||(r=t.element.querySelectorAll(".success-hdlr .hdlr-block")[0]),n&&e.prototype.openDialogPopup.call(t,"success-hdlr",a),n&&n.hasAttribute("role")&&n.removeAttribute("role")}else{t.statusCode=i.subscribeSimilarjobs.code,t.showEmailFailure=!0;var n=t.element.querySelector(".failure-hdlr"),a=t.element.querySelector(".ph-a11y-submit"),r=t.element.querySelectorAll(".failure-hdlr .hdlr-block")[0];r||(r=t.element.querySelectorAll(".failure-hdlr .hdlr-block")[0]),n&&e.prototype.openDialogPopup.call(t,"failure-hdlr",a),n&&n.hasAttribute("role")&&n.removeAttribute("role")}e.prototype.hideLoader.call(t),o&&o.setAttribute("tabindex","0"),setTimeout(function(){o&&o.focus()},50),t.checkSubscribed||(t.isDialog?(t.subscribeSimilarJobsModel.email="",t.showDialogPopup=!0):setTimeout(function(){t.closeSubscribeDialog(),t.subscribeSimilarJobsModel.email=""},2500))},function(i){new Error(i),e.prototype.hideLoader.call(t)})}},t.prototype.closeSubscribeDialog=function(){this.showEmailSuccess=!1,this.showEmailFailure=!1,this.checkSubscribed=!1,this.subscribedFlag=!1,e.prototype.closeDialogPopup.call(this)},t.prototype.detached=function(){e.prototype.hideLoader.call(this)},t.prototype.internalSubscribe=function(){var t=this;if(this.subscribeSimilarJobsModel.jobSeqNo=this.jobSeqNo,"1"!=this.consentRequired||this.acceptedConsent?(this.errors={},this.hasErrors=!1,e.prototype.unhideLoader.call(this)):(this.hasErrors=!0,this.errors.consent="E103"),this.hasErrors)e.prototype.hideLoader.call(this);else{var i=this.element.querySelectorAll(".feedbackText")[0];this.subscribeSimilarJobsModel.email?this.subscribeSimilarjobsService.subscribe(l,n.WidgetConfig.v1.ddoKey,this.subscribeSimilarJobsModel).then(function(i){"success"==i.subscribeSimilarjobs.status?t.showEmailSuccess=!0:(e.prototype.hideLoader.call(t),t.showEmailFailure=!0),e.prototype.hideLoader.call(t)},function(i){new Error(i),e.prototype.hideLoader.call(t)}):this.showEmailFailure=!0,i.setAttribute("tabindex","0"),setTimeout(function(){i.focus()},50)}},t.prototype.onBtnBlurHandler=function(e){e.target.setAttribute("tabindex","-1")},t.prototype.getSubscribedStatus=function(){var e=this;if(this.checkSubscribed&&this.jobSeqNo){var t={};t.jobSeqNo=this.jobSeqNo;var i=n.WidgetConfig.v1.ddoKeySubscribedStatus;this.subscribeSimilarjobsService.makeDDORequest(l,i,t).then(function(t){t.status&&"SUCCESS"===t.status.toUpperCase()&&t.data&&(e.subscribedFlag=!0)})}},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},t.prototype.getEmail=function(){var e=this;"internal"==this.commonService.getSiteType()&&this.subscribeSimilarjobsService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyATSProfileURL).then(function(t){t&&"success"==t.status&&(e.subscribeSimilarJobsModel.email=t.username||"",e.subscribeSimilarJobsModel.name=t.firstName||"")},function(t){e.handleError()})},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"jobSeqNo",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"category",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"checkSubscribed",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"hideIfNoEmail",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],t.prototype,"consentRequired",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"isEmailEditable",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"isEmailReqd",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"replaceJobSeqNo",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"isDialog",void 0),t=__decorate([i.customElement(l),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(c=void 0!==o.CommonService&&o.CommonService)&&c||Object,s.EventAggregator,a.SubscribeSimilarjobsService,r.SubscribeSimilarJobsModel])],t);var c}(o.PhenomWidget);t.SubscribeSimilarjobs=c}),define("text!v1/ph-subscribe-similarjobs.html",["module"],function(e){e.exports='<template>\r\n\t<compose view.bind="tmplUrl" containerless>\r\n</template>'}),define("text!v1/views/ph-subscribe-similarjobs-v1/default/view.html",["module"],function(e){e.exports='<template>\r\n\t<div class="phs-subscribe-jobs-area ph-widget-box">\r\n        <div ph-loading-img="show-loader.bind: showLoader"></div>\r\n        <div class="widget-container">\r\n            <div class="phs-widget-heading">\r\n              <h2><ppc-content> Get notified for similar jobs</ppc-content> </h2>\r\n              <p> <ppc-content> You\'ll receive updates once a week </ppc-content> </p>\r\n              </ppc-content>\r\n            </div>\r\n            <div class="content-block">\r\n                <form role = "form" submit.delegate = "subscribe()">\r\n                    <div class="form-group has-feedback">           \r\n                        <label class="sr-only" for="notifiedEmail"><ppc-content> Enter Email address </ppc-content> </label>  \r\n                        <input type="text" value.bind = "subscribeSimilarJobsModel.email" class="form-control" name="" id="notifiedEmail" placeholder="you@email.com" autocomplete="off"/>\r\n                        <a class="form-control-feedback" \r\n                            href="javascript:void(0)" \r\n                            click.delegate="subscribe()"\r\n                            ph-tevent="similar_jobs_subscribe"\r\n                            data-ph-tevent-attr-trait5="${jobSeqNo}"\r\n                            data-ph-tevent-attr-trait14="${category}"\r\n                            data-ph-tevent-attr-trait27="${subscribeSimilarJobsModel.email}"\r\n                            ><ppc-content> Activate </ppc-content> </a>\r\n                        <span class="error" show.bind="hasErrors && errors.email == \'E101\'"><ppc-content> Email should not empty </ppc-content> </span>\r\n                        <span class="error" show.bind="hasErrors && errors.email == \'E102\'"><ppc-content> Please enter email </ppc-content> </span>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        <div show.bind="showEmailSuccess" class="success-hdlr">\r\n            <div class="modal-backdrop fade in" click.delegate="closeSubscribeDialog()"></div>\r\n            <div class="hdlr-block">\r\n                <ppc-content type="icon">\r\n                    <i class="icon icon-check"></i>\r\n                </ppc-content>\r\n                <h3>Success!</h3>\r\n                <p>successfully subscribed for similar jobs</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-candidate-merge-profile-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKeyValidateJwtToken:"validateJwtToken",ddoKeyJwtLogout:"jwtLogout",ddokeyMergeProfileData:"ciGetMergeProfileData",ddokeyCiMergeProfileCancel:"ciMergeProfileCancel",ciMergeStatusChange:"ciMergeStatusChange"}}});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-candidate-merge-profile-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.CandidateMergeProfileService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-candidate-merge-profile",["require","exports","aurelia-framework","ph-common","./ph-candidate-merge-profile-config","./ph-candidate-merge-profile-service"],function(e,t,i,o,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="ph-candidate-merge-profile-v1",s=function(e){function t(t,i,o,n){var a=e.call(this,t,i,r)||this;return a.element=t,a.commonService=i,a.candidateMergeProfileService=o,a.candidateLoginService=n,a.isMergeProfile=!1,a.siteVariant="i",a.isLoggedIn=!1,a.showPopup=!1,a.allProfiles=[],a.isMergeDisabled=!1,a.mergeProfileStep=1,a.mergeAuthFlow="loginState",a.linkedAccountList=[],a.isPhnExist=!1,a}return __extends(t,e),t.prototype.attached=function(){e.prototype.attached.call(this),e.prototype.hideLoader.call(this),(this.commonService.getMergeProfileProgress()||this.isMergeProfile)&&(this.siteVariant=this.commonService.getSiteType(),this.getMergeProfileData())},t.prototype.togglePopup=function(){var t,i,o=this;this.showPopup=!this.showPopup,this.showPopup?setTimeout(function(){t=o.element.querySelector(".signin-link"),i=o.isPhnExist?o.element.querySelector(".merge-link"):o.element.querySelector(".ph-a11y-merge-buttons .btn-cancel"),e.prototype.openDialogPopup.call(o,"modal",t,i)},100):e.prototype.closeDialogPopup.call(this)},t.prototype.getJwtToken=function(){var t=this,i={};this.candidateLoginService.getValidateJwtToken(r,n.WidgetConfig.v1.ddoKeyValidateJwtToken,i).then(function(e){e.data.isValidToken&&(t.isLoggedIn=!0)},function(i){e.prototype.hideLoader.call(t),new Error(i)})},t.prototype.doProfileLogin=function(e,t){var i={name:e,profileValidation:t},o=this.candidateLoginService.socialLoginUrl(r,this.siteVariant,i);o&&(window.location.href=o)},t.prototype.doProfileLogout=function(){var e=this;this.candidateLoginService.doLogout(r,n.WidgetConfig.v1.ddoKeyJwtLogout).then(function(t){t&&"success"==t.status?(e.isLoggedIn=!1,document.location.reload()):o.logger.debug("Failure ",t)})},t.prototype.getMergeProfileData=function(){var t=this;this.candidateLoginService.getMergeProfile(r,n.WidgetConfig.v1.ddokeyMergeProfileData).then(function(i){if(i&&Object.keys(i).length){if(t.profileData=i,t.loginProfile=t.profileData.loginProfile,t.allProfiles=t.profileData.allProfiles,t.linkedAccountList=t.profileData.linkedAccountList,t.allProfiles.length){var o=t.allProfiles.findIndex(function(e){return"phone"==e.mergeField});t.isPhnExist=-1!=o}t.allProfiles.length&&t.togglePopup(),t.profileData.mergeAuthFlow&&t.profileData.mergeAuthFlow.length&&(t.mergeProfileStep=2,t.mergeAuthFlow=t.profileData.mergeAuthFlow)}e.prototype.hideLoader.call(t)})},t.prototype.backToMergeFlow=function(){this.mergeProfileStep=1},t.prototype.changeMergeStatus=function(e,t,i){var a=this,s={};e.merge=t,s.profile=e,this.candidateMergeProfileService.makeDDORequest(r,n.WidgetConfig.v1.ciMergeStatusChange,s).then(function(e){e&&"success"==e.status?a.getMergeProfileData():o.logger.debug("Failure responsee ")})},t.prototype.mergeProfiles=function(e){var t;if(!this.isMergeDisabled){var i={};i.trait213=this.loginProfile.socialProvider,this.commonService.processTrackingEvent("allow_merge_click",void 0,i);var o=this;this.mergeProfileStep=2,setTimeout(function(){t=o.element.querySelector(".phs-merge-auth-area .close"),t.focus()},100)}},t.prototype.mergeCancel=function(){var e=[];e.allProfiles=[],e.mergeStatus=!1,this.candidateLoginService.profileMergeCancel(r,n.WidgetConfig.v1.ddokeyCiMergeProfileCancel,e).then(function(e){e&&"success"==e.status?window.location.reload():o.logger.debug("Failure ",e)})},t.prototype.getLocalWidgetBundle=function(){return{profileCount:"{{profileCount}} previous profiles",profileCountSingler:"{{profileCount}} previous profile",duplicateProfileInfo:"{{profileCount}} duplicate profiles found",mergeCount:"Merge selected ({{profileCount}})",mergeProfiles:"Merge profiles",duplicateProfileInfoSingler:"{{profileCount}} duplicate profile found"}},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"isMergeProfile",void 0),t=__decorate([i.customElement(r),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(s=void 0!==o.CommonService&&o.CommonService)&&s||Object,a.CandidateMergeProfileService,"function"==typeof(l=void 0!==o.CandidateLoginService&&o.CandidateLoginService)&&l||Object])],t);var s,l}(o.PhenomWidget);t.CandidateMergeProfile=s}),define("text!v1/ph-candidate-merge-profile.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-candidate-merge-profile-v1/default/view.html",["module"],function(e){
e.exports='<template>\n    <div ph-loading-img="show-loader.bind: showLoader" show.bind="showLoader" class="show-loader">\n    </div>\n    <div class="phs-widget-block-area ph-widget-box" role="region" if.bind="!showLoader && allProfiles.length" data-ph-at-id="social-connect-view">\n        <div class="modal-backdrop fade in show"></div>\n        <div class="modal fade in show" role="dialog">\n            <div class="modal-dialog merge-modal" role="document">\n                <div class="modal-content">\n                    \x3c!--  Social Profile Merge Area Starts  --\x3e\n                    <div class="phs-social-merge-area" data-ph-at-id="social-merge-area" if.bind="mergeProfileStep == 1">\n                        <div class="loggedin-user-details" data-ph-at-id="loggedin-user-details" data-ph-at-profile-name-text="${loginProfile.firstName + \' \' + loginProfile.lastName}"\n                            data-ph-at-profile-email-text="${loginProfile.email}" data-ph-at-profile-phno-text="${loginProfile.phone}">\n                            <figure class="loggedin-user-profile-img">\n                                <img src="${loginProfile.pictureUrl}" alt="${loginProfile.firstName} ${loginProfile.lastName}" class="img-circle" show.bind="loginProfile.pictureUrl"\n                                    data-ph-at-id="profile-image"/>\n                                <ppc-content type="image" show.bind="!loginProfile.pictureUrl">\n                                    <img ph-src="assets/images/default_profile.png" alt="${loginProfile.firstName} ${loginProfile.lastName}" class="img-circle"\n                                        key-ph-src="defaultProfileImgSource" data-ph-at-id="profile-image"/>\n                                </ppc-content>\n                            </figure>\n                            <div>\n                                ${loginProfile.firstName + \' \' + loginProfile.lastName}</div>\n                            <p>\n                                <span>${loginProfile.email}</span>\n                                <span>${loginProfile.phone}</span>\n                            </p>\n                        </div>\n\n                        <div class="content-block">\n                            <div class="loggedin-user-info" data-ph-at-id="loggedin-user-info">\n\n                                \x3c!--  Previous Profile Details Starts  --\x3e\n                                <div class="previous-profile-details" data-ph-at-id="previous-profile-details" data-ph-at-profile-name-text="${loginProfile.firstName}">\n                                    <ppc-content key="greetingText" data-ph-at-id="greeting-text"> Hi,</ppc-content>\n                                    <strong>${loginProfile.firstName} .</strong>\n                                    <span>\n                                        <ppc-content key="profileResultPrefixText" data-ph-at-id="profileresultprefix-text">We have found </ppc-content>\n                                    </span>\n                                    <strong show.bind="allProfiles.length == 1">\n                                        ${widgetBundle[\'profileCountSingler\'] | pht:{\'profileCount\':allProfiles.length}}\n                                    </strong>\n                                    <strong show.bind="allProfiles.length != 1">\n                                        ${widgetBundle[\'profileCount\'] | pht:{\'profileCount\':allProfiles.length}}\n                                    </strong>\n                                    <span>\n                                        <ppc-content key="profileResultPostfixText" data-ph-at-id="profileresultpostfix-text">that is using your credentials. Lets merge that old account to your new one in order\n                                            to improve your experience.\n                                        </ppc-content>\n                                    </span>\n                                </div>\n                                \x3c!--  Previous Profile Details Ends  --\x3e\n\n                                <div class="duplicate-profile" data-ph-at-id="duplicate-profile">\n                                    <a href="javascript:void(0);" data-ph-at-id="duplicate-profile-link">\n                                        <span show.bind="allProfiles.length == 1">\n                                            ${widgetBundle[\'duplicateProfileInfoSingler\'] | pht:{\'profileCount\':allProfiles.length}}\n                                        </span>\n                                        <span show.bind="allProfiles.length != 1">\n                                            ${widgetBundle[\'duplicateProfileInfo\'] | pht:{\'profileCount\':allProfiles.length}}\n                                        </span>\n                                    </a>\n                                </div>\n                                <ul class="duplicate-profile-list" data-ph-at-id="duplicate-profile-list">\n                                    <li repeat.for="eachMerge of allProfiles" data-ph-at-id="duplicate-profile-list-item" data-ph-at-mergeemail-text="${eachMerge.email}"\n                                        data-ph-at-mergephone-text="${eachMerge.phone}">\n                                        <figure class="duplicate-profile-img">\n                                            <img src="${eachMerge.pictureUrl}" alt="${eachMerge.firstName} ${eachMerge.lastName}" class="img-circle" show.bind="eachMerge.pictureUrl"\n                                                data-ph-at-id="profile-image">\n                                            <ppc-content type="image" show.bind="!eachMerge.pictureUrl">\n                                                <img ph-src="assets/images/default_profile.png" alt="${eachMerge.firstName} ${eachMerge.lastName}" class="img-circle" key-ph-src="defaultProfileImgSource"\n                                                    data-ph-at-id="profile-image">\n                                            </ppc-content>\n                                            <i class="icon icon-${eachMerge.socialProvider}"></i>\n                                        </figure>\n                                        <div class="duplicate-profile-details" data-ph-at-id="duplicate-profile-details">\n                                            <p> ${eachMerge.email}\n                                                <span data-ph-at-id="duplicate-email-text" show.bind="eachMerge.mergeField == \'email\'">(duplicate e-mail)</span>\n                                            </p>\n                                            <p>${eachMerge.phone}\n                                                <span data-ph-at-id="duplicate-phone-text" show.bind="eachMerge.mergeField == \'phone\'">(duplicate phone)</span>\n                                            </p>\n                                        </div>\n                                        <div class="duplicate-profile-merge" show.bind="eachMerge.mergeField == \'email\'" data-ph-at-id="duplicate-profile-email-merge">\n                                            <a href="javascript:void(0);" data-ph-at-id="merge-link">Merge\n                                                <div class="merge-tooltip">\n                                                    <span>\n                                                        <ppc-content key="tooltipText" data-ph-at-id="tooltip-text">\n                                                            You can\'t have two profiles with the\n                                                            <strong> same e-mail</strong>. In order to complete Login merge this profile\n                                                            to the new one.\n                                                        </ppc-content>\n                                                    </span>\n                                                </div>\n                                            </a>\n                                        </div>\n                                        <div class="duplicate-profile-merge" show.bind="eachMerge.mergeField == \'phone\'" data-ph-at-id="duplicate-profile-phone-merge">\n                                            <a href="javascript:void(0);" data-ph-at-id="merge-link">Merge\n                                                <i class="icon icon-down-arrow" click.delegate="eachMerge.isToggleOpen"></i>\n                                            </a>\n                                            <ul class="merge-dropdown" if.bind="eachMerge.isToggleOpen" data-ph-at-id="merge-drop-down-list">\n                                                <li data-ph-at-id="merge-drop-down-list-item">\n                                                    <a href="javascript:void(0);" click.delegate="changeMergeStatus(eachMerge, true, $index)" data-ph-at-id="merge-link">Merge</a>\n                                                </li>\n                                                <li data-ph-at-id="merge-drop-down-list-item">\n                                                    <a href="javascript:void(0);" click.delegate="changeMergeStatus(eachMerge, false, $index)" data-ph-at-id="dontmerge-link">Don\'t Merge</a>\n                                                </li>\n                                            </ul>\n                                        </div>\n                                    </li>\n                                </ul>\n                                <div class="merge-btn-wrapper clearfix">\n                                    <button class="btn plain-button btn-cancel" click.delegate="mergeCancel()" role="button" key-role="button" data-ph-at-id="cancel-button">\n                                        <ppc-content key="cancelText" data-ph-at-id="cancel-text">\n                                            Cancel\n                                        </ppc-content>\n                                    </button>\n                                    <button class="btn plain-button btn-merge ${isMergeDisabled ? \'disabled\':\'\'}" click.delegate="mergeProfiles(allProfiles)"\n                                        role="button" key-role="button" data-ph-at-id="merge-allprofiles-button">\n                                        <span class="merge-selected-count">\n                                            ${widgetBundle[\'mergeCount\'] | pht:{\'mergeCount\': candidateProfileMergeList.length}}\n                                        </span>\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    \x3c!--  Social Profile Merge Area Ends  --\x3e\n\n\n                    \x3c!--  Social Merge Auth Area Starts  --\x3e\n                    <div class="phs-merge-auth-area" data-ph-at-id="merge-auth-area" if.bind="mergeProfileStep == 2">\n                        <div class="login-auth-heading">\n                            <a class="close" href="javascript:void(0)" data-ph-at-id="close-the-popup-button" click.delegate="backToMergeFlow()">\n                                <i class="icon icon-cancel" aria-hidden="true"></i>\n                                <span class="sr-only">\n                                    <ppc-content key="closePopupText" data-ph-at-id="close-the-popup-text">Close the popup</ppc-content>\n                                </span>\n                            </a>\n                            \x3c!-- Merge Login Verification --\x3e\n                            <div class="login-auth-flow" if.bind="mergeAuthFlow == \'loginState\'">\n                                <h2 class="heading">\n                                    <ppc-content key="widgetHeadingText" data-ph-at-id="heading-text">\n                                        Login to complete merge\n                                    </ppc-content>\n                                </h2>\n                                <p class="phs-widget-sub-title">\n                                    <ppc-content key="widgetSubHeadingText" data-ph-at-id="sub-heading-text">\n                                        In orther to complete your profile merge, connect to the following account:\n                                    </ppc-content>\n                                </p>\n                            </div>\n                            \x3c!-- Merge unsuccess --\x3e\n                            <div class="merge-auth-flow" if.bind="mergeAuthFlow == \'unsuccessfulMerge\'">\n                                <h2 class="heading">\n                                    <ppc-content key="mergeUnsuccessfulText" data-ph-at-id="merge-unsuccessful-text">\n                                        <span class="merge-error hide">Merge unsuccessful</span>\n                                    </ppc-content>\n                                </h2>\n                                <p class="phs-widget-sub-title">\n                                    <ppc-content key="mergeUnsuccessfulWidgetSubHeadingText" data-ph-at-id="sub-heading-text">\n                                        The profile you tried to connect is not the duplicate profile we have identified. Connect to the following account:\n                                    </ppc-content>\n                                </p>\n                            </div>\n                            \x3c!-- Merge success --\x3e\n                            <div class="merge-auth-flow" if.bind="mergeAuthFlow == \'successfulMerge\'">\n                                <h2 class="heading">\n                                    <ppc-content key="mergeUnsuccessfulText" data-ph-at-id="merge-unsuccessful-text">\n                                        <span class="merge-error hide">Merge unsuccessful</span>\n                                    </ppc-content>\n                                </h2>\n                                <p class="phs-widget-sub-title">\n                                    <ppc-content key="mergeUnsuccessfulWidgetSubHeadingText" data-ph-at-id="sub-heading-text">\n                                        The profile you tried to connect is not the duplicate profile we have identified. Connect to the following account:\n                                    </ppc-content>\n                                </p>\n                            </div>\n                            \x3c!-- End --\x3e\n                        </div>\n\n                        <ul class="merge-auth-list" data-ph-at-id="merge-auth-list">\n                            <li data-ph-at-id="merge-auth-list-item" repeat.for="eachMerge of candidateProfileMergeList">\n                                <figure class="merge-auth-img">\n                                    <img src="${eachMerge.pictureUrl}" alt="${eachMerge.firstName} ${eachMerge.lastName}" class="img-circle" show.bind="eachMerge.pictureUrl"\n                                        data-ph-at-id="profile-image">\n                                    <ppc-content type="image" show.bind="!eachMerge.pictureUrl">\n                                        <img ph-src="assets/images/default_profile.png" alt="${eachMerge.firstName} ${eachMerge.lastName}" class="img-circle" key-ph-src="defaultProfileImgSource"\n                                            data-ph-at-id="profile-image">\n                                    </ppc-content>\n                                    <i class="icon icon-${eachMerge.socialProvider}"></i>\n                                </figure>\n                                <div class="merge-auth-details" data-ph-at-id="merge-auth-details">\n                                    <p> ${eachMerge.email}</p>\n                                    <p> ${eachMerge.phone}</p>\n                                </div>\n                                <div class="merge-auth-login" data-ph-at-id="merge-auth-login">\n                                    <a href="javascript:void(0);" data-ph-at-id="auth-link" click.delegate="doProfileLogin(eachMerge.socialProvider, true)">\n                                        <i class="icon icon-up-arrow"></i>\n                                    </a>\n                                </div>\n                            </li>\n                        </ul>\n                    </div>\n                    \x3c!--  Social Merge Auth Area Ends  --\x3e\n\n                </div>\n            </div>\n        </div>\n    </div>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v2/ph-profile-recommendations-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v2:{ddoKeyProfile:"profileRecommendations",ddoKeyProfileLSID:"getLinkedInProfileRecom",ddoKeySocialProfile:"getSocialProviderProfile",ddoKeyBrowsing:"browserRecomContent",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeyAdd:"addToCartV2",ddoKeyDelete:"deleteFromCartV2",ddoKeyStatusList:"getJobStatusListV2"}}}),define("v2/ph-profile-recommendations-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.recomContentReqObj={keywords:[],categories:[],jobsViewed:[],jobsApplied:null,locations:[],types:[],userProfile:null,landingPages:null,size:5},this.recomJobsReqObj={keywords:[],categories:[],jobsViewed:[],jobsApplied:null,locations:[],types:[],userProfile:null,landingPages:null}}return e}();t.ProfileRecommendationModel=i});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-profile-recommendations-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e,this.isLoggedIn=!1}return e.prototype.getprofileContent=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e.prototype.getProfile=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return(e||{})[t]})},e.prototype.getValidateJwtToken=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return(e||{})[t]})},e.prototype.getJobSatusList=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e.prototype.getRecommendedTrackCtx=function(){var e=this.commonService,t=e.recommendationTrackingConfig,i=e.phenomAppManager,o=i.getCountry(),n=i.getLocale(),a="us"!=o,r={};for(var s in t)if(t.hasOwnProperty(s))if(Array.isArray(t[s]))t[s].forEach(function(t){var i=[],s=[o,n,t.storageKey].join("_");if(i[0]=e.localStorageAPI.getItem(s),a){var l=["us","en_us",t.storageKey].join("_");i[1]=e.localStorageAPI.getItem(l),i=i[0].concat(i[1])}else r[t.storageKey]=i[0]});else{var l=[],c=[o,n,t[s].storageKey].join("_");if(l[0]=e.localStorageAPI.getItem(c),a){var p=["us","en_us",t[s].storageKey].join("_");l[1]=e.localStorageAPI.getItem(p),l[0].concat(l[1])}else r[t[s].storageKey]=l[0]}return r},e.prototype.updateUser=function(e){var t=e||{},i=t.data||{};this.isLoggedIn=i.isValidToken||!1},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.ProfileRecommendationsService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-profile-recommendations",["require","exports","aurelia-framework","ph-common","./ph-profile-recommendations-config","./ph-profile-recommendations-service","./ph-profile-recommendations-model","aurelia-event-aggregator"],function(e,t,i,o,n,a,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l="v2",c="ddoKeyBrowsing",p="ph-profile-recommendations-"+l,d={Profile:"profile",Browsing:"browsing"},f="linkedInProfileObj",h="linkedin_recommended_job_click",u=function(e){function t(t,i,o,a,r,s,d){var u=e.call(this,t,i,p)||this;return u.commonService=i,u.contentService=o,u.urlManager=a,u.contentModel=r,u.eventAggregator=s,u.localStorage=d,u.profileOnly="1",u.jobTeaser=!1,u.jobCaption=!1,u.addMultiLingualRecom=!1,u.recomJobCategories=[],u.user={isLoggedIn:null,userId:"",userType:"",socialProvider:"",isSocialLogin:null,isSiteLogin:null},u.getBrowsingContent=function(t){e.prototype.unhideLoader.call(u);var i,o=u.contentModel.recomJobsReqObj;i=u.addMultiLingualRecom?u.contentService.getRecommendedTrackCtx():u.commonService.getRecommendedTrackCtx();for(var a in i)o[a]=i[a];t&&(o.userProfile=u.commonService.getSpecificTrackCtx(f)),u.contentService.getprofileContent(p,n.WidgetConfig[l][c],o).then(function(t){if(e.prototype.hideLoader.call(u),t){var i=t.jobRecommendations.data&&t.jobRecommendations.data.recommendedJobs;i&&0!=i.length?e.prototype.fetchJobStatus.call(u):(i=[],e.prototype.handleError.call(u,"")),u.jobResults=i,u.onDataChange(h)}},function(t){new Error(t),e.prototype.hideLoader.call(u),e.prototype.handleError.call(u,"")})},u.getJwtToken(),u}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),this.isLiV2Enabled=this.isLinkedinV2Enabled(),this.eventAggregator.subscribe("getUserProfileData",function(e){t.seemoretext=!0,t.maxDisplayCount=t.getShowMoreCount,t.getJwtToken()})},t.prototype.handleProfileView=function(e){switch(e){case d.Profile:this.isLiV2Enabled?this.getProfileContent("ddoKeyProfileLSID"):this.getProfileContent("ddoKeyProfile");break;case d.Browsing:this.getBrowsingContent()}},t.prototype.isLinkedinV2Enabled=function(){return!!this.isLiV2Enabled||this.commonService.getSiteSettings("isLiV2Enabled")||!1},t.prototype.getJwtToken=function(){var t=this,i={};this.contentService.getValidateJwtToken(p,n.WidgetConfig[l].ddoKeyValidateJwtToken,i).then(function(e){t.updateState(e),t.handlePage()},function(i){e.prototype.hideLoader.call(t),new Error(i)})},t.prototype.handlePage=function(){if("1"==this.profileOnly)if(this.user.isLoggedIn||this.user.isSocialLogin)this.handleProfileView(d.Profile);else{e.prototype.hideContainer.call(this);var t={};t.jobs=[],this.eventAggregator.publish("ph:profileRecomData",t)}else this.recommendationType=this.user.isLoggedIn?d.Profile:d.Browsing,this.handleProfileView(this.recommendationType)},t.prototype.getProfileContent=function(t){var i=this;e.prototype.unhideLoader.call(this),this.contentService.getprofileContent(p,n.WidgetConfig[l][t],{}).then(function(t){if(e.prototype.hideLoader.call(i),t=t.data){var o=t&&t.results;o&&o.length?(e.prototype.fetchJobStatus.call(i),e.prototype.showContainer.call(i)):(o=[],e.prototype.handleError.call(i,"")),i.jobResults=o,e.prototype.onDataChange.call(i),i.recomJobCategories=t.linkedInCategoryWidget;var n={};n.jobs=i.jobResults||[],n.categories=i.recomJobCategories||[],i.eventAggregator.publish("ph:profileRecomData",n)}},function(t){e.prototype.onError.call(i,""),e.prototype.hideLoader.call(i);var o={};o.jobs=[],i.eventAggregator.publish("ph:profileRecomData",o)})},t.prototype.onDataChange=function(t){var i=this;this.jobWidgetSettingsPromise.then(function(o){e.prototype.onDataChange.call(i,t)})},t.prototype.updateState=function(e){var t=e||{},i=t.data||{};this.user.isLoggedIn=i.isValidToken||!1,this.user.userId=i.userId||"",this.user.userType=i.userType||"",this.user.socialProvider=i.socialProvider||"",this.user.isSiteLogin=i.isSiteLogin||!1,this.user.isSocialLogin=i.isSocialLogin||!1},t.prototype.getLoacalePath=function(e){return e=e.split("_"),e="/"+e[1]+"/"+e[0]+"/"},t.prototype.getUrlWithLocale=function(t,i,o,n){t&&t.setAttribute&&t.setAttribute("ph-click-ctx",i),t&&t.getAttribute&&t.getAttribute("ph-tevent")&&(e.prototype.subscribeToTrackingEvents.call(this,t),t.setAttribute("ph-tref",(new Date).getTime()+(65536*(1+Math.random())|0).toString(16).substring(0)),t.setAttribute("ph-tag",e.prototype.tagName),this.commonService.storePageTrackEventData(t.getAttribute("ph-tref"),o));var a=this.getLoacalePath(o.locale),r=phApp.urlMap[i];if(r)return phApp.baseDomain+a+this.urlManager.getUrl(i,o,n,r)},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"recommendationType",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"profileOnly",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"jobTeaser",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"jobCaption",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"addMultiLingualRecom",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"isLiV2Enabled",void 0),t=__decorate([i.customElement(p),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(u=void 0!==o.CommonService&&o.CommonService)&&u||Object,a.ProfileRecommendationsService,"function"==typeof(g=void 0!==o.UrlManager&&o.UrlManager)&&g||Object,r.ProfileRecommendationModel,s.EventAggregator,"function"==typeof(m=void 0!==o.LocalStorageAPI&&o.LocalStorageAPI)&&m||Object])],t);var u,g,m}(o.PhenomJobWidget);t.ProfileRecommendations=u}),define("text!v2/ph-profile-recommendations.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v2/ph-people-also-viewed-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v2:{ddoKey:"peopleAlsoViewed",jobDetailDDOKey:"jobDetail"}}}),define("v2/ph-people-also-viewed-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.pavReqObj={jobSeqNo:"",size:"5"}}return e}();t.PeopleAlsoViewedModel=i});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-people-also-viewed-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this.commonService=e,this.getPAVJobs=function(e,i,o){return t.commonService.getDDO(e,i,o).then(function(e){return e})}}return e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.PeopleAlsoViewedService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-people-also-viewed",["require","exports","aurelia-framework","ph-common","./ph-people-also-viewed-config","./ph-people-also-viewed-service","./ph-people-also-viewed-model"],function(e,t,i,o,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="v2",l="ddoKey",c="jobDetailDDOKey",p="ph-people-also-viewed-"+s,d="job_click",f=function(e){function t(t,i,o,a){var r=e.call(this,t,i,p)||this;return r.commonService=i,r.pavService=o,r.pavModel=a,r.pavJobs=[],r.jobResults=[],r.fetchJobSeqNo=function(){if(r.jobSeqNo&&null!=r.jobSeqNo&&r.jobSeqNo.length>0)r.getPAVJobs();else{var t=r.commonService.getCachedDDO(n.WidgetConfig[s][c],p);t&&t.data&&t.data.job&&t.data.job.jobSeqNo?(r.jobSeqNo=t.data.job.jobSeqNo,r.getPAVJobs()):(e.prototype.hideLoader.call(r),e.prototype.handleError.call(r,""))}},r.getPAVJobs=function(){e.prototype.unhideLoader.call(r);var t=r.pavModel.pavReqObj;r.jobSeqNo&&(t.jobSeqNo=r.jobSeqNo),r.pavService.getPAVJobs(p,n.WidgetConfig[s][l],t).then(function(t){e.prototype.hideLoader.call(r),t&&t.peopleAlsoViewed&&t.peopleAlsoViewed.data.results?r.jobResults=t.peopleAlsoViewed.data.results||[]:(e.prototype.hideLoader.call(r),e.prototype.handleError.call(r,"")),r.onDataChange(d)},function(t){new Error(t),e.prototype.hideLoader.call(r),e.prototype.handleError.call(r,"")})},r}return __extends(t,e),t.prototype.attached=function(){e.prototype.attached.call(this),this.fetchJobSeqNo()},t.prototype.onDataChange=function(t){e.prototype.onDataChange.call(this,t)},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable(),__metadata("design:type",String)],t.prototype,"jobSeqNo",void 0),t=__decorate([i.customElement(p),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(f=void 0!==o.CommonService&&o.CommonService)&&f||Object,a.PeopleAlsoViewedService,r.PeopleAlsoViewedModel])],t);var f}(o.PhenomJobWidget);t.PeopleAlsoViewed=f}),define("text!v2/ph-people-also-viewed.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v2/views/ph-people-also-viewed-v2/default/view.html",["module"],function(e){
e.exports='<template>\n        <div class="show-loader" ph-loading-img="show-loader.bind: showLoader" show.bind="showLoader"></div>\n        <div class="phs-widget-block-area ph-widget-box" show.bind="!showLoader && jobResults.length">\n            <div class="widget-container">\n                <div class="phs-widget-heading">\n                    <h2>\n                        <ppc-content key="widgetHeadingText" data-ph-at-id="heading-text">\n                            People also viewed\n                        </ppc-content>\n                    </h2>\n                </div>\n                <div class="content-block">\n                    <div as-element="ph-refer-friend-v1" data-widget="ph-refer-friend-v1" class="ph-refer-friend-v1-default-default" instance-id="6iy90l">\n                            \n                    </div>\n                    <ul data-ph-at-id="jobs-list" data-ph-at-widget-data-count="${jobResults.length}">\n                        <li class="jobs-list-item" repeat.for="eachJob of jobResults" show.bind="maxDisplayCount > $index" data-ph-at-id="jobs-list-item">\n                            <a ph-tevent="recommended_job_click" ref="linkEle" href="${getUrl(linkEle, \'job\', eachJob)}" class="job-link-linkedin">\n                                <div class="information">\n                                    <h2 class="job-title" if.bind="eachJob.title">\n                                        Job Title : ${eachJob.title}\n                                    </h2>\n                                    <div repeat.for="eachAttr of jobAttrs">\n                                        <span class="job-location" if.bind="eachAttr.name.indexOf(\'location\') != -1">\n                                            <b>Job Location</b> : ${eachJob.location}\n                                        </span>\n                                        <span class="job-category" if.bind="ea">${eachJob.category}</span>\n                                        <span class="job-industry" if.bind="eachJob.industry && eachAttr.name.indexOf(\'industry\')!= -1">\n                                            <b>Industry:</b> : ${eachJob.industry}\n                                        </span>\n                                        <span class="job-id" if.bind="eachJob.jobId &&  eachAttr.name.indexOf(\'jobId\')!= -1">\n                                            <span>\n                                                <ppc-content key="jobIdText" data-ph-at-id="jobid-text">\n                                                    <b>Job ID:</b>\n                                                </ppc-content>\n                                            </span>\n                                            ${eachJob.jobId}\n                                        </span>\n                                        <span class="job-type" show.bind="eachJob.name.type && eachAttr.indexOf(\'type\')!= -1">\n                                            <span>\n                                                <ppc-content key="jobtype" data-ph-at-id="jobtype-text">\n                                                    Job Type:\n                                                </ppc-content>\n                                            </span>\n                                            ${eachJob.type}\n                                        </span>\n                                        <span class="job-category" show.bind="eachJob.category && eachAttr.name.indexOf(\'category\')!= -1">\n                                                <span>\n                                                    <ppc-content key="jobCategory" data-ph-at-id="jobCategory-text">\n                                                        Job Category: \n                                                    </ppc-content>\n                                                </span>\n                                                ${eachJob.category}\n                                            </span>\n                                        <span class="job-postdate" if.bind="eachJob.postedDate  && eachAttr.name.indexOf(\'postedDate\')!= -1">\n                                            <span>\n                                                <ppc-content key="jobPostedDate1" data-ph-at-id="jobposteddate-text">\n                                                    <b> Posted on: </b>\n                                                </ppc-content>\n                                            </span>\n                                            ${eachJob.postedDate | dateFormat:getDateFormat(\'MMDDYYYY_SLASH\')}\n                                        </span>\n                                        <span class="job-expirydate" if.bind="eachAttr.name.indexOf(\'expiryDate\')!= -1 && eachJob.expiryDate">\n                                            <b>Job Expiry Date</b> : ${eachJob.expiryDate | dateFormat:getDateFormat(\'MMDDYYYY_SLASH\')}\n                                        </span>\n        \n                                        <ul class="job-multi-locations" if.bind="eachJob.multi_location.length > 1 && eachAttr.name.indexOf(\'location\')!= -1">\n                                            <li>\n                                                <button data-ph-at-id="job-multi-locations-button" ph-tevent="multi_location_click" data-ph-tevent-attr-trait14="${eachJob.category}"\n                                                 data-ph-tevent-attr-trait5="${eachJob.jobSeqNo}" keyup.trigger="($event.keyCode === 27)?(eachJob.toggleOpen = false):\'\'"\n                                                 class="esc$$close" click.delegate="eachJob.toggleOpen = !eachJob.toggleOpen" tabindex="0" role="button" key-role="c-business-programs-operations-ph-search-results-v1-view-external-btnRole"\n                                                 id="searchLoc" aria-haspopup="true" aria-expanded="${eachJob.toggleOpen ? \'true\' : \'false\'}" aria-label="${eachJob.title} ${eachJob.jobSeqNo} Job available in ${eachJob.multi_location.length} locations"\n                                                 data-ph-at-job-multilocation-count="${eachJob.multi_location.length}">\n                                                    <span>\n                                                        <ppc-content key="multiLocationText1" data-ph-at-id="multilocation-text1">Job available in</ppc-content>\n                                                    </span> ${eachJob.multi_location.length}\n                                                    <span>\n                                                        <ppc-content key="multiLocationText2" data-ph-at-id="multilocation-text2">locations</ppc-content>\n                                                    </span>\n                                                    <i ref="listItemIcon" class="${eachJob.toggleOpen ? \'icon icon-up-arrow\' : \'icon icon-down-arrow\'}" aria-hidden="true" data-ph-id="ph-18929372493690734-view-external-ph-search-results-v163"></i>\n                                                </button>\n                                                <ul ref="listItem" class="${eachJob.toggleOpen ? \'show\' : \'hide\'}" data-ph-at-id="job-multi-locations-list">\n                                                    <li class="location" repeat.for="eachLocation of eachJob.multi_location" aria-label="${eachLocation}" data-ph-at-id="job-multi-location-item"\n                                                     data-ph-at-job-location-text="${eachLocation}">\n                                                        ${eachLocation}\n                                                    </li>\n                                                </ul>\n                                            </li>\n                                        </ul>\n                                    </div>\n                                    <p class="job-description" innerhtml.bind="eachJob.descriptionTeaser | sanitizeHTML" data-ph-at-id="jobdescription-text"></p>\n                                    <ul class="job-multi-locations" if.bind="eachJob.multi_location.length > 1 && eachAttr.name.indexOf(\'location\') != -1">\n                                        <li>\n                                            <button data-ph-at-id="job-multi-locations-button" ph-tevent="multi_location_click" data-ph-tevent-attr-trait14="${eachJob.category}"\n                                             data-ph-tevent-attr-trait5="${eachJob.jobSeqNo}" keyup.trigger="($event.keyCode === 27)?(eachJob.toggleOpen = false):\'\'"\n                                             class="esc$$close" click.delegate="eachJob.toggleOpen = !eachJob.toggleOpen" tabindex="0" role="button" key-role="c-business-programs-operations-ph-search-results-v1-view-external-btnRole"\n                                             id="searchLoc" aria-haspopup="true" aria-expanded="${eachJob.toggleOpen ? \'true\' : \'false\'}" aria-label="${eachJob.title} ${eachJob.jobSeqNo} Job available in ${eachJob.multi_location.length} locations"\n                                             data-ph-at-job-multilocation-count="${eachJob.multi_location.length}">\n                                                <span>\n                                                    <ppc-content key="multiLocationText1" data-ph-at-id="multilocation-text1">Job available in</ppc-content>\n                                                </span> ${eachJob.multi_location.length}\n                                                <span>\n                                                    <ppc-content key="multiLocationText2" data-ph-at-id="multilocation-text2">locations</ppc-content>\n                                                </span>\n                                                <i ref="listItemIcon" class="${eachJob.toggleOpen ? \'icon icon-up-arrow\' : \'icon icon-down-arrow\'}" aria-hidden="true" data-ph-id="ph-18929372493690734-view-external-ph-search-results-v163"></i>\n                                            </button>\n                                            \x3c!--dropView used to toggle toggleMultiLocationView based on item click: js dependent --\x3e\n                                            <ul ref="listItem" class="${eachJob.toggleOpen ? \'show\' : \'hide\'}" data-ph-at-id="job-multi-locations-list">\n                                                <li class="location" repeat.for="eachLocation of eachJob.multi_location" aria-label="${eachLocation}" data-ph-at-id="job-multi-location-item"\n                                                 data-ph-at-job-location-text="${eachLocation}">\n                                                    ${eachLocation}\n                                                </li>\n                                            </ul>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </a>\n                            <div repeat.for="eachAction of jobActions">\n                                <div if.bind="eachAction.name == \'applyNow\'">\n                                    <a ph-tevent="from_data_attribute" data-ph-tevent-name="${eachJob.actionEventName}" href.bind="eachJob.actionUrl" target.bind="eachJob.externalApply!=\'undefind\' && eachJob.externalApply && !clickTojd ? \'_blank\' : \'_self\'"\n                                     class="btn plain-button apply-btn" data-ph-at-id="apply-link" data-ph-tevent-attr-trait5="${eachJob.jobSeqNo}" data-ph-tevent-attr-trait14="${eachJob.category}">\n                                        <ppc-content key="jobApplyActionLink" data-ph-at-id="apply-text">Apply Now</ppc-content>\n                                    </a>\n                                </div>\n                                <div if.bind="eachAction.name == \'shareJob\'">\n                                    <section class="ph-widget" instance-id="6ty93l">\n                                        <div as-element="ph-social-share-v3" detail-obj.bind="eachJob"\n                                        share-option="google-plus,facebook,twitter,linkedin" instance-id="6ty93l">\n                                        </div>\n                                    </section>\n                                    <section class="ph-widget" instance-id="1gd0h6">\n                                        <div as-element="ph-email-job-v1" class="ph-email-job-v1-default-default" data-widget="ph-email-job-v1" view="default" is-popup-reqd="true" \n                                        instance-id="1gd0h6">\n                                        </div>\n                                    </section>\n                                </div>\n                                <div if.bind="eachAction.name == \'refer\'">\n                                    <button class="refer-friend-button" click.delegate="handleReferJob()" data-ph-at-id="refer-friend-button" aria-label="Refer ${job.title}"\n                                        role="button" key-role="btnRole" aria-expanded="${showPopup ? \'true\' : \'false\'}" aria-haspopup="true">\n                                        <ppc-content key="referButtonText" data-ph-at-id="refer-friend-button-text">\n                                            REFER\n                                        </ppc-content>\n                                    </button>\n                                </div>\n                                <div if.bind="eachAction.name == \'addToCart\'">\n                                    <div class="savejob-checkbox" if.bind="bulkcart == true">\n                                        <label for="save-${eachJob.jobSeqNo}" class="${eachJob.inProgress ? \'disabled\' : \'\'}">\n                                            <input type="checkbox" id="save-${eachJob.jobSeqNo}" disabled.bind="eachJob.inProgress" ph-tevent="job_added_to_jobcart"\n                                                checked.bind="eachJob.isJobSaved" change.delegate="handleSaveJob(eachJob)" title="${eachJob.isJobSaved === false ? \'Save Job\': \'Saved Job\'}">\n                                            <span class="label-content" if.bind="eachJob.isJobSaved === false">\n                                                <i class="icon icon-star-empty"></i>\n                                                <ppc-content key="literal-1487954993542-22">Save</ppc-content>\n                                            </span>\n                                            <span class="label-content" if.bind="eachJob.isJobSaved === true">\n                                                <i class="icon icon-star"></i>\n                                                <ppc-content key="literal-1487954993542-23">Saved</ppc-content>\n                                            </span>\n                                        </label>\n                                    </div>\n                                </div>\n                                <div if.bind="eachAction.name == \'removeFromCart\'">\n                                    <a href="javascript:void(0)" click.delegate="deleteJobFromCart(eachJob)" class="favourite" data-ph-at-id="job-remove-link">\n                                        <i class="icon icon-delete">Delete</i>\n                                    </a>\n                                </div>\n                        </li>\n                    </ul>\n                    <div class="phs-widget-footer" if.bind="seemoretext" data-ph-at-id="navigation">\n                        <a href="javascript:void(0)" class="btn primary-button" keyup.trigger="seemoreOnKeyUp($event)" show.bind="showMore === true && jobsDisplayMode == \'seeMore\'"\n                         click.trigger="seemore()" title="See more recommended jobs" key-title="seemore-link-title" data-ph-at-id="seemore-link">\n                            <ppc-content key="seeMoreText" data-ph-at-id="seemore-text">See more </ppc-content>\n                            <i class="icon icon-down-arrow" aria-hidden="true"></i>\n                        </a>\n                        <a href="javascript:void(0)" class="btn primary-button" keyup.trigger="seemoreOnKeyUp($event)" show.bind="showMore === false"\n                         click.trigger="seeLess()" title="See less recommended jobs" key-title="seeless-link-title" data-ph-at-id="seeless-link">\n                            <ppc-content key="seeLessText" data-ph-at-id="seeless-text">See less </ppc-content>\n                            <i class="icon icon-arrow-up" aria-hidden="true"></i>\n                        </a>\n                        <a href="javascript:void(0)" class="btn primary-button" keyup.trigger="seemoreOnKeyUp($event)" show.bind="showMore === true && jobsDisplayMode == \'seeNext\'"\n                         click.trigger="seeNext()" title="See next recommended jobs" key-title="seenext-link-title" data-ph-at-id="seenext-link">\n                            <ppc-content key="seeNextText" data-ph-at-id="seenext-text">See next</ppc-content>\n                            <i class="icon icon-arrow-up" aria-hidden="true"></i>\n                        </a>\n                        <a href="javascript:void(0)" class="btn primary-button" keyup.trigger="seemoreOnKeyUp($event)" show.bind="showMore === true && jobsDisplayMode == \'seeEvenMore\'"\n                         click.trigger="seeEvenMore()" title="See even more recommended jobs" key-title="seeevenmore-link-title" data-ph-at-id="seeevenmore-link">\n                            <ppc-content key="seeEvenMoreText" data-ph-at-id="seeevenmore-text">See even more</ppc-content>\n                            <i class="icon icon-arrow-up" aria-hidden="true"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="no-data-view" show.bind="showErrorMsg" data-ph-at-id="nodata-block">\n                    <p>\n                        <ppc-content key="noRecomJobsInfoText" data-ph-at-id="nodata-text">\n                            No recommendations found\n                        </ppc-content>\n                    </p>\n                </div>\n            </div>\n        </div>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-find-your-fit-container-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"uploadCvMergeFlow",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeySocialProfile:"mergedProfileV2",ddoKeyEagerLoad:"eagerLoadFyfSession",ddoKeyDeleteResume:"removeProfile",ddoKeyCiProfileUpdate:"ciProfileUpdate",ddoKeyLogout:"jwtLogout",ddoKeyStepConfig:"fyfConfig",ddoKeyFetchFitScore:"fetchFitScore",jobDetailDDOKey:"jobDetail",ddoKeyFitScoreSettings:"fitScoreSettings",ddoKeyRecentTitles:"fyfTitles",ddoKeySkills:"fyfSkills",ddoKeySkillSuggestions:"fyfSkillSuggestions",ddoKeyLocations:"fyfLocations",ddoKeyGetPiiConsentConfig:"getPiiConsentConfig",ddoKeyResumeTempResume:"removeTempResume",ddoKeySendVerificationEmail:"sendVerificationEmail"}}});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-find-your-fit-container-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e?e[t]:{}})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.FindYourFitContainerService=n});var __assign=this&&this.__assign||Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e};define("v1/ph-resume-info-confirmation",["require","exports","./ph-find-your-fit-container-config"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t,i){this.jobTitles={},this.workExperience={},this.preferredLocation={},this.skills={},this.experienceData=[{displayName:"0-3",min:0,max:3},{displayName:"4-8",min:4,max:8},{displayName:"9-14",min:9,max:14},{displayName:"15+",min:15,max:100}],this.fyf=e,this.elementTag=t,this.element=i,this.populateResumeData(this.fyf.profileData),this.populateStepData(this.fyf.stepData)}return e.prototype.populateResumeData=function(e){this.getResumeTitles(e),this.getResumeWorkExperience(e),this.getResumeSkills(e),this.getResumeLocations(e)},e.prototype.populateStepData=function(e){var t=this;e&&e.steps&&e.steps.forEach(function(e){t.fyf.resumeConformationSteps&&e.stepType&&t.fyf.resumeConformationSteps.includes(e.stepType)&&(t[e.stepType]=t[e.stepType]||{},t[e.stepType]=__assign({},t[e.stepType],e)),"recentTitle"==e.stepType&&(t.jobTitles=t.jobTitles||{},t.jobTitles=__assign({},t.jobTitles,e))})},e.prototype.getResumeTitles=function(e){var t=this;this.jobTitles={},this.jobTitles.selectedTitles=[],e&&e.jobTitles?e.jobTitles.forEach(function(e){t.pushData(t.jobTitles.selectedTitles,e)}):e&&e.experience&&e.experience.forEach(function(e){e&&e.jobTitle&&t.pushData(t.jobTitles.selectedTitles,e.jobTitle)})},e.prototype.getResumeWorkExperience=function(e){var t=this;if(this.workExperience={},e&&e.workExperience)this.experienceData.forEach(function(i){e.workExperience.displayName==i.displayName&&(t.workExperience.selectedExp=i)});else if(e&&e.experience){var i=0;e.experience.forEach(function(e){if(e&&e.startDate&&e.endDate){var o=t.getWorkDurationInMonths(e.startDate,e.endDate);o>0&&(i+=o)}}),i>0&&(i=Math.floor(i/12)||0,this.experienceData.forEach(function(e){i>=e.min&&i<=e.max&&(t.workExperience.selectedExp=e)}))}},e.prototype.getResumeSkills=function(e){var t=this;this.skills={},this.skills.selectedSkills=[],e.skills&&e.skills.forEach(function(e){t.pushData(t.skills.selectedSkills,e)}),this.fetchSuggestedSkills()},e.prototype.getResumeLocations=function(e){var t=this;this.preferredLocation={},this.preferredLocation.selectedLocations=[],this.preferredLocation.preferredLocations=[],e&&e.preferredLocation?e.preferredLocation.forEach(function(e){e.location_display&&-1==t.preferredLocation.selectedLocations.indexOf(e.location_display)&&(t.preferredLocation.preferredLocations.push(location),t.preferredLocation.selectedLocations.push(e.location_display))}):e&&e.experience&&e.experience.forEach(function(e){if(e&&e.location){var i={},o=t.getLocationName(e.location,!0),n=t.getLocationName(e.location);n&&o&&(i.location_display=o,i.standardlocation=n,i.latlong={},-1==t.preferredLocation.selectedLocations.indexOf(o)&&(t.preferredLocation.preferredLocations.push(i),t.preferredLocation.selectedLocations.push(o)))}})},e.prototype.getLocationName=function(e,t){var i="";return(e.city||e.state||e.country)&&(e.city&&(i+=this.toTitleCase(e.city)),e.state&&(i=i?i+","+(t?" ":""):i,i+=this.toTitleCase(e.state)),e.country&&(i=i?i+","+(t?" ":""):i,i+=this.toTitleCase(e.country))),i},e.prototype.toTitleCase=function(e){return e=e||"",e.toLowerCase().split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")},e.prototype.getWorkDurationInMonths=function(e,t){var i=0;try{var o=0,n=0;e.year&&t.year&&(o=parseInt(t.year)-parseInt(e.year)),e.month&&t.month&&(n=parseInt(t.month)-parseInt(e.month))<0&&(o--,n+=12),o>0&&(n+=12*o),i=n}catch(e){}return i},e.prototype.getJobTitles=function(){var e=this,t=this.jobTitles.value;if(t.length){var o={};return o.keywords=t,o.size=this.jobTitles&&this.jobTitles.size||10,this.fyf.findYourFitContainerService.makeDDORequest(this.elementTag,i.WidgetConfig.v1.ddoKeyRecentTitles,o).then(function(t){return t&&t.data&&t.data.results&&t.data.results.length?e.jobTitles.searchTitles=t.data.results:e.jobTitles.searchTitles=[],e.jobTitles.showDropDown=!0,setTimeout(function(){e.fyf.updateResults()},0),e.jobTitles.searchTitles},function(e){new Error(e)})}},e.prototype.fetchSkills=function(){var e=this,t=this.skills.value||"";if(t.length){var o={},n=this.skills.selectedSkills||[];return o.keywords=t,o.size=this.skills&&this.skills.size||10,o.addedSkills=n.length?n:[],this.fyf.findYourFitContainerService.makeDDORequest(this.elementTag,i.WidgetConfig.v1.ddoKeySkills,o).then(function(t){return t&&t.data&&t.data.results&&t.data.results.length?e.skills.skillsList=t.data.results:e.skills.skillsList=[],e.skills.showSkillsDropdown=!0,setTimeout(function(){e.fyf.updateResults()},0),e.skills.skillsList},function(e){new Error(e)})}},e.prototype.fetchSuggestedSkills=function(){var e=this,t={};t.titles=this.jobTitles.selectedTitles||[],t.categories=this.fyf.profileData&&this.fyf.profileData.categories||[],t.skills=this.skills.selectedSkills||[],t.size=7,this.fyf.findYourFitContainerService.makeDDORequest(this.elementTag,i.WidgetConfig.v1.ddoKeySkillSuggestions,t).then(function(t){t&&t.data&&t.data.results&&(e.skills=e.skills||{},e.skills.suggestedSkills=t.data.results)})},e.prototype.selectSuggestions=function(e,t){var i=this;if(this.skills.selectedSkills=this.skills.selectedSkills||[],-1==this.skills.selectedSkills.indexOf(e)){this.pushData(this.skills.selectedSkills,e,!0),this.pushData(this.skills.selected_skills,e);var o=e+" skill added";if(this.fyf.addSelectionRemovalSronly(o),1==this.skills.selectedSkills.length)this.fyf.focusElement(".ph-a11y-skills input",200);else{var n=this.element.querySelectorAll("#suggested-skills li");t<this.skills.suggestedSkills.length-1?n[t+1]&&n[t+1].firstElementChild&&setTimeout(function(){n[t+1].firstElementChild.focus()},200):n[t-1]&&n[t-1].firstElementChild&&setTimeout(function(){n[t-1].firstElementChild.focus()},200)}setTimeout(function(){i.skills.suggestedSkills.splice(t,1)},200)}},e.prototype.fetchLocations=function(){var e=this,t=this.preferredLocation.value||"";if(t.length){var o=this.preferredLocation&&this.preferredLocation.locationKey||"city",n=o.split(","),a={};return a.keywords=t,a.size=this.preferredLocation&&this.preferredLocation.size||10,this.fyf.findYourFitContainerService.makeDDORequest(this.elementTag,i.WidgetConfig.v1.ddoKeyLocations,a).then(function(t){return t&&t.data&&t.data.results&&t.data.results.length?(e.preferredLocation.locationsList=[],t.data.results.forEach(function(t,i){n.find(function(e){return e.trim()==t.type})&&e.preferredLocation.locationsList.push(t)})):e.preferredLocation.locationsList=[],e.preferredLocation.showLocationDropdown=!0,setTimeout(function(){e.fyf.updateResults()},0),e.preferredLocation.locationsList})}},e.prototype.pushData=function(e,t,i){if(e){var o=!1;e.forEach(function(e){e&&t&&e.trim().toLowerCase()==t.trim().toLowerCase()&&(o=!0)}),!o&&(i?e.unshift(t):e.push(t))}},e.prototype.getIndex=function(e,t){var i=-1;return e&&e.forEach(function(e,o){e.title==t&&(i=o)}),i},e.prototype.loadPreviousStep=function(){var e=this.fyf.activeStepIndex-2;this.fyf.resumeConformationSteps&&e>=0&&e<this.fyf.resumeConformationSteps.length&&this.fyf.changeActiveStep(this.fyf.resumeConformationSteps[e])},e.prototype.loadNextStep=function(){var e=this,t=this.getPayloadBasedOnStep();t&&Object.keys(t).length?(this.fyf.unhideLoader(),t.editType="mergeProfile",t.flowType="upload_resume",this.fyf.resumeInfoSaveError=!0,this.fyf.findYourFitContainerService.makeDDORequest(this.elementTag,i.WidgetConfig.v1.ddoKeyCiProfileUpdate,t).then(function(t){t&&"success"==t.status?e.next():e.fyf.resumeInfoSaveError=!0,e.fyf.hideLoader()},function(t){new Error(t),e.fyf.hideLoader()})):this.next()},e.prototype.next=function(){if(this.fyf.resumeConformationSteps&&this.fyf.activeStepIndex==this.fyf.resumeConformationSteps.length)this.fyf.closeResumeInfoPopup(!0);else{var e=this.fyf.activeStepIndex;this.fyf.resumeConformationSteps&&e>=0&&e<this.fyf.resumeConformationSteps.length&&this.fyf.changeActiveStep(this.fyf.resumeConformationSteps[e])}},e.prototype.getPayloadBasedOnStep=function(){var e={};return"jobTitles"==this.fyf.activeStep?(e.profile={},e.stepType="jobTitles",e.profile.jobTitles=this.jobTitles.selectedTitles||[]):"skills"==this.fyf.activeStep?(e.profile={},e.stepType="skills",e.profile.skills=this.skills.selectedSkills||[]):"workExperience"==this.fyf.activeStep?this.workExperience.selectedExp&&Object.keys(this.workExperience.selectedExp).length&&(e.profile={},e.stepType="workExperience",e.profile.workExperience=this.workExperience.selectedExp):"preferredLocation"==this.fyf.activeStep&&(e.profile={},e.stepType="preferredLocation",e.profile.preferredLocation=this.preferredLocation.preferredLocations||[]),e},e.prototype.getFieldOptions=function(e){var t="";switch(e){case"jobTitles":return t=this.jobTitles.value||"",t.length?this.getJobTitles():(this.jobTitles.searchTitles=[],[]);case"skills":return t=this.skills.value||"",t.length?this.fetchSkills():(this.skills.skillsList=[],[]);case"preferredLocation":return t=this.preferredLocation.value||"",t.length?this.fetchLocations():(this.preferredLocation.locationsList=[],this.preferredLocation.locationsList)}},e.prototype.getActiveIndex=function(e){var t=this,i=-1;switch(e){case"jobTitles":return i=this.getIndex(this.jobTitles.searchTitles,this.jobTitles.value),this.fyf.updateResults(),i;case"skills":return i=this.getIndex(this.skills.skillsList,this.skills.value),this.fyf.updateResults(),i;case"preferredLocation":return this.preferredLocation.locationsList&&this.preferredLocation.locationsList.forEach(function(e,o){e.location_display==t.preferredLocation.value&&(i=o)}),this.fyf.updateResults(),i}},e.prototype.setFieldValue=function(e,t){var i=this;switch(e){case"jobTitles":var o=this.jobTitles;if(o.value="",o.searchTitles.length&&o.searchTitles[t]){var n=o.searchTitles[t].title;o.searchTitles[t].isTitleSelected=!0,o.selectedTitles=o.selectedTitles||[],this.pushData(o.selectedTitles,n,!0),o.showDropDown=!1,o.selected_jobTitles=o.selected_jobTitles||[],this.pushData(o.selected_jobTitles,n);var a=n+" title added";this.fyf.addSelectionRemovalSronly(a)}else if(o.value&&-1==t){var r=!1;if(o.searchTitles.length)for(var s=0,l=o.searchTitles;s<l.length;s++){var c=l[s];c.title.toLowerCase()===o.value.toLowerCase()&&(c.isTitleSelected=!0,this.pushData(o.selectedTitles,o.value,!0),o.selected_jobTitles=o.selected_jobTitles||[],this.pushData(o.selected_jobTitles,o.value),r=!0)}var a=o.value+" title added";this.fyf.addSelectionRemovalSronly(a),r||(this.pushData(o.selectedTitles,o.value,!0),o.typed_jobTitles=o.typed_jobTitles||[],this.pushData(o.typed_jobTitles,o.value))}break;case"skills":var p=void 0;if(this.skills.skillsList.length&&this.skills.skillsList[t]){if(p=this.skills.skillsList[t].skill,this[e].value=this[e].skillsList[t].skill,this[e].selectedSkills&&-1==this[e].selectedSkills.indexOf(p.toLowerCase())){this[e].selectedSkills.unshift(p),this.skills.selected_skills=this.skills.selected_skills||[],this.skills.selected_skills.push(p);var a=p+" skill added";this.fyf.addSelectionRemovalSronly(a),setTimeout(function(){i.skills.value=""},150)}}else if(this[e].value.length&&-1==t){var d=this.skills.value,r=!1;if(this.skills.skillsList.length)for(var f=this.skills.skillsList,h=0,u=f;h<u.length;h++){var g=u[h];g.skill.toLowerCase()===d.toLowerCase()&&(this.skills.selected_skills=this.skills.selected_skills||[],this.skills.selected_skills.push(d),r=!0)}if(!r){var m=void 0
;this.skills.selected_skills&&this.skills.selected_skills.length&&(this.skills.selected_skills=this.skills.selected_skills.map(function(e){return e.toLowerCase()}),-1!=this.skills.selected_skills.indexOf(d.toLowerCase())&&(m=!0)),m||(this.skills.typed_skills=this.skills.typed_skills||[],this.skills.typed_skills.push(d))}if(-1==this[e].selectedSkills.indexOf(d)){this[e].selectedSkills.unshift(d);var a=d+" skill added";this.fyf.addSelectionRemovalSronly(a),setTimeout(function(){i.skills.value=""},150)}var y=this.skills.suggestedSkills&&this.skills.suggestedSkills.findIndex(function(e){return e.skill.toLowerCase()==d.toLowerCase()});-1!=y&&this.skills.suggestedSkills&&this.skills.suggestedSkills.splice(y,1)}this.fetchSuggestedSkills(),this[e].showSkillsDropdown=!1;break;case"preferredLocation":if(this.preferredLocation.locationsList.length&&this.preferredLocation.locationsList[t]){var v=this.preferredLocation.locationsList[t];this.populateSelectedData(e,v)}}},e.prototype.populateSelectedData=function(e,t){switch(e){case"preferredLocation":var i={},o=this.preferredLocation.selectedLocations||[];if(-1==o.indexOf(t.location_display)){i.standardlocation=t.standardlocation||"",i.location_display=t.location_display||"",i.latlong=t.latlong||{},this.preferredLocation.preferredLocations=this.preferredLocation.preferredLocations||[],this.preferredLocation.preferredLocations.unshift(i);var n=t.location_display+"location added";this.fyf.addSelectionRemovalSronly(n),this.preferredLocation.selectedLocations=this.preferredLocation.selectedLocations||[],this.preferredLocation.selectedLocations.unshift(t.location_display),t.isLocationSelected=!0}else{var a=o.indexOf(t.location_display);this.preferredLocation.preferredLocations[a]=t}this.preferredLocation.value="",this.preferredLocation.showLocationDropdown=!1}},e.prototype.removeSelectedData=function(e,t){var i=this;switch(e){case"jobTitles":var o=this.jobTitles.selectedTitles[t]+" title removed";if(this.fyf.addSelectionRemovalSronly(o),1==this.jobTitles.selectedTitles.length)this.fyf.focusElement(".ph-a11y-job-title input",200);else{var n=this.element.querySelectorAll("#selected-titles li");t<this.jobTitles.selectedTitles.length-1?n[t+1].firstElementChild&&setTimeout(function(){n[t+1].firstElementChild.focus()},200):n[t-1].firstElementChild&&setTimeout(function(){n[t-1].firstElementChild.focus()},200)}var a=this.jobTitles.searchTitles&&this.jobTitles.searchTitles.findIndex(function(e){return e.title&&e.title.trim().toLowerCase()==i.jobTitles.selectedTitles[t]&&i.jobTitles.selectedTitles[t].trim().toLowerCase()});if(setTimeout(function(){i.jobTitles.selectedTitles.splice(t,1)},200),-1!=a&&this.jobTitles.searchTitles&&(this.jobTitles.searchTitles[a].isTitleSelected=!1),this.jobTitles.selected_jobTitles&&this.jobTitles.selected_jobTitles.length){var r=this.jobTitles.selected_jobTitles.findIndex(function(e){return e==i.jobTitles.selectedTitles[t]});-1!=r&&this.jobTitles.selected_jobTitles.splice(r,1)}if(this.jobTitles.typed_jobTitles&&this.jobTitles.typed_jobTitles.length){var r=this.jobTitles.typed_jobTitles.findIndex(function(e){return e==i.jobTitles.selectedTitles[t]});-1!=r&&this.jobTitles.typed_jobTitles.splice(r,1)}break;case"skills":var s=this.skills.skillsList&&this.skills.skillsList.findIndex(function(e){return e.skill==i.skills.selectedSkills[t]});-1!=s&&this.skills.skillsList&&(this.skills.skillsList[s].isSkillSelected=!1);var l=this.skills.selectedSkills[t]+" skill removed";if(this.fyf.addSelectionRemovalSronly(l),1==this.skills.selectedSkills.length)this.fyf.focusElement(".ph-a11y-skills input",200);else{var c=this.element.querySelectorAll("#selected-skills li");t<this.skills.selectedSkills.length-1?c[t+1].firstElementChild&&setTimeout(function(){c[t+1].firstElementChild.focus()},200):c[t-1].firstElementChild&&setTimeout(function(){c[t-1].firstElementChild.focus()},200)}if(setTimeout(function(){i.skills.selectedSkills.splice(t,1)},200),this.skills.selected_skills&&this.skills.selected_skills.length){var p=this.skills.selected_skills.findIndex(function(e){return e==i.skills.selectedSkills[t]});-1!=p&&this.skills.selected_skills.splice(p,1)}if(this.skills.typed_skills&&this.skills.typed_skills.length){var p=this.skills.typed_skills.findIndex(function(e){return e==i.skills.selectedSkills[t]});-1!=p&&this.skills.typed_skills.splice(p,1)}break;case"preferredLocation":var d=this.preferredLocation.selectedLocations[t]+" location removed";if(this.fyf.addSelectionRemovalSronly(d),1==this.preferredLocation.selectedLocations.length)this.fyf.focusElement(".preferred-location-block input",200);else{var f=this.element.querySelectorAll("#selected-locations li");t<this.preferredLocation.selectedLocations.length-1?f[t+1].firstElementChild&&setTimeout(function(){f[t+1].firstElementChild.focus()},200):f[t-1].firstElementChild&&setTimeout(function(){f[t-1].firstElementChild.focus()},200)}var h=this.preferredLocation.locationsList&&this.preferredLocation.locationsList.findIndex(function(e){return e.location_display==i.preferredLocation.selectedLocations[t]});setTimeout(function(){i.preferredLocation.preferredLocations.splice(t,1),i.preferredLocation.selectedLocations.splice(t,1)},200),-1!=h&&this.preferredLocation.locationsList&&(this.preferredLocation.locationsList[h].isLocationSelected=!1)}},e}();t.ResumeInfoConfirmation=o});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-find-your-fit-container",["require","exports","aurelia-framework","ph-common","./ph-find-your-fit-container-config","./ph-find-your-fit-container-service","aurelia-event-aggregator","./ph-resume-info-confirmation"],function(e,t,i,o,n,a,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l="ph-find-your-fit-container-v1",c="edit_profile_information",p="resume_upload_click",d="upload_new_file_click",f="getUserProfileData",h={upload_resume_flow:"upload_resume",find_your_fit:"find_your_fit",candidate_profile:"candidateProfile"},u="fyf_options_closed",g={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8},m=["categories","subcategories","preferredLocation","skills","recentTitle","workExperience"],y=["jobTitles","skills","workExperience","preferredLocation"],v=function(e){function t(t,i,o,n,a){var r=e.call(this,t,i,l)||this;return r.element=t,r.commonService=i,r.findYourFitContainerService=o,r.eventAggregator=n,r.localStorage=a,r.fileCtx={},r.isDialogOpen=!1,r.isLoggedIn=!1,r.isAnonymous=!1,r.isSiteLogin=!1,r.resumeData={},r.profileData={},r.currentStep="chooseStep",r.isDropdownOpen=!1,r.uploadResumeStatus=!0,r.mergeRequired=!1,r.isActiveSession=!1,r.isFyfEnabled=!1,r.fyfInfoData={},r.resumeUploadFlow=!1,r.isDeleteResume=!1,r.isSocialLogin=!1,r.contactDetails={},r.contactDetailsErrorObj={},r.isContactDetailsConfigured=!1,r.contactDetailsPopup=!1,r.contactDetailsFailure=!1,r.contactDetailsFirstTime=!1,r.isOptInChoosen=!1,r.isProfileJobsAvailable=void 0,r.isFileSupported=!1,r.stepsData={},r.fyfSocialOptions={},r.isProfileSyncUpdateFirstTime=!1,r.disableUploadResumeFlow=!1,r.disableSocialLogin=!1,r.trackingLocally=!0,r.subscriptions=[],r.isCandidateHomeEnabled=!1,r.candidatePopupData={},r.candidateLoginPopup=!1,r.isProfileDataExists=!1,r.userState="",r.showMatchScoreButton=!1,r.jobFits={},r.enabledFits={},r.jobSeqNo="",r.fitLevel=void 0,r.fitData={},r.showFitData=!1,r.jobFitsSettConfig={},r.isJobFitEnabled=!1,r.uploadSronly=!1,r.uploadingSronly=!1,r.gdprConsent=!1,r.savePersonalInfo=!1,r.userConsentPopup=!1,r.acceptTerms=!1,r.termsError=!1,r.avoidBackDropFirstTime=!0,r.chooseSteps=!1,r.hideUserConsentCheckbox=!1,r.limitExceeded=!0,r.maxFileSize=2,r.resumeInfoConfirmation=!1,r.resumeInfoPopup=!1,r.activeStep="",r.activeStepIndex=0,r.resumeConformationSteps=[],r.previousActiveStep="",r.resultUpdated=!1,r.selectionRemovalSrText="",r.selectionRemovalSronly=!1,r.resumeInfoSaveError=!1,r.piiConsentError=!1,r.isDisabled=!1,r.consentPrefill=!0,r.preferredName=!1,r.uniformGdpr=!1,r.tempFullName="",r.gdprPreCheck=!1,r.isEmailValidationEnabled=!1,r.isVerifiedUser=!1,r.isResend=!1,r.isResendFailed=!1,r.isShowEmailValidationPopup=!1,r.isShowEmailValidationBanner=!1,r.handleDropdownOutsideScope=function(){var e=r.handleOutsideScopeEvents(event,"action-area");void 0!=e&&(r.isDropdownOpen=e)},r.closePopup=function(t){var i={widgetTag:l},o=r.profileData&&r.profileData.resumeName&&r.profileData.resumeName.split(".").pop();if(o&&(i.fileType=o),e.prototype.trackWidgetClick.call(r,c,i),r.isDialogOpen=!1,"uploadResume"==r.currentStep&&e.prototype.trackWidgetClick.call(r,u,{}),"find_your_fit"==t&&(r.isUserLoggedIn(),r.flowType=t,e.prototype.trackWidgetClick.call(r,u,{})),r.element.removeEventListener("keyup",r.handleEscape),r.contactDetailsPopup&&r.isAnonymous)return r.isCandidateHomeEnabled&&r.triggerSignUpPopup(!0),!r.isCandidateHomeEnabled&&!r.disableSocialLogin&&r.showSocialLoginPopup(),r.contactDetailsPopup=!1,void(r.contactDetailsFirstTime=!1);if(!r.uploadResumeStatus)return r.uploadResumeStatus=!0,r.isFileSupported=!1,e.prototype.closeDialogPopup.call(r),void(!r.isLoggedIn&&r.element.querySelector(".ph-popup-area")&&(r.currentStep="uploadResume",r.handleDialogModal()));r.destroyEventListeners(),r.currentStep="chooseStep";var n=r.element.querySelector(".user-profile-info");n&&n.removeAttribute("aria-hidden"),e.prototype.focusElement.call(r,".ph-a11y-start-btn",250),r.candidateLoginPopup&&(e.prototype.focusElement.call(r,".candidateHomeSignUp",100),r.candidateLoginPopup=!1),r.contactDetailsPopup=!1,r.isDropdownOpen=!1,r.isDeleteResume=!1,r.isFyfEnabled=!1,e.prototype.closeDialogPopup.call(r)},r.handleEscape=function(e){"Escape"!=e.key&&27!==e.keyCode&&27!==e.which||(r.resumeInfoPopup?r.closeResumeInfoPopup():r.userConsentPopup?r.closeUserConsentPopup():r.closePopup())},r.handleFileUploadStaus=function(t){e.prototype.unhideLoader.call(r),r.uploadResumeStatus||e.prototype.closeDialogPopup.call(r),"uploadResume"==r.currentStep&&r.element.querySelector(".ph-popup-area")&&(r.currentStep=""),r.uploadResumeStatus=!0,r.isFileSupported=!1,r.limitExceeded=!1,r.isDropdownOpen=!1,t&&"addedfile"==t.status&&"uploadResume"==r.currentStep?(r.handleUploadingSronly(),e.prototype.trackWidgetClick.call(r,p,{})):t&&"addedfile"==t.status&&(r.handleUploadingSronly(),e.prototype.trackWidgetClick.call(r,d,{})),t&&"success"==t.status&&t.data&&t.data.res?(r.resumeData=t.data,r.mergeRequired=!1,r.gdprConsent?r.triggerUserConsentPopup():(r.getCvMergeData(),r.destroyEventListeners(),r.getFlowType(h.upload_resume_flow))):(t&&"error"==t.status||"canceled"==t.status)&&(e.prototype.hideLoader.call(r),t.data&&"unsupported"==t.data.type&&(r.isFileSupported=!0),t.data&&"exceeds"==t.data.type&&(r.limitExceeded=!0),r.popupToShowUploadFailed())},r.closeDropDown=function(e,t){return"Enter"==e.key||13===e.keyCode||13===e.which?void(r.isDropdownOpen=!1):"keyup"==e.type||"focus"==e.type?(r.isDropdownOpen=!0,void clearTimeout(r.sortByTimer)):void(t?r.isDropdownOpen=!0:(r.sortByTimer&&clearTimeout(r.sortByTimer),r.sortByTimer=setTimeout(function(){r.isDropdownOpen&&(r.isDropdownOpen=!1)},250)))},r.handleOutsideScopeEvents=function(e,t){var i,o,n=e.target,a=!1;if(e.keyCode===g.RETURN||e.keyCode==g.TAB||void 0==e.keyCode)for(;n;)if(n=n.parentElement,!(o=n&&n.className)||o.constructor!=Array&&o.constructor!=String)n||(a=!0);else if(null==n||-1==o.indexOf(t))a=!0;else if(o.indexOf(t)>=0){a=!1;break}return(a||e.keyCode==g.ESC)&&(i=!1),i},r.destroyEventListeners=function(){var e=r.element.querySelector(".ph-a11y-after-close-focus-elem");e&&e.removeEventListener("click",r.closePopup,!0),document.removeEventListener("keyup",r.handleDropdownOutsideScope,!0)},r.handleProfileUpdateSyncFromBot=function(e){var t=e&&e.detail;r.isProfileSyncUpdateFirstTime||r.isLoggedIn||"contactInfo"==t.stepType||(r.flowType=h.find_your_fit,r.isProfileSyncUpdateFirstTime=!0,r.handleFyfStepFlow({context:h.find_your_fit,isLastStep:!0})),t&&"contactInfo"==t.stepType?r.isUserLoggedIn():(r.eventAggregator.publish(f,{context:"profile_Recom_jobs"}),r.commonService.raiseCustomEvent(f,{context:"profile_Recom_jobs"})),r.isLoggedIn||(r.isProfileSyncUpdateFirstTime=!1)},r.handleEmailValidationEscape=function(e){var t=r.element.querySelector(".ph-a11y-modal-email-validation-area");"Escape"!=e.key&&27!==e.keyCode&&27!==e.which&&e.target!=t||r.closeEmailValidationPopup()},r}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),e.prototype.unhideLoader.call(this),this.preferredName=this.commonService.getSiteSettings("preferredName"),this.subscribeToEventForExternalDepends(),this.getPiiConsentData();var i=this.commonService.getCachedDDO(n.WidgetConfig.v1.jobDetailDDOKey,l);i&&i.data&&i.data.job&&i.data.job.jobSeqNo&&(this.jobSeqNo=i.data.job.jobSeqNo),0==this.commonService.getSiteSettings("consentPrefill")&&(this.consentPrefill=!1),this.subscriptions.push(this.eventAggregator.subscribe(f,this.handleRecomJobsEvent.bind(this))),document.addEventListener(f,this.handleRecomJobsEvent.bind(this)),this.subscriptions.push(this.eventAggregator.subscribe("ph:profileRecomData",this.handleRecomData.bind(this))),document.addEventListener("ph:profileRecomData",this.handleRecomData.bind(this));var o=this.commonService.getSiteSettings("navItems");this.isCandidateHomeEnabled=o&&o.candidateHome,this.subscriptions.push(this.eventAggregator.subscribe("ph:candidateLoggedinEvent",this.handleCandidateLoginEvent.bind(this))),this.subscriptions.push(this.eventAggregator.subscribe("ph:postLoginEvent",this.handlePostLoginOperations.bind(this))),document.addEventListener("ph:candidateLoggedinEvent",this.handleCandidateLoginEvent.bind(this)),this.flowType=this.commonService.getSessionParam("flowType"),this.maxFileSize=this.getResumeFileSize()||2,this.fileCtx={uploadUrl:"/fileCommonUpload",allowedFormats:".doc, .docx, .pdf, .txt",previewTemplate:"",dk:"fileUpload",funRef:this.handleFileUploadStaus,funRefForClose:this.closeDropDown,maxFiles:1,maxFileSize:this.maxFileSize},this.isUserLoggedIn().then(function(e){t.avoidBackDropFirstTime=!1;var i=t.localStorage.getItem("fyfStepLandInfo");i&&(i.success||!i.success&&!t.isSocialLogin)?t.handleFindYourFit():i&&t.localStorage.removeItem("fyfStepLandInfo")}),document.addEventListener("mouseup",this.handleDropdownOutsideScope,!0),document.addEventListener("keyup",this.handleDropdownOutsideScope,!0),this.isOptInChoosen=e.prototype.getQueryParam.call(this,"optIn")||!1,this.fyfInfoData.isOptInChoosen=this.isOptInChoosen,this.isOptinChanged();var a=this.element.getAttribute("fyf-steps");a&&(this.stepsData=JSON.parse(a),this.fetchingFyfRootKeyValues(this.stepsData)),this.fetchFyfConfiguration(a),this.trackingLocally=!0;var r=e.prototype.getQueryParam.call(this,"pxState");this.userState=r||this.commonService.getSegmentedUserState&&this.commonService.getSegmentedUserState(),this.userState&&setTimeout(function(){t.handleDoubleContextIssue()},50)},t.prototype.handleDoubleContextIssue=function(){var e=this.element.querySelectorAll(".upload-resume-tile-container .resume-info .phs-heading");if(e.length>1){var t=e[0].querySelector("ppc-content"),i=t&&t.getAttribute("key"),o=e[1].querySelector("ppc-content"),n=o&&o.getAttribute("key");i&&n&&i===n&&e[0].classList.add("hide")}},t.prototype.handlePostLoginOperations=function(e){var t=e.context||"",i=e.sendVerificationEmail,o=e.profile;"candidateProfile_postLogin"===t&&(this.isEmailValidationEnabled=o.isEmailValidationEnabled,o.hasOwnProperty("verifiedEmails")&&o.verifiedEmails&&o.verifiedEmails.includes(o.email)&&(this.isVerifiedUser=!0),this.isEmailValidationEnabled&&!this.isVerifiedUser&&(this.isShowEmailValidationPopup=!0,i&&"failure"==i.status&&i.data&&400==i.data.status&&(this.isResendFailed=!0),this.openEmailValidationPopup()))},t.prototype.openEmailValidationPopup=function(){var t=this;setTimeout(function(){var i=t.element.querySelector(".post-login-resume-tile-container"),o=t.element.querySelector(".ph-a11y-modal-email-validation-area .close-popup"),n=t.element.querySelector(".popup-modal-backdrop");n&&n.classList.add("active");var a=t.element.querySelector(".ph-a11y-modal-area");a.addEventListener("keyup",t.handleEscape),a.addEventListener("click",t.handleEscape),e.prototype.openDialogPopup.call(t,"ph-a11y-modal-email-validation-area",o,i)},0)},t.prototype.getPiiConsentData=function(){var e=this,t=n.WidgetConfig.v1.ddoKeyGetPiiConsentConfig;this.findYourFitContainerService.makeDDORequest(l,t).then(function(i){if(i&&i.status&&"success"==i.status&&i.data)window.phApp&&window.phApp.ddo&&(window.phApp.ddo[t]=i),e.piiConsentData=i.data;else{var o=e.commonService.getSiteSettings("piiConsentConfig");o&&(e.piiConsentData=JSON.parse(JSON.stringify(o)))}e.piiConsentData&&e.piiConsentData.length&&(e.gdprConsent=!0)})},t.prototype.fetchFyfConfiguration=function(e){var t=this;this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyStepConfig,{}).then(function(i){i&&i.data&&(e||(t.stepsData=i.data,t.fetchingFyfRootKeyValues(i.data)))})},t.prototype.fetchFitScoreConfig=function(){var e=this,t=this.commonService.getSiteSettings("jobWidgetFits")||{};if(this.jobFits=t.widgets&&t.widgets[l]&&t.widgets[l].jobFits||t.jobFits||{},this.jobFitsSettConfig=t.settings||{},this.getJobFits(),this.jobFits&&this.jobFits.fits&&this.jobFits.fits.length)return new Promise(function(e,t){e({})});var i={},o={},a=void 0;return this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyFitScoreSettings,{avoidWidgetHideOnFail:!0}).then(function(t){i=t,i&&i.data&&(e.jobFitsSettConfig=i.data.settings||{},i.data.widgets&&i.data.widgets[l]&&(o=i.data.widgets[l],a=o.jobFits),e.jobFits=a||i.data.jobFits||{}),e.getJobFits()})},t.prototype.getJobFits=function(){var e=this;if(!this.jobFits||!this.jobFits.fits||!this.jobFits.fits.length){var t=this.commonService.getSiteSettings("jobWidgetFits")||{};this.jobFits=t.widgets&&t.widgets[l]&&t.widgets[l]||t||{}}this.jobFits.fits=this.jobFits.fits||[],this.jobFits.fits.forEach(function(t){e.enabledFits[t.display_name]=t}),this.jobFits.fits.length&&(this.showMatchScoreButton=!0,this.isJobFitEnabled=!0,this.getFitData())},t.prototype.getFitData=function(){var e=this,t={jobIdentifierList:[],outputFields:[],size:1};this.jobSeqNo&&t.jobIdentifierList.push(this.jobSeqNo),this.jobFits&&this.jobFits.fits.length?(this.jobFits&&this.jobFits.settings&&this.jobFits.settings.requiredFields&&this.jobFits.settings.requiredFields.length&&this.jobFits.settings.requiredFields.forEach(function(e){t.outputFields.push(e)}),this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyFetchFitScore,t).then(function(t){if(e.showFitData=!0,t&&t.data&&t.data.jobFitScores){var i=t.data.jobFitScores;e.fitData=i[e.jobSeqNo],e.fitLevel=e.fitData&&e.fitData.fitLevel}})):this.showFitData=!0},t.prototype.fetchingFyfRootKeyValues=function(e){var t=this;if(this.stepsData.socialOptions&&"string"==typeof this.stepsData.socialOptions)try{this.stepsData.socialOptions=JSON.parse(this.stepsData.socialOptions)}catch(e){}this.fyfSocialOptions.socialOptions=e.socialOptions?e.socialOptions:"",this.disableUploadResumeFlow=!(!e.disableUploadResumeFlow||"true"!=e.disableUploadResumeFlow),this.disableSocialLogin=!(!e.disableSocialLogin||"true"!=e.disableSocialLogin),this.gdprConsent=!(!e.gdprConsent||"true"!=e.gdprConsent),e.gdprConsent&&"true"==e.gdprConsent?this.gdprConsent=!0:e.gdprConsent&&"partial"==e.gdprConsent?(this.gdprConsent=!0,this.savePersonalInfo=!0,this.hideUserConsentCheckbox=!0):e.gdprConsent&&"uniform"==e.gdprConsent?(this.gdprConsent=!0,this.uniformGdpr=!0):e.gdprConsent&&"precheck"==e.gdprConsent?(this.gdprConsent=!0,this.acceptTerms=!0,this.gdprPreCheck=!0):this.gdprConsent=!1,this.resumeInfoConfirmation=!(!e.resumeInfoConfirmation||"true"!=e.resumeInfoConfirmation),this.resumeInfoConfirmation&&(this.gdprConsent=this.gdprConsent||!0,this.stepsData.steps&&(this.resumeConformationSteps=this.resumeConformationSteps||[],this.stepsData.steps.forEach(function(e){e.stepType&&(y.includes(e.stepType)||"recentTitle"==e.stepType)&&(t.resumeConformationSteps.includes(e.stepType)||"recentTitle"!=e.stepType?t.resumeConformationSteps.push(e.stepType):t.resumeConformationSteps.push("jobTitles"))})))},t.prototype.handleFyfStepFlow=function(t,i){var o=this;this.flowType=t.context,this.isFyfEnabled=!1,this.isDropdownOpen=!1;var n;i?this.isUserLoggedIn().then(function(){o.currentStep="chooseStep","fyf"!=i&&"fyf_container"!=i||(n=".ph-a11y-after-close-focus-elem",e.prototype.focusElement.call(o,n,500))}):this.isUserLoggedIn(t)},t.prototype.isOptinChanged=function(){this.fyfInfoData.isOptInChoosen=this.isOptInChoosen},t.prototype.isUserLoggedIn=function(t){var i=this;return this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyValidateJwtToken,{}).then(function(o){if(o.data&&o.data.isValidToken){i.jobSeqNo&&i.fetchFitScoreConfig();var n=o.data.isValidToken;i.isAnonymous=o.data.isAnonymous,n&&!i.isAnonymous&&i.isCandidateHomeEnabled&&(i.getFlowType("candidateProfile"),i.flowType="candidateProfile"),i.isActiveSession=o.data.isActiveSession,i.isSocialLogin=o.data.isSocialLogin,i.isSiteLogin=o.data.isSiteLogin,i.getProfileData(n,t),i.resumeUploadFlow&&i.eventAggregator.publish(f,{context:"upload_resume"}),i.commonService.raiseCustomEvent(f,{context:"upload_resume"})}else i.isOptInChoosen=!1,t&&i.handleFyfStepState(t),e.prototype.hideLoader.call(i);return o},function(t){new Error(t),e.prototype.hideLoader.call(i)})},t.prototype.handleFyfStepState=function(t){if(t.isFirstStep&&"Start"==t.isFirstStep&&!this.disableUploadResumeFlow)this.chooseUploadOrQuest();else{this.currentStep="chooseStep";var i=this.isLoggedIn?".ph-a11y-after-close-focus-elem":".ph-a11y-start-btn";e.prototype.focusElement.call(this,i,50)}"chooseStep"!=this.currentStep&&this.element.querySelector(".ph-popup-area")||(this.isDialogOpen=!1,e.prototype.closeDialogPopup.call(this))},t.prototype.checkIfProfileDataExits=function(e){var t=this;this.isProfileDataExists=!1,m.forEach(function(i){"workExperience"==i?e[i]&&Object.keys(e[i]).length&&(t.isProfileDataExists=!0):e[i]&&e[i].length&&(t.isProfileDataExists=!0)})},t.prototype.getProfileData=function(t,i){var o=this;e.prototype.unhideLoader.call(this);var a={sendEmailValidationStatus:!0,isEagerLoad:!0};this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeySocialProfile,a).then(function(n){n&&(n.hasOwnProperty("verifiedEmails")&&n.verifiedEmails&&n.verifiedEmails.includes(n.email)&&(o.isVerifiedUser=!0),o.populateProfileData(n,t)),o.isEmailValidationEnabled=n.isEmailValidationEnabled,o.checkForEmail(),i&&o.handleFyfStepState(i),o.resumeUploadFlow&&(o.gdprConsent&&(o.savePersonalInfo||o.uniformGdpr)||!o.gdprConsent)?o.resumeInfoConfirmation?o.handleResumeInfoFlow():o.handleAfterUploadFlow():o.resumeInfoConfirmation&&o.resumeUploadFlow?o.handleResumeInfoFlow(!0):(o.resumeUploadFlow=!1,o.contactDetailsPopup=!1,o.isDropdownOpen=!1,o.isDeleteResume=!1,!o.isLoggedIn&&(o.isFyfEnabled=!1)),e.prototype.hideLoader.call(o)},function(t){new Error(t),e.prototype.hideLoader.call(o)})},t.prototype.handleResumeInfoFlow=function(e){this.populateContactDetails(!0);var t="contactDetails";e&&(t=this.resumeConformationSteps[0]),t?(this.resumeInfo=new s.ResumeInfoConfirmation(this,l,this.element),this.triggerResumeInfoPopup(t)):this.handleResumeFlowAfterSubmit(),this.resumeUploadFlow=!1,this.contactDetailsPopup=!1,this.isDropdownOpen=!1},t.prototype.populateContactDetails=function(e){this.contactDetails=e?{}:this.contactDetails||{},Object.keys(this.contactDetails).length||(this.profileData.firstName&&(this.contactDetails.name=this.profileData.firstName+(this.profileData.lastName?" "+this.profileData.lastName:""),this.tempFullName=this.contactDetails.name),this.preferredName&&this.profileData.preferredName&&(this.contactDetails.preferredName=this.profileData.preferredName),this.profileData.email&&(this.contactDetails.email=this.profileData.email),this.profileData.phones&&this.profileData.phones.length&&(this.contactDetails.phone=this.profileData.phones[0].phoneNumber?this.profileData.phones[0].phoneNumber:""))},t.prototype.checkForEmail=function(){this.profileData.email&&this.profileData.email.length||(this.isContactDetailsConfigured=!0,this.contactDetailsErrorObj.phone={},this.contactDetailsErrorObj.phone.validField=!1,this.contactDetailsErrorObj.email={},this.contactDetailsErrorObj.email.validField=!1,this.profileData.phones&&this.profileData.phones.length&&(this.contactDetails.phone=this.profileData.phones[0].phoneNumber?this.profileData.phones[0].phoneNumber:"",this.phoneFieldValidation()),this.profileData.firstName&&(this.contactDetails.name=this.profileData.firstName,this.nameFieldValidation()))},t.prototype.populateProfileData=function(e,t){this.profileData=e,this.isContactDetailsConfigured=!1,this.contactDetails={},this.flowType=this.flowType||this.profileData.flowType,t&&this.isSiteLogin&&!this.profileData.flowType?this.isLoggedIn=!1:this.isLoggedIn=t,this.isSocialLogin&&!this.flowType&&(this.flowType="find_your_fit"),this.socialProvider=e.socialProvider,this.checkIfProfileDataExits(this.profileData),this.profileData&&this.profileData.privacyConsent&&(this.acceptTerms=!0),this.isLoggedIn&&this.profileData.optIn&&this.gdprConsent&&(this.savePersonalInfo=!0),this.piiConsentData&&this.piiConsentData.length&&this.consentPrefill&&this.piiConsentData.forEach(function(t){e&&e[t.type]&&(t.isChecked=!0)}),this.profileData.consentProfile&&(this.isLoggedIn=!1)},t.prototype.handleAfterUploadFlow=function(){var e=this;this.profileData.email&&this.profileData.email.length?this.isCandidateHomeEnabled?this.triggerSignUpPopup(!0):this.showSocialLoginPopup():(this.currentStep="",this.contactDetailsPopup=!0,this.showSuccessPopup(),setTimeout(function(){var t=e.element.querySelector(".ph-a11y-form-control-config-phone");t&&e.contactDetails.phone&&(t.value=e.contactDetails.phone)},100)),this.contactDetailsFirstTime=!0,this.resumeUploadFlow=!1},t.prototype.handleUploadingSronly=function(){var e=this;this.uploadingSronly=!0,setTimeout(function(){e.uploadingSronly=!1},1e3)},t.prototype.getCvMergeData=function(){var t=this,i={};if(this.resumeData&&this.resumeData.res&&"success"==this.resumeData.res.status&&this.resumeData.res.profile){if(e.prototype.unhideLoader.call(this),i.profile=this.resumeData.res.profile,i.flowType=h.upload_resume_flow,this.gdprConsent&&!this.uniformGdpr&&(i.ignorePsInfo=!this.savePersonalInfo),this.profileData.profile||(this.profileData.profile={}),this.profileData.profile.hasOwnProperty("optIn")||this.gdprConsent||(i.profile.optIn=this.isOptInChoosen,this.profileData.profile.optIn=this.isOptInChoosen),this.gdprConsent&&(!this.piiConsentData||!this.piiConsentData.length)){i.profile.optIn=this.savePersonalInfo,i.profile.privacyConsent=this.acceptTerms;var o=this.commonService.getSiteSettings("optInPreferences");o&&o.smsTiedWithOptin&&(o.smsOptIn&&(i.profile.smsOptIn=this.savePersonalInfo,this.profileData.profile.smsOptIn=this.savePersonalInfo),o.singleSmsOptIn&&(i.profile.singleSmsOptIn=this.savePersonalInfo,this.profileData.profile.singleSmsOptIn=this.savePersonalInfo))}this.piiConsentData&&this.piiConsentData.length&&!this.piiConsentError&&(delete i.ignorePsInfo,this.savePersonalInfo=!0),this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(e){e.type&&(i.profile[e.type]=!!e.isChecked)}),this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKey,i).then(function(i){i&&"success"==i.status?(i.flowType&&(t.flowType=i.flowType),i.data&&i.data.merge?(t.mergeRequired=i.data.merge,e.prototype.hideLoader.call(t)):(t.isUserLoggedIn(),t.resumeUploadFlow=!0),t.uploadSronly=!0,setTimeout(function(){t.uploadSronly=!1},1e3)):(t.popupToShowUploadFailed(),e.prototype.hideLoader.call(t))},function(i){new Error(i),e.prototype.hideLoader.call(t)})}else this.popupToShowUploadFailed()},t.prototype.handleDialogModal=function(){this.isDialogOpen=!0,this.addModalPopup(".ph-a11y-after-close-focus-elem",".ph-a11y-popup-start-focus")},t.prototype.showSuccessPopup=function(){var e=this.element.querySelector(".user-profile-info");e&&e.setAttribute("aria-hidden","true"),this.handleDialogModal()},t.prototype.addModalPopup=function(t,i){var o=this;setTimeout(function(){var n="string"==typeof t?o.element.querySelector(t):t,a="string"==typeof i?o.element.querySelector(i):i;o.element.addEventListener("keyup",o.handleEscape),e.prototype.openDialogPopup.call(o,"ph-a11y-modal-area",n,a,void 0,void 0,!0,!0)},0)},t.prototype.popupToShowUploadFailed=function(){this.uploadResumeStatus=!1,this.handleDialogModal()},t.prototype.toggleDropDown=function(){this.isDropdownOpen=!this.isDropdownOpen},t.prototype.handleFindYourFit=function(t){var i=this;if(this.destroyEventListeners(),this.isFyfEnabled=!0,this.currentStep="",this.getFlowType(h.find_your_fit),setTimeout(function(){i.element.querySelector(".ph-popup-area")&&(i.handleDialogModal(),i.fyfInfoData.stepPosition="0")},250),t&&"editProfile"==t){var o={widgetTag:"ph-find-your-fit-v1"};e.prototype.trackWidgetClick.call(this,c,o)}else t&&"profileQues"==t&&e.prototype.trackWidgetClick.call(this,"profile_questions_click",{})},t.prototype.chooseUploadOrQuest=function(t){var i=this;this.disableUploadResumeFlow?this.handleFindYourFit("profileQues"):(this.currentStep="uploadResume",t&&this.element.querySelector(".ph-popup-area")?this.handleDialogModal():(this.chooseSteps=!0,setTimeout(function(){i.chooseSteps=!1},2e3)),"event"!=t&&"popup"!=t||e.prototype.trackWidgetClick.call(this,"create_profile_click",{}),e.prototype.focusElement.call(this,".ph-a11y-after-close-focus-elem",300))},t.prototype.getFlowType=function(e){var t={};t.flowType=e,this.commonService.getDDO(l,n.WidgetConfig.v1.ddoKeyEagerLoad,t).then(function(e){})},t.prototype.openDeletePopup=function(){this.isDeleteResume=!0,this.isDropdownOpen=!1,this.handleDialogModal()},t.prototype.deleteResume=function(){var t=this;e.prototype.unhideLoader.call(this),this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyDeleteResume,{}).then(function(i){if(i&&"success"==i.status){e.prototype.trackWidgetClick.call(t,"resume_remove_click",{}),t.currentStep="chooseStep",t.isDialogOpen=!1,t.isDeleteResume=!1,t.isLoggedIn=!1,t.isAnonymous=!1,t.isActiveSession=!1,t.resumeData={},t.isProfileJobsAvailable=!1,t.isOptInChoosen=!1,e.prototype.focusElement.call(t,".ph-a11y-start-btn",100),setTimeout(function(){e.prototype.closeDialogPopup.call(t)},100);var o={};o.jobs=[],o.categories=[],t.eventAggregator.publish(f,o),t.commonService.raiseCustomEvent(f,o),t.jobSeqNo&&t.isJobFitEnabled&&(t.showMatchScoreButton=!0),t.showFitData=!1,t.raiseEventForExternalDepends(),t.getFlowType("")}else i&&"failure"==i.status&&(t.currentStep="chooseStep",t.isDialogOpen=!1,t.isDeleteResume=!1,e.prototype.closeDialogPopup.call(t),e.prototype.focusElement.call(t,".ph-a11y-after-close-focus-elem",150));e.prototype.hideLoader.call(t)},function(i){new Error(i),e.prototype.hideLoader.call(t)})},t.prototype.fieldValidation=function(e){switch(e){case"email":this.emailFieldValidation();break;case"phone":this.phoneFieldValidation();break;case"name":this.nameFieldValidation();break;case"preferredName":
this.preferredNameFieldValidation()}},t.prototype.emailFieldValidation=function(){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.contactDetailsErrorObj.email={},this.contactDetailsErrorObj.email.validField=!1,this.contactDetails.email?e.test(this.contactDetails.email)?(this.contactDetailsErrorObj.email.error=!1,this.contactDetailsErrorObj.email.validField=!0):(this.hasErrors=!0,this.contactDetailsErrorObj.email.code="E102",this.contactDetailsErrorObj.email.error=!0):(this.hasErrors=!0,this.contactDetailsErrorObj.email.code="E101",this.contactDetailsErrorObj.email.error=!0)},t.prototype.phoneFieldValidation=function(){this.contactDetailsErrorObj.phone={};var e=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,3})|(\(?\d{2,3}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/;if(this.contactDetails.phone){var t=this.contactDetails.phone.replace(/\./g,"");e.test(t)?(this.contactDetailsErrorObj.phone.validField=!0,this.contactDetailsErrorObj.phone.error=!1):(this.contactDetailsErrorObj.phone.code="E101",this.contactDetailsErrorObj.phone.error=!0,this.hasErrors=!0,this.contactDetailsErrorObj.phone.validField=!1)}},t.prototype.nameFieldValidation=function(){this.contactDetailsErrorObj.name={},this.contactDetails.name?(this.contactDetailsErrorObj.name.validField=!0,this.contactDetailsErrorObj.name.error=!1):(this.hasErrors=!0,this.contactDetailsErrorObj.name.validField=!1,this.contactDetailsErrorObj.name.error=!0)},t.prototype.preferredNameFieldValidation=function(){this.contactDetailsErrorObj.preferredName={},this.contactDetails.preferredName?(this.contactDetailsErrorObj.preferredName.validField=!0,this.contactDetailsErrorObj.preferredName.error=!1):(this.hasErrors=!0,this.contactDetailsErrorObj.preferredName.validField=!1,this.contactDetailsErrorObj.preferredName.error=!0)},t.prototype.validation=function(){this.hasErrors=!1,this.resumeInfoConfirmation&&(this.nameFieldValidation(),this.preferredName&&this.preferredNameFieldValidation()),this.emailFieldValidation(),this.phoneFieldValidation()},t.prototype.getFirstAndLastName=function(e){var t=e&&e.split(" ")||[];return t.length>1?{firstname:t[0],lastname:t[t.length-1]}:{firstname:t[0]||"",lastname:""}},t.prototype.configureMoreDetails=function(){var t=this;if(this.validation(),this.hasErrors)setTimeout(function(){t.preferredName&&t.resumeInfoConfirmation&&t.contactDetailsErrorObj.preferredName.error?e.prototype.focusElement.call(t,".ph-a11y-form-control-config-preferred-name",0):t.resumeInfoConfirmation&&t.contactDetailsErrorObj.name.error?e.prototype.focusElement.call(t,".ph-a11y-form-control-config-name",0):t.contactDetailsErrorObj.email.error?e.prototype.focusElement.call(t,".ph-a11y-form-control-config-email",0):!t.contactDetailsErrorObj.email.error&&t.contactDetailsErrorObj.phone.error&&e.prototype.focusElement.call(t,".ph-a11y-form-control-config-phone",0)},50);else{e.prototype.unhideLoader.call(this);var i={};if(i.profile={},i.editType="mergeProfile",i.stepType="contactInfo",i.profile.email=this.contactDetails.email,this.contactDetails.phone&&(i.profile.phone=this.contactDetails.phone),this.resumeInfoConfirmation&&this.contactDetails.name==this.tempFullName)i.profile.firstName=this.profileData.firstName,i.profile.lastName=this.profileData.lastName;else if(this.resumeInfoConfirmation&&this.contactDetails.name){var o=this.getFirstAndLastName(this.contactDetails.name),a=o.firstname,r=o.lastname;i.profile.firstName=a,i.profile.lastName=r}this.resumeInfoConfirmation&&this.preferredName&&this.contactDetails.preferredName&&(i.profile.preferredName=this.contactDetails.preferredName),this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyCiProfileUpdate,i).then(function(i){if(i&&"success"==i.status)if(t.contactDetailsFailure=!1,t.isContactDetailsConfigured=!1,t.contactDetailsFirstTime=!1,t.profileData.email=t.contactDetails.email,t.contactDetails.name&&(t.profileData.firstName=t.contactDetails.name),t.contactDetails.preferredName&&(t.profileData.preferredName=t.contactDetails.preferredName),t.resumeInfoPopup)t.changeActiveStep(t.resumeConformationSteps[0]);else{t.isCandidateHomeEnabled&&t.triggerSignUpPopup(),t.isCandidateHomeEnabled||(t.contactDetailsPopup=!1),t.isCandidateHomeEnabled||t.disableSocialLogin?t.closePopup():t.showSocialLoginPopup();var o={};o.jobs=[],o.categories=[],t.eventAggregator.publish(f,o),t.commonService.raiseCustomEvent(f,o)}else t.contactDetailsFailure=!0;e.prototype.hideLoader.call(t)})}},t.prototype.showSocialLoginPopup=function(){this.currentStep="userSignIn",this.showSuccessPopup()},t.prototype.openContactDetailsPopup=function(){var e=this;this.handleDialogModal(),this.contactDetailsPopup=!0,this.contactDetailsFailure=!1,this.contactDetailsFirstTime=!1,setTimeout(function(){var t=e.element.querySelector(".ph-a11y-form-control-config-phone");t&&e.contactDetails.phone&&(t.value=e.contactDetails.phone)},200)},t.prototype.resetProfile=function(t){var i=this;e.prototype.unhideLoader.call(this),this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyDeleteResume,{}).then(function(e){e&&"success"==e.status&&!t?(i.jobSeqNo&&i.isJobFitEnabled&&(i.showMatchScoreButton=!0),i.showFitData=!1,i.raiseEventForExternalDepends(),i.isProfileSyncUpdateFirstTime=!1):e&&"success"==e.status&&i.getFlowType("")}),this.doSocialLogout()},t.prototype.doSocialLogout=function(){var t=this;e.prototype.unhideLoader.call(this),this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyLogout,{}).then(function(i){i&&"success"==i.status?t.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyValidateJwtToken,{isEagerLoad:!0}).then(function(i){if(e.prototype.hideLoader.call(t),i.data&&!i.data.isValidToken){t.isLoggedIn=i.data.isValidToken,t.isAnonymous=i.data.isAnonymous||!1,t.isActiveSession=i.data.isActiveSession||!1,t.isSocialLogin=i.data.isSocialLogin||!1,t.element.querySelector(".ph-popup-area")&&(t.currentStep="chooseStep"),t.isProfileJobsAvailable=!1,t.isOptInChoosen=!1,t.fyfInfoData.isOptInChoosen=t.isOptInChoosen,e.prototype.focusElement.call(t,".ph-a11y-start-btn",250);var o={};o.jobs=[],o.categories=[],t.eventAggregator.publish(f,o),t.commonService.raiseCustomEvent(f,o)}},function(e){new Error(e)}):e.prototype.hideLoader.call(t),e.prototype.raiseEvent.call(t,"social-logout",{})})},t.prototype.raiseEventForExternalDepends=function(){var e=new CustomEvent("ph:bot:removeProfile",{bubbles:!0,detail:{removeProfile:!0}});document.dispatchEvent(e)},t.prototype.triggerSignUpPopup=function(t){this.candidatePopupData={closeSelector:this.element.querySelector(".candidateHomeSignUp")||this.element.querySelector(".ph-a11y-after-close-focus-elem"),triggerPopup:!0,context:"fyf_container",profile:this.profileData,widgetRef:this},t&&this.contactDetailsFirstTime&&(this.candidatePopupData.resumeUploaded=!0),this.candidateLoginPopup=!0,e.prototype.trackWidgetClick.call(this,"open_sign_up_popup_click",{})},t.prototype.triggerUserConsentPopup=function(){this.userConsentPopup=!0,this.termsError=!1,this.piiConsentError=!1,!this.gdprPreCheck&&(this.acceptTerms=!1),!this.hideUserConsentCheckbox&&(this.savePersonalInfo=!1),!this.consentPrefill&&this.piiConsentData&&this.piiConsentData.forEach(function(e){e&&(e.isChecked=!1)}),this.isButtonDisabled(),e.prototype.hideLoader.call(this),this.addModalPopup(".ph-a11y-after-close-focus-elem",".ph-a11y-popup-start-focus")},t.prototype.isButtonDisabled=function(){var e=this;this.isDisabled=!1,this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(t){t.optional||t.isChecked||(e.isDisabled=!0)})},t.prototype.closeUserConsentPopup=function(t){var i=this;this.userConsentPopup=!1,this.termsError=!1,e.prototype.closeDialogPopup.call(this),t||(this.element.querySelector(".ph-popup-area")?this.currentStep="chooseStep":(this.currentStep="",setTimeout(function(){i.currentStep="uploadResume"},0)),this.removeTempResume(),setTimeout(function(){e.prototype.focusElement.call(i,"#ph-dropzone"),e.prototype.hideLoader.call(i)},0))},t.prototype.removeTempResume=function(){var e=this.resumeData&&this.resumeData.res&&this.resumeData.res.profile&&this.resumeData.res.profile.resumeIdentifier||"";e&&this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeyResumeTempResume,{resumeIdentifier:e}).then(function(e){})},t.prototype.hasPiiErrors=function(){var e=this;this.piiConsentError=!1,this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(t){t.optional||t.isChecked||(e.piiConsentError=!0)})},t.prototype.submitResume=function(){var t=!1;this.hasPiiErrors(),t=this.piiConsentData&&this.piiConsentData.length?!this.piiConsentError:this.acceptTerms,t?(this.getCvMergeData(),this.destroyEventListeners(),this.getFlowType(h.upload_resume_flow),this.closeUserConsentPopup(!0)):(this.termsError=!0,!(this.piiConsentData&&this.piiConsentData.length)&&e.prototype.focusElement.call(this,".ph-a11y-terms-check-box",50))},t.prototype.termsChanged=function(){this.acceptTerms&&(this.termsError=!1)},t.prototype.subscribeToEventForExternalDepends=function(){var e=this;document.addEventListener("ph:site:removeProfile",function(t){e.resetProfile(!0)}),document.addEventListener("ph:site:fyfProfileUpdate",this.handleProfileUpdateSyncFromBot,!0)},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()}),document.removeEventListener("mouseup",this.handleDropdownOutsideScope,!0),document.removeEventListener("ph:site:removeProfile",this.resetProfile,!0),document.removeEventListener("ph:site:fyfProfileUpdate",this.handleProfileUpdateSyncFromBot,!0),document.removeEventListener("ph:candidateLoggedinEvent",this.handleCandidateLoginEvent),document.removeEventListener(f,this.handleRecomJobsEvent)},t.prototype.getResumeFileSize=function(){return this.commonService.getSiteSettings("resumeUploadFileSizeLimit")},t.prototype.triggerResumeInfoPopup=function(e){var t=this;this.resumeInfoPopup=!0,this.addModalPopup(".ph-a11y-after-close-focus-elem",".ph-a11y-popup-start-focus"),setTimeout(function(){t.changeActiveStep(e)},50)},t.prototype.changeActiveStep=function(t){this.activeStep&&"cancel"!=this.activeStep&&(this.previousActiveStep=this.activeStep),this.activeStep=t,this.resumeInfo&&this.resumeInfo[this.previousActiveStep]&&(this.resumeInfo[this.previousActiveStep].value=""),t&&this.resumeConformationSteps&&-1!=this.resumeConformationSteps.indexOf(t)?this.activeStepIndex=this.resumeConformationSteps.indexOf(t)+1:this.activeStepIndex=0,e.prototype.focusElement.call(this,".ph-a11y-resume-heading",100)},t.prototype.closeResumeInfoPopup=function(t){if("cancel"!=this.activeStep&&!t)return void this.changeActiveStep("cancel");this.handleResumeFlowAfterSubmit(),this.resumeInfoPopup=!1,this.element.removeEventListener("keyup",this.handleEscape),e.prototype.closeDialogPopup.call(this)},t.prototype.addSelectionRemovalSronly=function(e){var t=this;this.selectionRemovalSrText=e,this.selectionRemovalSronly=!0,setTimeout(function(){t.selectionRemovalSronly=!1},100)},t.prototype.updateResults=function(){var e=this;this.resultUpdated=!0,setTimeout(function(){e.resultUpdated=!1},100)},t.prototype.handleResumeFlowAfterSubmit=function(){if(this.destroyEventListeners(),this.savePersonalInfo||this.uniformGdpr)this.isCandidateHomeEnabled?this.triggerSignUpPopup(!0):this.showSocialLoginPopup();else{this.currentStep="chooseStep";var t=this.element.querySelector(".user-profile-info");t&&t.removeAttribute("aria-hidden"),e.prototype.focusElement.call(this,".ph-a11y-after-close-focus-elem",250)}},t.prototype.editResumeInfo=function(){this.populateContactDetails(),this.isDropdownOpen=!1;var e="contactDetails";this.profileDetailsValidation(),!this.savePersonalInfo&&this.gdprConsent&&(e=this.resumeConformationSteps[0]),e&&(this.resumeInfo=this.resumeInfo||new s.ResumeInfoConfirmation(this,l,this.element),this.triggerResumeInfoPopup(e))},t.prototype.profileDetailsValidation=function(){this.profileData.firstName&&this.profileData.email&&(!this.preferredName||this.profileData.preferredName)?this.savePersonalInfo=!1:this.savePersonalInfo=!0},t.prototype.continueSitePersonalization=function(){},t.prototype.getFieldOptions=function(e){if(this.resumeInfo&&this.resumeInfo.getFieldOptions)return this.resumeInfo.getFieldOptions(e)},t.prototype.getActiveIndex=function(e){if(this.resumeInfo&&this.resumeInfo.getFieldOptions)return this.resumeInfo.getActiveIndex(e)},t.prototype.setFieldValue=function(e,t){if(this.resumeInfo&&this.resumeInfo.getFieldOptions)return this.resumeInfo.setFieldValue(e,t)},t.prototype.clearFieldValue=function(){},t.prototype.handleSkip=function(t){this.resumeInfo.skills.suggestedSkills.length&&t?e.prototype.focusElement.call(this,"#suggested-skills-heading",0):this.activeStepIndex>1?e.prototype.focusElement.call(this,"#previous-popup-btn",0):e.prototype.focusElement.call(this,"#next-popup-btn",0)},t.prototype.handleCandidateLoginEvent=function(e){var t=e.detail?e.detail:e;this.flowType="candidateProfile",this.profileData=this.profileData||{},this.profileData.profile=t,this.isAnonymous=!1,this.eventAggregator.publish(f,{context:"profile_Recom_jobs"}),this.commonService.raiseCustomEvent(f,{context:"profile_Recom_jobs"})},t.prototype.handleRecomJobsEvent=function(t){var i=t.detail?t.detail:t;if("find_your_fit"==i.context&&(i.isLastStep||i.isFirstStep)&&this.handleFyfStepFlow(i),"candidateProfile"==i.context&&this.handleFyfStepFlow(i,i.widgetContext),"upload_resume"==i.context&&!this.savePersonalInfo&&this.gdprConsent){this.currentStep="chooseStep";var o=this.isLoggedIn?".ph-a11y-after-close-focus-elem":".ph-a11y-start-btn";e.prototype.focusElement.call(this,o,100)}},t.prototype.handleRecomData=function(e){var t=e.detail?e.detail:e;t.jobs&&t.jobs.length?this.isProfileJobsAvailable=!0:this.isProfileJobsAvailable=!1},t.prototype.sendVerificationEmail=function(t){var i=this,o={profile:{},validationContext:"candidateProfile"};e.prototype.unhideLoader.call(this),this.findYourFitContainerService.makeDDORequest(l,n.WidgetConfig.v1.ddoKeySendVerificationEmail,o).then(function(o){o&&"success"==o.status?t||setTimeout(function(){var t=i.element.querySelector(".post-login-resume-tile"),o=i.element.querySelector(".ph-a11y-modal-email-validation-area .close-popup"),n=i.element.querySelector(".popup-modal-backdrop");n&&n.classList.add("active"),i.element.addEventListener("keyup",i.handleEmailValidationEscape),i.element.addEventListener("click",i.handleEmailValidationEscape),e.prototype.openDialogPopup.call(i,"ph-a11y-modal-email-validation-area",t,o)},100):(i.isResendFailed=!0,e.prototype.focusElement.call(i,".ph-a11y-fyf-email-sent-failed",50)),e.prototype.hideLoader.call(i)})},t.prototype.resendVerificationEmail=function(){this.sendVerificationEmail(!0)},t.prototype.closeEmailValidationPopup=function(){var t=this.element.querySelector(".popup-modal-backdrop");t&&t.classList.remove("active"),e.prototype.closeDialogPopup.call(this),this.isShowEmailValidationPopup=!1,this.element.removeEventListener("keyup",this.handleEmailValidationEscape),this.element.removeEventListener("click",this.handleEmailValidationEscape)},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),t=__decorate([i.customElement(l),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(v=void 0!==o.CommonService&&o.CommonService)&&v||Object,a.FindYourFitContainerService,r.EventAggregator,"function"==typeof(b=void 0!==o.LocalStorageAPI&&o.LocalStorageAPI)&&b||Object])],t);var v,b}(o.PhenomWidget);t.FindYourFitContainer=v}),define("text!v1/ph-find-your-fit-container.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-find-your-fit-container-v1/default/view.html",["module"],function(e){e.exports="<template>\n\x3c!-- view html here --\x3e\n</template>"}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v3/ph-category-overview-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v3:{ddoKey:"categories",ddoKeyMasterData:"categoryMasterData",landingpageddoKey:"getBusinessRules",ddoKeyMasterDatav2:"categoryMasterDataV2",imVariantsConfigInfo:"imVariantsConfigInfo",getIMConfigurations:"getIMConfigurations"}}});var __decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-category-overview-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.commonService=e}return e.prototype.getDefaultImg=function(e){return this.commonService.getImageUrl(e)},e.prototype.getCategories=function(e,t){return this.commonService.getDDO(e,t,{field:"category",sub_field:"internalCategoryId"}).then(function(e){return e.categories&&e.categories.data&&e.categories.data.category})},e.prototype.getLandingPageCategories=function(e,t,i){var o=this,n={field:"category",sub_field:"internalCategoryId",condition:i.landingPageCondition,rk:i.rk};return new Promise(function(i,a){var r=o.commonService.getCachedDDO("eagerLoadCategories",e);r?i(r.data.category):o.commonService.getDDO(e,t,n).then(function(e){i(e.categories&&e.categories.data&&e.categories.data.category)})})},e.prototype.getSubCategories=function(e,t,i,o){return this.commonService.getDDO(e,t,i).then(function(e){return e[t].data.category[o]||[]})},e.prototype.getCategoryMasterData=function(e,t){return this.commonService.getDDO(e,t,{}).then(function(e){return e[t].data})},e.prototype.getLandingpageKey=function(e,t,i){return void 0===i&&(i={}),this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e.prototype.makeDDORequest=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.CategoryOverviewService=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(n,a){function r(e){try{l(o.next(e))}catch(e){a(e)}}function s(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(r,s)}l((o=o.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return o([e,t])}}function o(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(r=a[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,a,r,s,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};define("v3/ph-category-overview",["require","exports","aurelia-framework","ph-common","./ph-category-overview-config","aurelia-event-aggregator","./ph-category-overview-service"],function(e,t,i,o,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="v3",l="ph-category-overview-"+s,c="imVariantsConfigInfo",p=function(e){function t(t,i,o,a,r){var p=e.call(this,t,i,l)||this;return p.element=t,p.commonService=i,p.categoryOverviewService=o,p.localStorage=a,p.eventAggregator=r,p.mode="all",p.cardsPerSlide=4,p.cardsPerRow=3,p.rowCount=2,p.modeOptions={},p.type="category",p.categoryClass="",p.showErrorMsg=!1,p.isKeyPress=!1,p.isKeyPressEnabled=!1,p._defaultModeOptions={autoPlay:!1,interval:5e3,next:!0,prev:!0,indicators:!0,pauseOnHover:!1,loop:!1,viewMoreMode:"evenMore",navPosition:"center"},p._changeSlide=!0,p.cardStyleClassSuffix=3,p.gridColSize=12,p.categoryViewModel=[],p.viewEvenMoreCount=!0,p.activeCategory={},p.hideViewAll=!0,p.hideViewEvenMore=!0,p.hideViewNext=!0,p.hideLess=!0,p.placeVal="",p.subscriptions=[],p.jobTypesConditions={Internal:'visibilityType.visibilityType_sort:("Internal/External") OR visibilityType.visibilityType_sort:("Internal")',External:'visibilityType.visibilityType_sort:("Internal/External") OR visibilityType.visibilityType_sort:("External")'},p.imInit=function(){return __awaiter(p,void 0,void 0,function(){var t,i,o,a;return __generator(this,function(r){switch(r.label){case 0:return[4,this.categoryOverviewService.makeDDORequest(l,n.WidgetConfig[s][c],{})];case 1:return t=r.sent(),e.prototype.hideLoader.call(this),t.status&&"success"==t.status&&t.data&&t.data.values&&t.data.values.length&&-1!=(i=t.data.values.findIndex(function(e){return"jobs"==e.variant.toLowerCase()}))&&(o=t.data.values[i].types)&&1==o.length&&(this.jobsType="internal"==o[0]?"Internal":"External"),a=this.commonService.getPageName(),"referrals_home"==a&&(this.jobsType="External"),this.init(),[2]}})})},p}return __extends(t,e),t.prototype.attached=function(){e.prototype.attached.call(this),e.prototype.hideLoader.call(this),this._updateModeOptions(),this.handleMouseHover(),this.entriesPerSlide=this.cardsPerSlide,this.asDependent&&e.prototype.hideContainer.call(this)},t.prototype.created=function(){var t=this;this.localStorage.getItem("categories")||this.localStorage.setItem("categories",[]),"internal"==this.commonService.getSiteType()?(this.imInit(),this.getImConfigurations()):this.init(),this.subscriptions.push(this.eventAggregator.subscribe("ph:noJobsFound",function(i){t.searchKeyword=i.searchKeyword,t.placeVal=i.placeVal,e.prototype.showContainer.call(t)}))},t.prototype.getImConfigurations=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i;return __generator(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.categoryOverviewService.makeDDORequest(l,n.WidgetConfig[s].getIMConfigurations)];case 1:return e=o.sent(),e&&"success"===e.status&&e.data&&e.data.moduleSpecificSettings&&e.data.moduleSpecificSettings.referrals&&(t=e.data.moduleSpecificSettings.referrals,t.hideTitle&&(this.hideTitle=!0),t.mode&&(this.mode=t.mode),t.showEmptyCategories&&(this.showEmptyCategories=!0),t.hideJobCount&&(this.hideJobCount=!0),t.categoryClass&&(this.categoryClass=t.categoryClass),t.cardsPerSlide&&(this.cardsPerSlide=t.cardsPerSlide),t.cardsPerRow&&(this.cardsPerRow=t.cardsPerRow),t.rowCount&&(this.rowCount=t.rowCount)),[3,3];case 2:return i=o.sent(),console.log(i),[3,3];case 3:return[2]}})})},t.prototype.init=function(){var e=this;"internal"==this.commonService.getSiteType()&&this.jobsType&&this.jobsType.length?(this.landingPageCondition=this.jobTypesConditions[this.jobsType],this.getLandingPageCategories()):this.rk&&this.rk.length?this.getLandingPageKey().then(function(t){t&&t.data&&t.data[e.rk]?(e.landingPageCondition=t.data[e.rk].condition,e.getLandingPageCategories()):e.handleError("")}):this.type&&"subCategory"==this.type?this.getSubCategories():this.getCategories()},t.prototype.getLandingPageKey=function(){if(this.rk&&this.rk.length>0){var e={},t={};return t.landingPageKeys=[this.rk],e.pageIdentifier=t,this.categoryOverviewService.getLandingpageKey(l,n.WidgetConfig[s].landingpageddoKey,e)}},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.getLandingPageCategories=function(){var t=this;e.prototype.unhideLoader.call(this);var i={landingPageCondition:this.landingPageCondition,rk:this.rk};this.categoryOverviewService.getLandingPageCategories(l,n.WidgetConfig[s].ddoKey,i).then(function(e){t.categoryViewModel=e||[],t.getCategoryMasterData(e)})},t.prototype.getDefaultImg=function(e){return this.categoryOverviewService.getDefaultImg(e)},t.prototype.getCategories=function(){var t=this;e.prototype.unhideLoader.call(this),this.categoryOverviewService.getCategories(l,n.WidgetConfig[s].ddoKey).then(function(e){t.categoryViewModel=e||[],t.getCategoryMasterData(e)})},t.prototype.getSubCategories=function(){var t=this;e.prototype.unhideLoader.call(this);var i={};i.field="category",i.sub_field="subCategory",this.categoryOverviewService.getSubCategories(l,n.WidgetConfig[s].ddoKey,i,this.category).then(function(e){t.getCategoryMasterData(e,t.type)})},t.prototype.getCategoryMasterData=function(t,i){var o=this;i&&"subCategory"==i?(this.categories=t,this.categoryViewModel=this.categories,this.cardStyleClassSuffix=this.gridColSize/this.cardsPerRow,this.handleCategoryView(),"slider"==this.mode&&(e.prototype.getSlideData.call(this),this.modeOptions.autoPlay&&this.autoplay()),this.categories.forEach(function(e){e.key||(e.key=e.category)}),e.prototype.hideLoader.call(this)):this.categoryOverviewService.getCategoryMasterData(l,n.WidgetConfig[s].ddoKeyMasterDatav2).then(function(i){var n,a,r=[],s=[];if(i=i||{},i&&i.orderType&&"default"!=i.orderType?"custom"==i.orderType&&(n=i.categories||[],a=t||[]):(n=t||[],a=i.categories||[]),n.length){var l=void 0,c=void 0,p=void 0,d=void 0,f=void 0;for(c=0;c<n.length;c++)r.push(n[c].internalId);for(p=0;p<a.length;p++)s.push(a[p].internalId);for(d=0;d<r.length;d++)if(n[d].isRemoveEle=!0,-1!=(l=s.indexOf(r[d]))){n[d].isRemoveEle=!1,f=a[l];for(var h in f)(void 0==n[d][h]&&f.hasOwnProperty(h)||f.hasOwnProperty(h)&&!n[d].hasOwnProperty(h))&&(n[d][h]=f[h]);var u=(o.category||"").toLowerCase(),g=(f.category||"").toLowerCase();u==g&&(o.activeCategory=n[d])}if(!o.showEmptyCategories&&"default"!=i.orderType){for(var m=[],y=0;y<n.length;y++)n[y].isRemoveEle||m.push(n[y]);n=m}n.length&&(o.categoryStaticContent=n||[],o.categories=n||[],o.categoryViewModel=n||[],o.cardStyleClassSuffix=o.gridColSize/o.cardsPerRow,o.handleCategoryView(),"slider"==o.mode&&(e.prototype.getSlideData.call(o),o.modeOptions.autoPlay&&o.autoplay()),o.categories.forEach(function(e){e.key||(e.key=e.category)}))}(i||i.categories||i.categories.length)&&(o.categoryViewModel.length||o.showEmptyCategories)||o.handleError(""),e.prototype.hideLoader.call(o)})},t.prototype.autoplay=function(){var t=this;this.modeOptions.autoPlay&&(this._timeout=setTimeout(function(){t._changeSlide&&(t.currSlide>=0&&t.currSlide<t.totalSlides-1?(e.prototype.goToNextSlide.call(t),t.autoplay()):t.currSlide==t.totalSlides-1&&t.modeOptions.loop&&(t.currSlide=-1,e.prototype.goToNextSlide.call(t),t.autoplay()))},this.modeOptions.interval||5e3))},t.prototype.handleMouseHover=function(){var e=this;("slider"!=this.mode||this.modeOptions.pauseOnHover)&&(this.element.addEventListener("mouseenter",function(t){e._changeSlide=!1}),this.element.addEventListener("mouseleave",function(t){e._changeSlide=!0,clearTimeout(e._timeout),e.currSlide>=0&&e.currSlide<e.totalSlides&&e.autoplay()}))},t.prototype.handleCategoryView=function(){var e=this.setCategoryCount();this.categoryViewModel.length&&"showMore"==this.mode&&this.categoryViewModel.length>e&&this.setShowMoreInitialStates(this.modeOptions.viewMoreMode)},t.prototype._updateModeOptions=function(){for(var e in this._defaultModeOptions)this._defaultModeOptions.hasOwnProperty(e)&&!this.modeOptions.hasOwnProperty(e)&&(this.modeOptions[e]=this._defaultModeOptions[e])},t.prototype.setShowMoreInitialStates=function(e){var t=this.setCategoryCount();this.categoryViewModel=this.categories.slice(0,t),"all"==e?this.hideViewAll=!1:"evenMore"==e?(this.hideViewEvenMore=!1,this.viewEvenMoreCount=!0):"viewNext"==e&&(this.hideViewNext=!1)},t.prototype.setCategoryCount=function(){return this.cardsPerRow*this.rowCount},t.prototype.viewLess=function(){var e=this;setTimeout(function(){e.setShowMoreInitialStates(e.modeOptions.viewMoreMode),e.hideLess=!0,e.isKeyPress=!1,setTimeout(function(){e.element.querySelector('[data-access="showMore"]')&&e.element.querySelector('[data-access="showMore"]').focus()},150)},150)},t.prototype.viewAll=function(){var t=this.categories.length-(this.categories.length-this.categoryViewModel.length);this.categoryViewModel=this.categories,this.hideViewAll=!0,this.hideLess=!1,e.prototype.focusElement.call(this,'[data-access-list-item="'+t+'"]',150)},t.prototype.viewEvenMoreOnKeyup=function(e){return 13===e.keyCode&&(this.isKeyPress=!0,this.isKeyPressEnabled=!0),!0},t.prototype.viewNextOnKeyup=function(e){return 13===e.keyCode&&(this.isKeyPress=!0,this.isKeyPressEnabled=!0),!0},t.prototype.viewLessOnKeyup=function(e){return 13===e.keyCode&&(this.isKeyPress=!0,this.isKeyPressEnabled=!0),!0},t.prototype.viewEvenMore=function(){var e=this;setTimeout(function(){if(e.viewEvenMoreCount)e.viewNext(),e.viewEvenMoreCount=!1;else if(e.isKeyPress||!e.isKeyPressEnabled){e.isKeyPress=!1;var t=e.categories.length-(e.categories.length-e.categoryViewModel.length);setTimeout(function(){e.element.querySelector('[data-access-list-item="'+t+'"]'),e.element.querySelector('[data-access-list-item="'+t+'"]')&&e.element.querySelector('[data-access-list-item="'+t+'"]').focus()},150),e.categoryViewModel=e.categories,e.hideViewEvenMore=!0,e.hideLess=!1}},150)},t.prototype.viewNext=function(){var e=this;setTimeout(function(){var t=e.setCategoryCount(),i=e.categoryViewModel.length;e.isKeyPress=!1,setTimeout(function(){e.element.querySelector('[data-access-list-item="'+i+'"]')&&e.element.querySelector('[data-access-list-item="'+i+'"]').focus()},200);var o=e.categories.length-e.categoryViewModel.length;o>0&&(e.viewEvenMoreCount=!0),t<o?(o=t,e.categoryViewModel=e.categories.slice(0,e.categoryViewModel.length+o)):(e.categoryViewModel=e.categories,e.hideViewNext=!0,e.hideViewEvenMore=!0,e.hideLess=!1)},150)},t.prototype.getContextData=function(){return this.categories},t.prototype.goToNextSlide=function(){this.currSlide==this.totalSlides-1&&this.modeOptions.loop&&(this.currSlide=-1),e.prototype.goToNextSlide.call(this)},t.prototype.goToPrevSlide=function(){0==this.currSlide&&this.modeOptions.loop&&(this.currSlide=this.totalSlides),e.prototype.goToPrevSlide.call(this)},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},t.prototype.getUrl=function(t,i,o,n,a){if(this.rk&&this.rk.length&&(n="&rk="+this.rk),"internal"==this.commonService.getSiteType()&&this.jobsType&&this.jobsType.length){var r=e.prototype.getUrl.call(this,t,i,o,n,a)
;return r="referrals_home"==this.commonService.getPageName()?-1!=r.indexOf("?")?r+"&qkvisibilityType="+this.jobsType:r+"?qkvisibilityType="+this.jobsType:-1!=r.indexOf("?")?r+"&qkvisibilityType="+this.jobsType+"&s=1":r+"?qkvisibilityType="+this.jobsType+"&s=1"}return e.prototype.getUrl.call(this,t,i,o,n,a)},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"hideTitle",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"hideSubTitle",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"hideTileImage",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"hideTileHoverImage",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"hideBlurb",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"hideJobCount",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"mode",void 0),__decorate([i.bindable,__metadata("design:type",Number)],t.prototype,"cardsPerSlide",void 0),__decorate([i.bindable,__metadata("design:type",Number)],t.prototype,"cardsPerRow",void 0),__decorate([i.bindable,__metadata("design:type",Number)],t.prototype,"rowCount",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"hideWhenEmpty",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"modeOptions",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"type",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"categoryClass",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"category",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"asDependent",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"showEmptyCategories",void 0),__decorate([i.bindable(),__metadata("design:type",String)],t.prototype,"rk",void 0),t=__decorate([i.customElement(l),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(p=void 0!==o.CommonService&&o.CommonService)&&p||Object,r.CategoryOverviewService,"function"==typeof(d=void 0!==o.LocalStorageAPI&&o.LocalStorageAPI)&&d||Object,a.EventAggregator])],t);var p,d}(o.PhenomWidget);t.CategoryOverview=p}),define("text!v3/ph-category-overview.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("components",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["v1/ph-refer-friend","v2/ph-similar-jobs","v3/ph-social-share","v2/ph-cookie-popup","v1/ph-job-details","v1/ph-email-job","v1/ph-find-your-fit","v1/ph-social-connect","v1/ph-import-resume","v1/ph-subscribe-similarjobs","v1/ph-candidate-merge-profile","v2/ph-profile-recommendations","v2/ph-people-also-viewed","v1/ph-find-your-fit-container","v3/ph-category-overview"]}),define("main",["require","exports","./environment","./components"],function(e,t,i,o){"use strict";function n(e){e.use.standardConfiguration().plugin("ph-common").globalResources(o.default),i.default.debug&&e.use.developmentLogging(),window&&(window.localAurelia=e),window.pht=window.pht||{};for(var t=document.querySelectorAll("div.ph-widget-target[data-widget]"),n=0;n<t.length;n++){var a=t[n];if(a){var r=a.getAttribute("type");if(!r||"static"!=r){var s=a.innerHTML,l=a.getAttribute("as-element"),c=a.getAttribute("view")||"default";s&&s.trim().length&&(pht[l+"-"+c]=s.trim()),a.innerHTML=""}}}e.start().then(function(){return e.enhance({},document.body)})}P.config({longStackTraces:!1,warnings:{wForgottenReturn:!1}}),t.configure=n}),document&&document.body&&document.body.setAttribute("aurelia-app","main");