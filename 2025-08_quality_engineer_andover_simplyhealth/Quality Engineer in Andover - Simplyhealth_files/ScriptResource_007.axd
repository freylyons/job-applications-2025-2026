var spanWithSpacePattern="<span[^>]*>(&nbsp;| )</span>",spanWithSpace=new RegExp(spanWithSpacePattern,"ig"),spanEmptyPattern2="<span[^>]*></span>",spanEmpty=new RegExp(spanEmptyPattern2,"ig"),pSpaceOrEmptyPattern="<p[^>]*>[ ]?</p>",pSpaceOrEmpty=new RegExp(pSpaceOrEmptyPattern,"ig"),pEmptyTagsPattern="<p[^>]*><[^>]*>[ ]?</[^>]*></p>",pEmptyTags=new RegExp(pEmptyTagsPattern,"ig"),defaultFontFamily="Arial",defaultFontSize="14pt";function editor_OnClientPasteHtml(e,t){var a=t.get_commandName(),n=t.get_value();switch(a){case"Paste":n=(n=(n=(n=n.replace(spanWithSpace,"&nbsp;")).replace(spanEmpty,"")).replace(pSpaceOrEmpty,"<p>&nbsp;</p>")).replace(pEmptyTags,"<p>&nbsp;</p>")}t.set_value(n)}function editor_OnClientLoad(e,t){$Eploy(document).ready((function(){e.getToolByName("CustomExtras")._updateHeader=!1,e.getToolByName("CustomAlignment")._updateHeader=!1,e.getToolByName("CustomFormatting")._updateHeader=!1;var t,a=document.all?e.get_document().body:e.get_document();$telerik.addExternalHandler(a,"click",(function(t){SetFontDropDownOnClick(e)})),e.attachEventHandler("onkeydown",(function(t){setTimeout((function(){$Eploy("#"+$Eploy("#"+e.get_id()).attr("data-hiddenfield")).val("1").trigger("change")}),0)})),"undefined"==typeof MyFilter&&(MyFilter=function(){MyFilter.initializeBase(this),this.set_isDom(!0),this.set_enabled(!0),this.set_name("RelativeHrefs"),this.set_description("Does not make the href of an a into a absolute url")},MyFilter.prototype={getHtmlContent:function(e){return $telerik.$(e).find("a").each((function(e,t){var a=$telerik.$(t).attr("data-href");a&&$telerik.$(t).removeAttr("data-href").attr("href",a)})),e},getDesignContent:function(e){return $telerik.$(e).find("a").each((function(e,t){var a=t.getAttribute("href");a&&$telerik.$(t).attr("data-href",a)})),e}},MyFilter.registerClass("MyFilter",Telerik.Web.UI.Editor.Filter)),t=Telerik.Web.UI.Editor.Utils,Telerik.Web.UI.Editor.TrackerBase.prototype.removeZeroWidthNodes=function(){for(var e=this,a=e.nodes,n=new RegExp("^["+e._zeroWidthCharacter+"]+$"),i=e.nodeValuePairs=[],r=0;r<a.length;r++){var o=a[r];if(t.isTextNode(o)&&!e._isNodeRemoved(o)){var p=o.nodeValue;if(n.test(p)){i.push({node:o,value:o.nodeValue});var l=t.getBlockParent(o),d=l&&t.isNodeEmptyRecursive(l);o.nodeValue=d?" ":""}else e.removeFirstZeroWidthChar(o)}}},e.get_filtersManager().add(new MyFilter),$Eploy("#"+e.get_id()).trigger("EditorOnReady")}))}function editor_OnClientCommandExecuted(e,t){if("function"==typeof t.get_commandName){var a=t.get_commandName();"FontName"==a?defaultFontFamily=t.get_value():"RealFontSize"==a&&(defaultFontSize=t.get_value())}}function editor_OnClientSubmit(e,t){var a=e.get_html(!0);"&nbsp;"==(a=ReplaceSpan(a))&&(a=""),a||SetEditorHTML(e,a)}function editor_OnClientSelectionChange(e,t){if(!e.get_document().queryCommandValue("FontName")){var a=$telerik.getCurrentStyle(e.getSelectedElement(),"fontFamily");if(a){var n=e.getToolByName("FontName");n&&window.setTimeout((function(){n.set_value(a)}),0)}}var i=e.getToolByName("RealFontSize");i&&setTimeout((function(){var e=i.get_value();if(-1!=e.indexOf("px")){var t=Math.round(.75*parseInt(e))+"pt";i.set_value(t)}}),0)}function ReplaceSpan(e){return e=(e=(e=(e=e.replace(spanWithSpace,"&nbsp;")).replace(spanEmpty,"")).replace(pSpaceOrEmpty,"<p>&nbsp;</p>")).replace(pEmptyTags,"<p>&nbsp;</p>")}function GetEditorHTML(e){return e.get_html(!0)}function SetEditorHTML(e,t){e.set_html(t)}function PasteEditorHTML(e,t){e.pasteHtml(t)}function SetFontDropDownOnClick(e){var t=e.get_html(!0);""!=t&&(t=ReplaceSpan(t)),t||(SetEditorHTML(e,t),e.fire("FontName",{value:defaultFontFamily}),e.fire("RealFontSize",{value:defaultFontSize}))}