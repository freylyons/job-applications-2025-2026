function RefreshDropDownIDs(e,t,l,o,n){for(var a="",r=$Eploy("#"+l).val().split(","),i=($Eploy("#"+e+" option:selected").val(),new Array),c=0;c<r.length;c++)if(r[c]){var s=$Eploy("#"+e+" option[value='"+r[c]+"']").text(),p="<div title='"+s+"' class='its-c-chip  is-removeable'><span class=\"its-c-chip__text\">"+s+"</span><a class='its-c-chip__remove' title='"+n+"' href='javascript:void(0);' onclick=\"DeleteArrayElement('"+l+"','"+r[c]+"');RefreshDropDownIDs('"+e+"','"+t+"','"+l+"','"+o+"');return false;\"><span class='icon  icon-cancel'></span></a></div>";i.push(p)}return""==(a=i.join(""))&&(a=o),$Eploy("#"+t).text(""),$Eploy("#"+t).append(a),!1}function AddDropDownOptionPickerOption(e,t){$Eploy("#"+e+" option:selected").text();var l=$Eploy("#"+e+" option:selected").val(),o=$Eploy("#"+t).val().split(",");l&&""!=l&&0!=l&&(-1==$Eploy.inArray(l,o)&&o.splice(o.length,1,l),removeByElement(o,""),$Eploy("#"+t).val(o.toString()))}function RemoveDropDownOptionPickerOption(e,t){DeleteArrayElement(t,$Eploy("#"+e+" option:selected").val())}function DeleteArrayElement(e,t){var l=$Eploy("#"+e).val().split(",");removeByElement(l,t),removeByElement(l,""),$Eploy("#"+e).val(l.toString())}function removeByElement(e,t){for(var l=0;l<e.length;l++)""!=e[l]&&e[l]!=t||e.splice(l,1)}function clearlistbox(e){for(var t=e.options.length-1;t>=0;t--)e.options[t]=null;e.selectedIndex=-1}function onError(e,t){alert("Exception :\n"+e)}function Dial(e,t,l){if("TAPI"==l.toUpperCase())clsPages.OpenPageOnTop("/crmdev/Popups/Dialer.asp?Initialize=yes&CallType=Outgoing&Telephone="+ApplyFormatting(e,"URL")+"&Extension="+ApplyFormatting(t,"URL"),"","top=20,left=20,resizable=yes,scrollbars=no,width="+.5*screen.width+",height=250");else{var o=l.trim().toLowerCase().replace("*telephone*",e.trim().replace(/ /g,""));document.location.href=o}}function ValidateChecked(e,t){t.IsValid=document.getElementById(e.controltovalidate)&&document.getElementById(e.controltovalidate).checked}function ValidateRadioList(e){var t=$Eploy("#"+e);return function(e,l){t.find("input").length>0&&(l.IsValid=t.find("input:checked").length>0,e.controltovalidate=t.find("input")[0].id)}}function ValidateEmail(e,t){let l=$Eploy("#"+e.controltovalidate).val();if(l){let o=0;parseInt($Eploy(e).attr("maxCount"))>0&&(o=parseInt($Eploy(e).attr("maxCount"))),$Eploy.ajax({type:"POST",contentType:"application/json; charset=utf-8",data:`{ emailCSVEncoded: "${encodeURIComponent(l)}", maxCount: ${o} }`,dataType:"json",url:ServerPath+"WebServices/JSFunctions.asmx/CheckEmailValidation",async:!1}).done((function(e){e&&!1===e.d&&(t.IsValid=e.d,t.Visible=!0)}))}}function number_format(e,t,l,o){var n=e,a=isNaN(t=Math.abs(t))?2:t,r=null==l?",":l,i=null==o?".":o,c=n<0?"-":"",s=parseInt(n=Math.abs(+n||0).toFixed(a))+"",p=(p=s.length)>3?p%3:0;return c+(p?s.substr(0,p)+i:"")+s.substr(p).replace(/(\d{3})(?=\d)/g,"$1"+i)+(a?r+Math.abs(n-s).toFixed(a).slice(2):"")}function size_format(e){return e=e>=1073741824?number_format(e/1073741824,2,".","")+" Gb":e>=1048576?number_format(e/1048576,2,".","")+" Mb":e>=1024?number_format(e/1024,0)+" Kb":number_format(e,0)+" bytes"}function OtherDropDownTextChange(e,t,l,o){var n=document.getElementById(t+"txtOther"),a=document.getElementById(t+"theOtherOne"),r=document.getElementById(t+"ddValues"),i=document.getElementById(t+"rvValue"),c=document.getElementById(t+"rvOther"),s=[],p=[];o&&(p=o.split(","));for(var d=0;p.length>d;d++)s.push(document.getElementById(p[d]));var u=$Eploy(a);if(0==e)if(r.selectedIndex==r.length-1){ValidatorEnable(i,l),c.enabled=!0;for(d=0;s.length>d;d++)s[d].enabled=!0;n.value="",u.show(),$Eploy(n).focus()}else{ValidatorEnable(i,l),ValidatorEnable(c,!1);for(d=0;s.length>d;d++)ValidatorEnable(s[d],!1);n.value="",u.hide(),u&&u.hasClass("error")&&u.removeClass("error")}else""!=n.value&&(r.selectedIndex=r.length-1)}function OtherTextLookupV2TextChange(e,t,l,o,n){var a=document.getElementById(e+"txtOther"),r=document.getElementById(e+"theOtherOne"),i=document.getElementById(n),c=document.getElementById(e+"rvOther"),s=[],p=[];l&&(p=l.split(","));for(var d=0;p.length>d;d++)s.push(document.getElementById(p[d]));var u=$Eploy(r);if(o.GetValue()==o._resources.OtherText){ValidatorEnable(i,t),c.enabled=!0;for(d=0;s.length>d;d++)s[d].enabled=!0;a.value="",u.show(),$Eploy(a).focus()}else{ValidatorEnable(i,t),ValidatorEnable(c,!1);for(d=0;s.length>d;d++)ValidatorEnable(s[d],!1);a.value="",u.hide(),u&&u.hasClass("error")&&u.removeClass("error")}}function checkCount(e,t,l){var o,n=e.value,a=0,r=0,i=0;if("text"===$Eploy(e).attr("type"))r=$Eploy(e).attr("data-minlength"),i=$Eploy(e).attr("data-maxlength"),o=ResourceStore.get(57,"str_CheckCount_Characters"),i>0&&n.length>i&&(e.value=n.substring(0,i),n=e.value),a=n.length;else if(r=$Eploy(e).attr("data-minwords"),i=$Eploy(e).attr("data-maxwords"),o=ResourceStore.get(57,"str_CheckCount_WordCount"),(n=cleanTrimmed(n)).length>0){a=n.split(/\s+/).length;var c=n.split(/\s+/);i>0&&a>i&&($Eploy(e).val(c.slice(0,i).join(" ")),a=i)}var s=o+": "+a;r>0&&(s=s+"; "+ResourceStore.get(57,"str_Min")+" "+o+": "+r),i>0&&(s=s+"; "+ResourceStore.get(57,"str_Max")+" "+o+": "+i),document.getElementById(t).innerHTML=s}function cleanTrimmed(e){return e?e.replace(/\s+/g," ").trim():""}function meetsMinCount(e,t){var l=0,o=0,n=0;"text"===$Eploy("#"+e.controltovalidate).attr("type")?(l=parseFloat($Eploy("#"+e.controltovalidate).attr("data-minlength")),o=parseFloat($Eploy("#"+e.controltovalidate).attr("data-maxlength")),n=t.Value.length):(l=parseFloat($Eploy("#"+e.controltovalidate).attr("data-minwords")),o=parseFloat($Eploy("#"+e.controltovalidate).attr("data-maxwords")),n=cleanTrimmed(t.Value).split(/\s+/).filter((e=>""!==e)).length);t.IsValid=(0===l||l>0&&n>=l)&&(0===o||o>0&&n<=o)}function ToggleDisplay(e,t,l,o,n,a){var r=void 0!==n&&n,i=void 0!==a&&a;if(e){var c=$Eploy(e).val();"radio"==e.type?"false"==c.toLowerCase()||"true"==c.toLowerCase()?c="true"==c.toLowerCase()&&$Eploy(e).prop("checked")?1:"false"==c.toLowerCase()&&$Eploy(e).prop("checked")?0:null:$Eploy(e).prop("checked")||(c=null):"checkbox"==e.type&&($Eploy(e).parent().data("val")?c=e.checked?$Eploy(e).parent().data("val"):0:c?e.checked||(c=0):c=e.checked?1:0);var s=o.split(";"),p=l.indexOf("#"),d=[l.slice(0,p),l.slice(p+1)],u="#div_"+d[0],y=$Eploy(u).data("parents");null==y&&(y=[]);var h=e.id;"radio"==e.type&&(h=h.slice(0,-2));var E=!0;"hidden"==e.type&&$Eploy(e).parents(".row")[0]&&(E=$Eploy($Eploy(e).parents(".row")[0]).is(":visible"));var f=d[1].split(",");if(E&&!i&&-1!=$Eploy.inArray(""+c,f)||i&&-1==$Eploy.inArray(""+c,f)){if(r){var g=u;$Eploy(u).fadeIn(400,(function(){$Eploy(g+" :input").first().focus()}))}else $Eploy(u).fadeIn();y.includes(h)||(y.push(h),$Eploy(u).data("parents",y)),$Eploy(u+" :input").each((function(e){switch($Eploy(this).attr("type")){case"radio":case"checkbox":if(this.checked){var t=null;null!=this.getAttribute("onclick")&&this.getAttribute("onclick").indexOf("ToggleDisplay")>-1?t=this.onclick:null!=this.getAttribute("onchange")&&this.getAttribute("onchange").indexOf("ToggleDisplay")>-1&&(t=this.onchange),null!=t&&t.call(this)}break;case"hidden":var l=$Eploy(this).data("ToggleScripts");"function"==typeof l&&l()}}))}else 0==y.length||1==y.length&&y[0]==h?($Eploy(u).hide(),$Eploy(u).data("parents",y.filter((function(e,t,l){return e!=h}))),$Eploy(u+" :input").each((function(e){switch($Eploy(this).attr("type")){case"radio":$Eploy(this).removeAttr("checked");for(var t=0;t<$Eploy(this).length;t++)$Eploy(this)[t].checked=!1;var l=null;null!=this.getAttribute("onclick")&&this.getAttribute("onclick").indexOf("ToggleDisplay")>-1?l=this.onclick:null!=this.getAttribute("onchange")&&this.getAttribute("onchange").indexOf("ToggleDisplay")>-1&&(l=this.onchange),null!=l&&l.call(this);break;case"checkbox":$Eploy(this).is(":checked")?($Eploy(this).trigger("click"),$Eploy(this).removeAttr("checked")):$Eploy(this).removeAttr("checked");break;case"submit":case"button":break;default:var o=$Eploy(this).data("clear-selected");"function"==typeof o&&o();var n=$Eploy(this).data("ToggleScripts");"function"==typeof n&&n(),$Eploy(this).val("");l=null;null!=this.getAttribute("onclick")&&this.getAttribute("onclick").indexOf("ToggleDisplay")>-1?l=this.onclick:null!=this.getAttribute("onchange")&&this.getAttribute("onchange").indexOf("ToggleDisplay")>-1&&(l=this.onchange),null!=l&&l.call(this)}}))):$Eploy(u).data("parents",y.filter((function(e,t,l){return e!=h})));for(var m=0;m<s.length;m++)u=t+"_"+s[m],null!=document.getElementById(u)&&(E&&!i&&-1!=$Eploy.inArray(""+c,f)||i&&-1==$Eploy.inArray(""+c,f)?document.getElementById(u).enabled=!0:ValidatorEnable(document.getElementById(u),!1))}}function ToggleSet(e,t,l,o,n){if(e){var a="";"radio"==e.type?a="True"==e.value||"true"==e.value?1:"False"==e.value||"false"==e.value?0:e.value:"checkbox"==e.type?a=e.checked?1:0:"select-one"!=e.type&&"text"!=e.type&&"hidden"!=e.type||(a=e.value);var r=!1;"ParentValue"==n&&(r=!0,n=a);for(var i=l.split(";"),c=0;c<i.length;c++){var s=i[c].indexOf("#"),p=[i[c].slice(0,s),i[c].slice(s+1)],d="#div_"+p[0],u=p[1].split(",");(r&&-1!=$Eploy.inArray(""+n,u)||!r&&-1!=$Eploy.inArray(""+a,u))&&$Eploy(d+" :input").each((function(e){if(o&&(""==$Eploy(this).val()||"0"==$Eploy(this).val())||!o)switch($Eploy(this).attr("type")){case"radio":n||$Eploy(this).prop("checked",!1),n.toUpperCase()===$Eploy(this).val().toUpperCase()&&$Eploy(this).click();break;case"checkbox":1==n!=this.checked&&$Eploy(this).click();break;default:0==n?$Eploy(this).val(""):$Eploy(this).val(n),$Eploy(this).change()}}))}}}function ToggleSetDateTime(e,t,l,o,n,a,r,i,c){if(e){var s="";"radio"==e.type?s="True"==e.value||"true"==e.value?1:"False"==e.value||"false"==e.value?0:e.value:"checkbox"==e.type?s=e.checked?1:0:"select-one"!=e.type&&"text"!=e.type&&"hidden"!=e.type||(s=e.value);for(var p=l.split(";"),d=0;d<p.length;d++){var u=p[d].indexOf("#"),y=[p[d].slice(0,u),p[d].slice(u+1)],h="#"+t+"_"+y[0],E=y[1].split(",");-1!=$Eploy.inArray(""+s,E)&&("now"!=n.toLowerCase()?(void 0!==r&&"function"==typeof r&&(o&&""==$Eploy(h+"_txtDateValue").val()||!o)&&r(n),void 0!==i&&"function"==typeof i&&(o&&""==$Eploy(h+"_txtTimeValue").val()||!o)&&i(new Date(a))):void 0!==c&&"function"==typeof c&&(o&&""==$Eploy(h+"_txtDateValue").val()||!o)&&c())}}}function ToggleRequired(e,t,l,o){if(e){var n=$Eploy(e).val();"radio"==e.type?"True"==n||"true"==n?n=1:"False"!=n&&"false"!=n||(n=0):"checkbox"==e.type&&(n?e.checked||(n=""):n=e.checked?1:0);for(var a=l.split(";"),r=o.split(";"),i=0;i<a.length;i++){var c=a[i].indexOf("#"),s=[a[i].slice(0,c),a[i].slice(c+1)],p="#div_"+s[0],d=s[1].split(",");""!=r[i]&&(p=t+"_"+r[i],null!=document.getElementById(p)&&(-1!=$Eploy.inArray(""+n,d)?document.getElementById(p).enabled=!0:ValidatorEnable(document.getElementById(p),!1)))}}}function ShowInfluenceLoading(e){document.getElementById(e)&&(document.getElementById(e).style.display="inline-block")}function ShowActionOutcomeLoading(e){document.getElementById(e)&&(document.getElementById(e).style.display="inline-block")}function ShowCallOutcomeLoading(e){document.getElementById(e)&&(document.getElementById(e).style.display="inline-block")}function addJSONSlashes(e){return(e+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")}function SetCurrencySymbol(e,t){$Eploy("[data-currency-type='"+t+"'][data-currency-placeholder][data-currency-symbol]").text((function(l,o){let n=GetCurrencySymbol(e,t);return this.getAttribute("data-currency-placeholder").replace("{0}",n)}))}function GetCurrencySymbol(e,t){return e?window.CURRENCY_SYMBOLS&&window.CURRENCY_SYMBOLS.hasOwnProperty(e)?window.CURRENCY_SYMBOLS[e]:(console.error("Unable to find currency symbol for currencyID="+e),""):window["DEFAULT_CURRENCY_SYMBOL_"+t.toUpperCase()]?window["DEFAULT_CURRENCY_SYMBOL_"+t.toUpperCase()]:(console.error("No default currency symbol provided"),"")}Array.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1}),$Eploy.fn.limitMaxlength=function(e){var t=$Eploy.extend({attribute:"maxlen",onLimit:function(){},onEdit:function(){}},e),l=function(){var e=$Eploy(this),l=parseInt(e.attr(t.attribute));e.val().length>l&&(e.val(e.val().substr(0,l)),$Eploy.proxy(t.onLimit,this)()),$Eploy.proxy(t.onEdit,this)(l-e.val().length)};return this.each(l),this.keyup(l).keydown(l).focus(l).on("input paste",l)},$Eploy(document).ready((function(){window.ResourceStore&&window.ResourceStore.preloadResources([{moduleID:57,resourceKey:"str_CheckCount_Characters"},{moduleID:57,resourceKey:"str_CheckCount_WordCount"},{moduleID:57,resourceKey:"str_Min"},{moduleID:57,resourceKey:"str_Max"}]);$Eploy("textarea[maxlen]").limitMaxlength({onEdit:function(e){$Eploy(this).siblings(".charsRemaining").text(" "+e)},onLimit:function(){}})}));