"use strict";function update_saved_count(){window.cvl_num_saved_jobs=parseInt($("[data-initial-saved-jobs]").attr("data-initial-saved-jobs"))||0}function update_save_jobs(a){is_saved(a)?window.cvl_num_saved_jobs--:window.cvl_num_saved_jobs++,update_saved_btns(a)}function hide_flash_popup(a){var e=$("#save-pop-"+a);e[0]&&(e.removeClass("show"),setTimeout(function(){e.remove()},300))}function is_mobile(){return $("#mobile-icons").is(":visible")}function is_saved(a){if($('[name="savelnk'+a+'"]')[0])return $('[name="savelnk'+a+'"]').first().hasClass("saved")}function savejob(a){var e=new XMLHttpRequest,t=is_saved(a)?"DELETE":"PUT";e.open(t,"/save-job/"+a,!0),e.onload=function(){204===e.status?update_save_jobs(a):alertModal({title:"",description:"failed to save job"})},e.onerror=function(){alertModal({title:"",description:"failed to save job"})},e.send()}function show_flash_popup(a){var e=$("<div>").html("Job Saved!").addClass("mobile-savejob-flash-popup").attr("id","save-pop-"+a);$('[name="savelnk'+a+'"][data-save-mobile]').each(function(){var a=e.clone();$(this).after(a)});var t=$('[name="savelnk'+a+'"][data-save-mobile]').siblings(".mobile-savejob-flash-popup");setTimeout(function(){t.addClass("show")},10),setTimeout(function(){t.removeClass("show")},2e3),setTimeout(function(){t.remove()},2300)}function update_saved_btns(a){var e=is_saved(a);$('[name="savelnk'+a+'"]').each(function(a,e){var t=$(e),s=t.children("[data-save-copy]");t.toggleClass("saved"),s.text(t.hasClass("saved")?"Saved":"Save"),update_tooltip(t)}),is_mobile()&&!e?show_flash_popup(a):is_mobile()&&e&&hide_flash_popup(a),$(window).trigger("savedJobsUpdated",!e),$("[data-saved-jobs]").toggleClass("no-jobs-saved",0===window.cvl_num_saved_jobs),$("[data-saved-jobs-num]").text(window.cvl_num_saved_jobs)}function update_tooltip(a){if(a.is("[data-title]")){var e=a.attr("title");a.attr("title",a.data("title")).data("title",e)}var t=a.children("[data-save-tooltip]");if(t.length){var s=t.text();t.text(t.data("title")).data("title",s)}}$(function(){update_saved_count(),$("[data-save-job]").on("click",function(){savejob($(this).data("save-job"))})});