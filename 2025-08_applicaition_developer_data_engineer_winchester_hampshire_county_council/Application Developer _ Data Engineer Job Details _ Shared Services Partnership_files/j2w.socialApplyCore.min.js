var j2w=j2w||{};
j2w.SAB=function(){var c={},d=!1,e={buttonIndex:0,open:!1,withNetwork:"manual"},f=function(){var a,b,d=!1;a=$.extend(e,c.autoOpen);a.open&&(b=$(".btn-social-apply, .btnSocialApply").eq(a.buttonIndex),b.hasClass("btn-group")&&(d=!0),b.length&&(d?b.find("> a").click():b.find("a.main").mouseup(),$.each(c.profileData,function(c,d){if(d.type===a.withNetwork)return b.find("a.networkContainer[data-idx="+c+"]").click(),!1})))},g=function(a,b,c){j2w.SAB.email=a;switch(b){case "li":j2w.TC.isAwLI2Flow(b)&&$(".awli2-widget").show();
break;case "sk":socialApplyCheckSK();break;case "xi":xingTCOptions={emailAddress:a,action:"apply",socialSrc:b};socialApplyCheckXI();break;default:j2w.Apply.handleApplyNowButton(c)}};return{$activeButton:null,email:"",li:{applyStarted:!1},presentation:["drop","pop"],profileData:[],init:function(a){d?a=!1:(c=a,a=d=!0);return a},Args:{get:function(a){return j2w.Args.get(a,c)}},applyHandler:function(a){a=$.extend({socialSrc:""},a);j2w.Args.get("useCASWorkflow")?(a.emailAddress=j2w.SAB.email||this.extractEmailAddress(a,
j2w.Apply.Args.get("applyWithLinkedIn2Config")),a.action="apply",j2w.TC.collectForCASWorkflow(a)):(this.showPleaseWait(),j2w.SSO&&j2w.SSO.ready&&j2w.Apply.isUseOnPageBusinessCard()?j2w.SSO.start(a):(a="/talentcommunity/apply/"+this.Args.get("jobID")+"/?reviewtoken=socialApply&tcsetuptype=social&socialsrc="+a.socialSrc+"&locale="+this.Args.get("locale"),$.redirectPost(a,{email:j2w.SAB.email})))},extractEmailAddress:function(a,b){if("undefined"!==typeof a&&a.hasOwnProperty("socialSrc")&&"li"===a.socialSrc){if("undefined"!==
typeof b&&b.hasOwnProperty("email")&&"string"===typeof b.email&&0<b.email.trim().length)return b.email;if(a.hasOwnProperty("awli2profile")&&a.awli2profile.hasOwnProperty("emailAddress")&&"string"===typeof a.awli2profile.emailAddress&&0<a.awli2profile.emailAddress.trim().length)return a.awli2profile.emailAddress}return""},doAutoOpen:function(){f()},hideGetter:function(){$("ul.btnSocialApply .emailGetter").hide()},networkOptionsCount:function(){return this.$activeButton?this.$activeButton.find("a.applyOption").length:
0},showEmailGetter:function(){this.$activeButton.find(".emailGetter").show(1)},showPleaseWait:function(){this.$activeButton.find("li.tc-provider-option").attr("aria-hidden","true");this.$activeButton&&this.$activeButton.find("ul.socialbutton, ul.sub").find("li, .emailGetter").hide().end().find("li.loading").show()},submitEmailAddress:function(a){switch(j2w.Args.get("useCASWorkflow")){case !0:var b=this.$activeButton.find(".emailGetter").find("input[type=email]");j2w.TC.setTCEventFromOptions({action:"apply",
email:b.val(),socialSrc:b.data("sn")});g(b.val(),b.data("sn"),a);break;default:this.processEmailAddress(a)}j2w.Util.eventPreventer(a)},processEmailAddress:function(a){var b=this.$activeButton.find(".emailGetter").find("input[type=email]");j2w.Validation.isEmailOverlyLenient(b.val())?(clearGetterErrorState(),j2w.TC.setTCEventFromOptions({action:"apply",email:b.val(),socialSrc:b.data("sn")}),j2w.TC.isAwLI2Flow(b.data("sn"))||this.showPleaseWait(),$.ajax({type:"GET",url:"/services/security/email",dataType:"json",
cache:!1,error:function(a,b,c){j2w.Util.recoverFromAjaxError(a)},success:function(c){c.success&&c.email!==b.val()?j2w.Util.logoutCall(function(){g(b.val(),b.data("sn"),a)}):g(b.val(),b.data("sn"),a)}})):(b.val().length?setSABErrorState(jsStr.tcemailnotvalid):setSABErrorState(jsStr.tcemailaddressrequired),b.focus().select(),scrollForSABDropDown());j2w.Util.eventPreventer(a)}}}();
$(function(){"object"===typeof sabConfiguration&&sabConfiguration.presentation&&(j2w.SAB.presentation=sabConfiguration.presentation);$("a.dialogApplyBtn").hide()});$(document).on("abortSocialAuth",function(c,d){$(document).trigger("click");window.j2w.applyInProgress=!1});function revealAwLI2(){$(".socialbutton-awliShell").show()}function finishAwLI2Callback(c){$(".socialbutton-awliShell").hide();j2w.SAB.showPleaseWait();j2w.SAB.applyHandler({socialSrc:"li",awli2profile:c})}
function restoreSocialApplyOptions(){$(".btnSocialApply ul.sub").find("li").show().filter("li.loading").hide()}function sabPrepareTo(c){switch(c){case "pop":j2w.SAB.$activeButton.find("ul.sub").css({bottom:2*j2w.SAB.$activeButton.find("a.apply").height()+"px",left:"",top:""});break;default:j2w.SAB.$activeButton.find("ul.sub").css({bottom:"",top:"",left:""})}}
function scrollForSABDropDown(){1<$("ul.btnSocialApply").length&&j2w.SAB.$activeButton.data("sabID")===$("ul.btnSocialApply").last().data("sabID")&&$("html, body").scrollTop($(document).height())}function setMaxWidth(c){var d=0;$.each(c,function(){$(this).width()>d&&(d=$(this).width())});d&&c.width(d+"px")}function socialApplyCheckSK(){seekPolling()}
var xingLoginButton,loginToXing=function(){var c=setInterval(function(){var d=document.getElementsByTagName("iframe");for(i=0;i<d.length;i++){var e=d[i],f;try{if(f=e.contentDocument||e.contentWindow.document,xingLoginButton=f.getElementById("xing-login"),"undefined"!==typeof xingLoginButton){xingLoginButton.hidden=!0;clearInterval(c);xingLoginButton.click();break}}catch(g){}}},100)},xingUser,xingButtonClicked=!1;
function onXingAuthLogin(c){c.user&&(xingUser=c.user,xingButtonClicked&&socialApplyCheckXI())}function socialApplyCheckXI(){"object"===typeof xingUser?j2w.SAB.applyHandler({socialSrc:"xi"}):(xingButtonClicked=!0,loginToXing())}j2w.SAB.doAutoOpen();$(document).on("submit",".btn-social-apply form",function(c){j2w.SAB.submitEmailAddress(c)});$(".btn-social-apply button.start").on("keydown",function(c){13===c.which?j2w.SAB.submitEmailAddress(c):null});$(".btnSocialApply input.start").click(function(c){j2w.SAB.submitEmailAddress(c)});
$(document).ready(function(){$("#awli2Preload").show();$("#awli2Preload").appendTo(".awli2-widget")});
